/**
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @licence Simplified BSD License
 * @preserve
 */
!function(e){function i(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var t={};i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=0)}([function(e,i,t){t(1),e.exports=t(4)},function(e,i,t){"use strict";function a(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function o(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?e:i}function r(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}function n(e){var i=Math.floor(e/3600),t=Math.floor((e-3600*i)/60),a=Math.floor(e-3600*i-60*t);return t<10&&(t="0"+t),a<10&&(a="0"+a),t+":"+a}var u=function(){function e(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(i,t,a){return t&&e(i.prototype,t),a&&e(i,a),i}}(),l=function e(i,t,a){null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,t);if(void 0===o){var r=Object.getPrototypeOf(i);return null===r?void 0:e(r,t,a)}if("value"in o)return o.value;var n=o.get;if(void 0!==n)return n.call(a)},d=t(2),s=function(e){return e&&e.__esModule?e:{default:e}}(d),c=OSjs.require("utils/fs"),p=OSjs.require("utils/misc"),b=OSjs.require("core/locales"),m=OSjs.require("core/dialog"),f=OSjs.require("vfs/file"),g=OSjs.require("helpers/default-application"),h=OSjs.require("helpers/default-application-window"),y=b.createLocalizer(s.default),k=function(e){function i(e,t,r){a(this,i);var n=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"ApplicationMusicPlayerWindow",{icon:t.icon,title:t.name,auto_size:!0,allow_drop:!0,allow_resize:!1,allow_maximize:!1,width:370,height:260,translator:y},e,r));return n.updated=0,n.seeking=!1,n}return r(i,e),u(i,[{key:"init",value:function(e,a){var o=l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"init",this).apply(this,arguments),r=this;this._render("MusicPlayerWindow",t(3));var n=this._find("LabelTime"),u=this._find("Seek"),d=this._find("Player"),s=d.$element.firstChild;this._find("ButtonStart").set("disabled",!0),this._find("ButtonRew").set("disabled",!0);var c=this._find("ButtonPlay").set("disabled",!0).on("click",function(){s.play()}),p=this._find("ButtonPause").set("disabled",!0).on("click",function(){s.pause()});return this._find("ButtonFwd").set("disabled",!0),this._find("ButtonEnd").set("disabled",!0),u.on("change",function(e){if(r.seeking=!1,s&&!s.paused)try{s.pause(),e&&(s.currentTime=e.detail||0),s.play()}catch(e){}}),d.on("play",function(e){u.set("disabled",!1),p.set("disabled",!1),c.set("disabled",!0)}),d.on("ended",function(e){u.set("disabled",!0),p.set("disabled",!0)}),d.on("pause",function(e){u.set("disabled",!0),p.set("disabled",!1),c.set("disabled",!1)}),d.on("loadeddata",function(e){}),d.on("timeupdate",function(e){r.updateTime(n,u)}),d.on("error",function(e){if(d.$element.src){var i=null;try{switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:i=y("Playback aborted");break;case e.target.error.MEDIA_ERR_NETWORK:i=y("Network or communication error");break;case e.target.error.MEDIA_ERR_DECODE:i=y("Decoding failed. Corruption or unsupported media");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:i=y("Media source not supported");break;default:i=b._("ERR_APP_UNKNOWN_ERROR")}}catch(e){i=b._("ERR_GENERIC_APP_FATAL_FMT",e)}i&&m.create("Alert",{title:r._title,message:i},null,r)}}),o}},{key:"showFile",value:function(e,i){if(e&&i){var t=this,a=this._find("Player"),o=this._find("Seek"),r=a.$element.firstChild;o.on("mousedown",function(){t.seeking=!0}),o.on("mouseup",function(){t.seeking=!1});var n=e?e.filename:"",u=e?c.dirname(e.path):"",l=this._find("LabelArtist").set("value",""),d=this._find("LabelTitle").set("value",n),s=this._find("LabelAlbum").set("value",u);this._find("LabelTime").set("value",""),o.set("min",0),o.set("max",0),o.set("value",0),this.updated=0,this.seeking=!1,r.src=i||"",r.play(),function(){t._app._api("info",{filename:e.path}).then(function(e){e&&(e.Artist&&l.set("value",e.Artist),e.Album&&s.set("value",e.Album),e.Title&&d.set("value",e.Track))})}()}}},{key:"updateTime",value:function(e,i){if(!this._destroyed){var t=this._find("Player"),a=t.$element.firstChild,o=a.duration,r=a.currentTime,u=!1;!isNaN(r)&&isFinite(r)||(r=0),!isNaN(o)&&isFinite(o)||(o=r,u=!0);var l=p.format("{0} / {1}",n(r),u?"<unknown>":n(o));this.updated<2?(i.set("min",0),i.set("max",o)):this.updated++,e.set("value",l),this.seeking||i.set("value",r)}}}]),i}(h),v=function(e){function i(e,t){return a(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"ApplicationMusicPlayer",e,t,{readData:!1}))}return r(i,e),u(i,[{key:"init",value:function(e,t){l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"init",this).apply(this,arguments);var a=this._getArgument("file");this._addWindow(new k(this,t,a))}},{key:"_onMessage",value:function(e,t,a){if(l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_onMessage",this).apply(this,arguments),"attention"===e&&t&&t.file){var o=this._getMainWindow();this.openFile(new f(t.file),o)}}}]),i}(g);OSjs.Applications.ApplicationMusicPlayer=v},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={bg_BG:{Playlist:"Плейлист","Playback aborted":"Прекратено изпълнение","Network or communication error":"Проблем с връзка към мрежа","Decoding failed. Corruption or unsupported media":"Провалено декодиране, повереден файл или неподдържан формат","Media source not supported":"Източника на медия не се поддържа","Failed to play file":"Изпълнението на файла се провали",Artist:"Изпълнител",Album:"Албум",Track:"Песен",Time:"Време","Media information query failed":"Получаване на информация провалено","seek unavailable in format":"Невъществуващ формат","The audio type is not supported: {0}":"Аудио формата не се поддържа"},de_DE:{Playlist:"Wiedergabeliste","Playback aborted":"Wiedergabe abgebrochen","Network or communication error":"Netzwerk Kommunikationsfehler","Decoding failed. Corruption or unsupported media":"Dekodierung gescheitert. Fehlerhafte oder nicht unterstützte Datei","Media source not supported":"Medienquelle nicht unterstützt","Failed to play file":"Wiedergabe der Datei gescheitert",Artist:"Künstler",Album:"Album",Track:"Titel",Time:"Zeit","Media information query failed":"Media Informationssuche gescheitert","seek unavailable in format":"Spulen im Format nicht verfügbar","The audio type is not supported: {0}":"Der Audio-Typ {0} ist nicht unterstützt"},es_ES:{Playlist:"Lista de reproducción","Playback aborted":"Playback anulado","Network or communication error":"Error de red o de comunicación","Decoding failed. Corruption or unsupported media":"Fallo en el desentrelazado. Medio corrupto o no soportado","Media source not supported":"Medio no soportado","Failed to play file":"Error reproduciendo archivo",Artist:"Artista",Album:"Album",Track:"Pista",Time:"Tiempo","Media information query failed":"Error recupersqndo información del medio","seek unavailable in format":"búsqueda no disponible en este formato","The audio type is not supported: {0}":"El tipo de audio no está soportado: {0}"},fr_FR:{Playlist:"Liste de lecture","Playback aborted":"Lecture interrompue","Network or communication error":"Erreur de communication ou de réseau","Decoding failed. Corruption or unsupported media":"Décodage raté. Média corrompus ou non pris en charge","Media source not supported":"Source de médias non pris en charge","Failed to play file":"Impossible de lire le fichier",Artist:"Artiste",Album:"Album",Track:"Piste",Time:"Durée","Media information query failed":"Requête des informations média échoué","seek unavailable in format":"recherche indisponible dans ce format","The audio type is not supported: {0}":"Le type audio n'est pas pris en charge: {0}"},ar_DZ:{Playlist:"قائمة القرائة","Playback aborted":"قطع التشغيل","Network or communication error":"خطأ في الإتصال بالشبكة","Decoding failed. Corruption or unsupported media":"فشل في فك التشفير. وسائط غير صالحة أو غير مدعومة","Media source not supported":"وسائط غير مدعومة","Failed to play file":"لايمكن قراءة الملف",Artist:"الفنان",Album:"الألبوم",Track:"المقطع",Time:"المدة","Media information query failed":"خطأ في قراءة معلومات الوسائط","seek unavailable in format":"بحث غير ممكن في هذا النوع","The audio type is not supported: {0}":"نوع الملف الصوتي غير مدعوم: {0}"},it_IT:{Playlist:"Playlist","Playback aborted":"Riproduzione terminata","Network or communication error":"Errore di rete o di comunicazione","Decoding failed. Corruption or unsupported media":"Decodifica fallita. Supporto corroto o non supportato.","Media source not supported":"Sorgente multimediale non supportata","Failed to play file":"Riproduzione file fallita",Artist:"Artista",Album:"Album",Track:"Traccia",Time:"Tempo","Media information query failed":"Recupero informazioni media fallita","seek unavailable in format":"ricerca non disponibile nel formato","The audio type is not supported: {0}":"Tipo di audio non supportato: {0}"},ko_KR:{Playlist:"재생목록","Playback aborted":"일시중지","Network or communication error":"네트워크 등 통신 문제가 발생했습니다","Decoding failed. Corruption or unsupported media":"디코딩에 실패했습니다. 손상되었거나 지원하지 않는 형식입니다","Media source not supported":"지원하지 않는 미디어 소스입니다","Failed to play file":"파일을 재생하는데 실패했습니다",Artist:"아티스트",Album:"앨범",Track:"트랙",Time:"시간","Media information query failed":"미디어 정보 조회에 실패했습니다","seek unavailable in format":"탐색을 지원하지 않는 형식입니다","The audio type is not supported: {0}":"이 오디오 형식은 지원하지 않습니다: {0}"},nl_NL:{Playlist:"Afspeellijst","Playback aborted":"Afspelen afgebroken","Network or communication error":"Netwerk of communicatie fout","Decoding failed. Corruption or unsupported media":"Decoderen mislukt: bestandstype wordt niet ondersteund","Media source not supported":"Mediabron wordt niet ondersteund","Failed to play file":"Afspelen van bestand mislukt",Artist:"Artiest",Album:"Album",Track:"Nummer",Time:"Tijd","Media information query failed":"Zoeken naar media is niet gelukt","seek unavailable in format":"Voor/achteruit spoelen is niet beschikbaar in dit formaat","The audio type is not supported: {0}":"Audio type {0} wordt niet ondersteund"},no_NO:{Playlist:"Spilleliste","Playback aborted":"Avspilling avbrutt","Network or communication error":"Nettverks- eller kommunikasjonsfeil","Decoding failed. Corruption or unsupported media":"Dekoding feilet. Korrupt eller ustøttet media","Media source not supported":"Media-kilde ikke støttet","Failed to play file":"Klarte ikke spille av fil",Artist:"Artist",Album:"Album",Track:"Låt",Time:"Tid","Media information query failed":"Media-informasjon forespursel feil","seek unavailable in format":"spoling utilgjenglig i format","The audio type is not supported: {0}":"Denne lyd-typen er ikke støttet: {0}"},pl_PL:{Playlist:"Playlista","Playback aborted":"Odtwarzanie Przerwane","Network or communication error":"Błąd Sieci lub Komunikacji","Decoding failed. Corruption or unsupported media":"Dekodowanie nie powiodło się. Uszkodzony lub nieobsługiwany plik","Media source not supported":"Plik nie jest wspierany","Failed to play file":"Nie można odtworzyć pliku",Artist:"Artysta",Album:"Album",Track:"Ścieżka",Time:"Czas","Media information query failed":"Brak informacji","seek unavailable in format":"Przewijanie nie jest obsługiwane w tym formacie","The audio type is not supported: {0}":"Ten typ audio nie jest obsługiwany: {0}"},ru_RU:{Playlist:"Список воспроизведения","Playback aborted":"Воспроизведение прервано","Network or communication error":"Ошибка соединения","Decoding failed. Corruption or unsupported media":"Не удалось декодировать файл. Файл поврежден или данынй формат не поддерживается","Media source not supported":"Тип файла не поддерживается","Failed to play file":"Ошибка воспроизведения",Artist:"Артист",Album:"Альбом",Track:"Трек",Time:"Время","Media information query failed":"Ошибка в запросе медиа-информации","seek unavailable in format":"Перемотка недоступна в этом формате","The audio type is not supported: {0}":"Тип аудио не поддерживается: {0}"},sk_SK:{Playlist:"Zoznam skladieb","Playback aborted":"Prehrávanie prerušené","Network or communication error":"Chyba v sieťovej komunikácii","Decoding failed. Corruption or unsupported media":"Dekódovanie sa nepodarilo alebo médium je nepodporované","Media source not supported":"Zdrojové médium nie je podporované","Failed to play file":"Chyba pri prehrávaní súboru",Artist:"Umelec",Album:"Album",Track:"Skladba",Time:"Čas","Media information query failed":"Chyba pri získavaní informácii o médiu","seek unavailable in format":"Formát média nepodporuje preskakovanie (seek)","The audio type is not supported: {0}":"Nepodporovaný formát: {0}"},tr_TR:{Playlist:"Oynatma listesi","Playback aborted":"kayıt çalma/dinleme durduruldu","Network or communication error":"ağ veya iletişim hatası","Decoding failed. Corruption or unsupported media":"çözümleme hatası. Bozuk veya çalışmıyor.","Media source not supported":"medya kaynağı bulunamadı","Failed to play file":"Oynatma hatası",Artist:"Artist",Album:"Album",Track:"Parça",Time:"zaman","Media information query failed":"medya bilgisini elde etmede hata oluştu","seek unavailable in format":"bu formatta ileri saramazsınız","The audio type is not supported: {0}":"Bu format desteklenmiyor: {0}"},vi_VN:{Playlist:"Danh sách phát","Playback aborted":"Phát lại bị hủy","Network or communication error":"Mạng hoặc thông tin liên lạc bị lỗi","Decoding failed. Corruption or unsupported media":"Giải mã thất bại. Tập tin bị hỏng hoặc không được hỗ trợ","Media source not supported":"Nguồn phương tiện không được hỗ trợ","Failed to play file":"Không thể chơi tập tin",Artist:"Ca sĩ",Album:"Album",Track:"Bài hát",Time:"Thời gian","Media information query failed":"Truy vấn thông tin tập tin thất bại","seek unavailable in format":"không tua được trong định dạng này","The audio type is not supported: {0}":"Loại âm thanh {0} không được hỗ trợ"}}},function(e,i){e.exports='<application-window data-id="MusicPlayerWindow"> <gui-vbox> \x3c!-- MENU BAR --\x3e <gui-vbox-container data-grow="0" data-shrink="1" data-basis="auto"> <gui-menu-bar> <gui-menu-bar-entry data-label="LBL_FILE"> <gui-menu data-id="SubmenuFile"> <gui-menu-entry data-id="MenuOpen" data-label="LBL_OPEN"></gui-menu-entry> <gui-menu-entry data-id="MenuClose" data-label="LBL_CLOSE"></gui-menu-entry> </gui-menu> </gui-menu-bar-entry> </gui-menu-bar> </gui-vbox-container> \x3c!-- CONTENT --\x3e <gui-vbox-container data-shrink="1" data-basis="auto"> <gui-vbox data-id="Metadata"> <gui-vbox-container data-shrink="1"> <gui-hbox> <gui-hbox-container data-basis="80"> <gui-label class="gui-bold">Artist</gui-label> </gui-hbox-container> <gui-hbox-container> <gui-label data-id="LabelArtist"></gui-label> </gui-hbox-container> </gui-hbox> </gui-vbox-container> <gui-vbox-container data-shrink="1"> <gui-hbox> <gui-hbox-container data-basis="80"> <gui-label class="gui-bold">Album</gui-label> </gui-hbox-container> <gui-hbox-container> <gui-label data-id="LabelAlbum"></gui-label> </gui-hbox-container> </gui-hbox> </gui-vbox-container> <gui-vbox-container data-shrink="1"> <gui-hbox> <gui-hbox-container data-basis="80"> <gui-label class="gui-bold">Title</gui-label> </gui-hbox-container> <gui-hbox-container> <gui-label data-id="LabelTitle"></gui-label> </gui-hbox-container> </gui-hbox> </gui-vbox-container> <gui-vbox-container data-shrink="1"> <gui-hbox> <gui-hbox-container data-basis="80"> <gui-label class="gui-bold">Time</gui-label> </gui-hbox-container> <gui-hbox-container> <gui-label data-id="LabelTime"></gui-label> </gui-hbox-container> </gui-hbox> </gui-vbox-container> </gui-vbox> </gui-vbox-container> <gui-vbox-container data-expand="true" data-grow="1"> <gui-slider data-id="Seek"></gui-slider> </gui-vbox-container> <gui-vbox-container data-shrink="1" data-align="center"> <gui-button-bar data-id="Controls"> <gui-button data-id="ButtonStart" data-stock-icon="32x32/actions/media-playback-start.png" data-icon-size="32"></gui-button> <gui-button data-id="ButtonRew" data-stock-icon="32x32/actions/media-seek-backward.png" data-icon-size="32"></gui-button> <gui-button data-id="ButtonPlay" data-stock-icon="32x32/actions/media-playback-start.png" data-icon-size="32"></gui-button> <gui-button data-id="ButtonPause" data-stock-icon="32x32/actions/media-playback-pause.png" data-icon-size="32"></gui-button> <gui-button data-id="ButtonFwd" data-stock-icon="32x32/actions/media-seek-forward.png" data-icon-size="32"></gui-button> <gui-button data-id="ButtonEnd" data-stock-icon="32x32/actions/media-skip-forward.png" data-icon-size="32"></gui-button> </gui-button-bar> <gui-audio data-id="Player"></gui-audio> </gui-vbox-container> </gui-vbox></application-window>'},function(e,i){}]);
//# sourceMappingURL=main.js.map