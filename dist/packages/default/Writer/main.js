/**
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @licence Simplified BSD License
 * @preserve
 */
!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){n(1),t.exports=n(4)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,o)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(o)},c=n(2),l=function(t){return t&&t.__esModule?t:{default:t}}(c),d=OSjs.require("vfs/fs"),s=OSjs.require("core/config"),f=OSjs.require("core/dialog"),g=OSjs.require("gui/element"),m=OSjs.require("utils/misc"),p=OSjs.require("core/locales"),b=OSjs.require("helpers/default-application"),h=OSjs.require("helpers/default-application-window"),y=p.createLocalizer(l.default),L=function(t){function e(t,n,a){o(this,e);var u=s.getConfig(),r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"ApplicationWriterWindow",{allow_drop:!0,icon:n.icon,title:n.name,width:550,height:400,translator:y},t,a));return r.checkChangeLength=-1,r.checkChangeInterval=null,r.color={background:"#ffffff",foreground:"#000000"},r.font={name:u.Fonts.default,size:3},r}return a(e,t),u(e,[{key:"destroy",value:function(){this.checkChangeInterval=clearInterval(this.checkChangeInterval),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).apply(this,arguments)}},{key:"init",value:function(t,o){function i(t){_[t.detail.id]&&_[t.detail.id]()}function a(){function t(t){return h.query(t)}var e={fontName:(t("fontName")||"").split(",")[0].replace(/^'/,"").replace(/'$/,""),fontSize:parseInt(t("fontSize"),10)||b.font.size,foreColor:t("foreColor"),hiliteColor:t("hiliteColor")};return Object.keys(L).forEach(function(n){var o=L[n];e[o.command]={button:n,value:t(o.command)}}),e}function u(t,e){b._toggleDisabled(!0),f.create("Color",{color:t},function(t,n,o){b._toggleDisabled(!1),"ok"===n&&o&&e(o.hex)},b)}function c(t,e){b._toggleDisabled(!0),f.create("Font",{fontSize:b.font.size,fontName:b.font.name,minSize:1,maxSize:8,unit:"null"},function(t,n,o){b._toggleDisabled(!1),"ok"===n&&o&&e(o)},b)}function l(t){v.set("value",t.hiliteColor),k.set("value",t.foreColor),t.fontName&&x.set("label",m.format("{0} ({1})",t.fontName,t.fontSize.toString()))}function s(){l(a())}var p=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).apply(this,arguments),b=this;this._render("WriterWindow",n(3));var h=this._find("Text"),L={"text-bold":{command:"bold"},"text-italic":{command:"italic"},"text-underline":{command:"underline"},"text-strikethrough":{command:"strikeThrough"},"justify-left":{command:"justifyLeft"},"justify-center":{command:"justifyCenter"},"justify-right":{command:"justifyRight"},indent:{command:"indent"},unindent:{command:"outdent"}},_={MenuUndo:function(){h.command("undo",!1)},MenuRedo:function(){h.command("redo",!1)},MenuCopy:function(){h.command("copy",!1)},MenuCut:function(){h.command("cut",!1)},MenuDelete:function(){h.command("delete",!1)},MenuPaste:function(){h.command("paste",!1)},MenuUnlink:function(){h.command("unlink",!1)},MenuInsertOL:function(){h.command("insertOrderedList",!1)},MenuInsertUL:function(){h.command("insertUnorderedList",!1)},MenuInsertImage:function(){f.create("File",{filter:["^image"]},function(t,e,n){"ok"===e&&n&&d.url(n).then(function(t){h.command("insertImage",!1,t)})},b)},MenuInsertLink:function(){f.create("Input",{message:y("Insert URL"),placeholder:"https://os-js.org"},function(t,e,n){"ok"===e&&n&&h.command("createLink",!1,n)},b)}};this._find("SubmenuEdit").on("select",i),this._find("SubmenuInsert").on("select",i);var v=this._find("Background").on("click",function(){u(b.color.background,function(t){h.command("hiliteColor",!1,t),b.color.background=t,v.set("value",t)})}),k=this._find("Foreground").on("click",function(){u(b.color.foreground,function(t){h.command("foreColor",!1,t),b.color.foreground=t,k.set("value",t)})}),x=this._find("Font").on("click",function(){c(null,function(t){h.command("fontName",!1,t.fontName),h.command("fontSize",!1,t.fontSize),b.font.name=t.fontName,b.font.size=t.fontSize})});return p.querySelectorAll("gui-toolbar > gui-button").forEach(function(t){var e=t.getAttribute("data-id"),n=L[e];n&&g.createFromNode(t).on("click",function(){h.command(n.command)}).on("mousedown",function(t){t.preventDefault()})}),v.set("value",this.color.background),k.set("value",this.color.foreground),x.set("label",m.format("{0} ({1})",this.font.name,this.font.size.toString())),h.on("selection",function(){s()}),this.checkChangeInterval=setInterval(function(){if(!b.hasChanged){b.checkChangeLength<0&&(b.checkChangeLength=h.get("value").length);var t=h.get("value").length;t!==b.checkChangeLength&&(b.hasChanged=!0),b.checkChangeLength=t}},500),p}},{key:"updateFile",value:function(t){h.prototype.updateFile.apply(this,arguments);try{this._find("Text").$element.focus()}catch(t){}this.checkChangeLength=-1}},{key:"showFile",value:function(t,e){this._find("Text").set("value",e||""),h.prototype.showFile.apply(this,arguments)}},{key:"getFileData",value:function(){return this._find("Text").get("value")}},{key:"_focus",value:function(t,n){return!!r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_focus",this).apply(this,arguments)&&(this._find("Text").focus(),!0)}}]),e}(h),_=function(t){function e(t,n){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"ApplicationWriter",t,n,{extension:"odoc",mime:"osjs/document",filename:"New text file.odoc"}))}return a(e,t),u(e,[{key:"init",value:function(t,n){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).apply(this,arguments);var o=this._getArgument("file");this._addWindow(new L(this,n,o))}}]),e}(b);OSjs.Applications.ApplicationWriter=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={bg_BG:{"Insert URL":"Въведи URL"},de_DE:{"Insert URL":"URL einfügen"},es_ES:{"Insert URL":"Insertar URL"},fr_FR:{"Insert URL":"Insérer une URL"},ar_DZ:{"Insert URL":"أدخل رابط"},it_IT:{"Insert URL":"Inserisci URL"},ko_KR:{"Insert URL":"링크 삽입"},nl_NL:{"Insert URL":"URL invoegen"},no_NO:{"Insert URL":"Sett inn URL"},pl_PL:{"Insert URL":"Wpisz URL"},ru_RU:{"Insert URL":"Вставить ссылку"},sk_SK:{"Insert URL":"Vložiť URL"},tr_TR:{"Insert URL":"URL ekle"},vi_VN:{"Insert URL":"Thêm URL"}}},function(t,e){t.exports='<application-window data-id="WriterWindow"> <gui-vbox> \x3c!-- MENU BAR --\x3e <gui-vbox-container data-grow="0" data-shrink="1" data-basis="auto"> <gui-menu-bar> <gui-menu-bar-entry data-label="LBL_FILE"> <gui-menu data-id="SubmenuFile"> <gui-menu-entry data-id="MenuNew" data-label="LBL_NEW"></gui-menu-entry> <gui-menu-entry data-id="MenuOpen" data-label="LBL_OPEN"></gui-menu-entry> <gui-menu-entry data-id="MenuSave" data-label="LBL_SAVE"></gui-menu-entry> <gui-menu-entry data-id="MenuSaveAs" data-label="LBL_SAVEAS"></gui-menu-entry> <gui-menu-entry data-id="MenuClose" data-label="LBL_CLOSE"></gui-menu-entry> </gui-menu> </gui-menu-bar-entry> <gui-menu-bar-entry data-label="LBL_EDIT"> <gui-menu data-id="SubmenuEdit"> <gui-menu-entry data-id="MenuUndo" data-label="LBL_UNDO"></gui-menu-entry> <gui-menu-entry data-id="MenuRedo" data-label="LBL_REDO"></gui-menu-entry> <gui-menu-entry data-id="MenuCut" data-label="LBL_CUT"></gui-menu-entry> <gui-menu-entry data-id="MenuCopy" data-label="LBL_COPY"></gui-menu-entry> <gui-menu-entry data-id="MenuPaste" data-label="LBL_PASTE"></gui-menu-entry> <gui-menu-entry data-id="MenuDelete" data-label="LBL_DELETE"></gui-menu-entry> <gui-menu-entry data-id="MenuUnlink" data-label="LBL_UNLINK"></gui-menu-entry> </gui-menu> </gui-menu-bar-entry> <gui-menu-bar-entry data-label="LBL_INSERT"> <gui-menu data-id="SubmenuInsert"> <gui-menu-entry data-id="MenuInsertOL" data-label="LBL_ORDERED_LIST"></gui-menu-entry> <gui-menu-entry data-id="MenuInsertUL" data-label="LBL_UNORDERED_LIST"></gui-menu-entry> <gui-menu-entry data-id="MenuInsertLink" data-label="LBL_LINK"></gui-menu-entry> <gui-menu-entry data-id="MenuInsertImage" data-label="LBL_IMAGE"></gui-menu-entry> </gui-menu> </gui-menu-bar-entry> </gui-menu-bar> </gui-vbox-container> \x3c!-- TOOLS --\x3e <gui-vbox-container data-shrink="1" data-basis="auto" data-expand="true"> <gui-toolbar> <gui-button data-id="text-bold" data-stock-icon="actions/format-text-bold.png"></gui-button> <gui-button data-id="text-italic" data-stock-icon="actions/format-text-italic.png"></gui-button> <gui-button data-id="text-underline" data-stock-icon="actions/format-text-underline.png"></gui-button> <gui-button data-id="text-strikethrough" data-stock-icon="actions/format-text-strikethrough.png"></gui-button> <gui-toolbar-separator /> <gui-button data-id="justify-left" data-stock-icon="actions/format-justify-left.png"></gui-button> <gui-button data-id="justify-center" data-stock-icon="actions/format-justify-center.png"></gui-button> <gui-button data-id="justify-right" data-stock-icon="actions/format-justify-right.png"></gui-button> <gui-toolbar-separator /> <gui-button data-id="indent" data-stock-icon="actions/format-indent-less.png"></gui-button> <gui-button data-id="unindent" data-stock-icon="actions/format-indent-more.png"></gui-button> <gui-toolbar-separator /> <gui-color-box data-id="Foreground"></gui-color-box> <gui-color-box data-id="Background"></gui-color-box> <gui-toolbar-separator /> <gui-button data-id="Font" data-group="tool" data-tool-name="">FONT (SIZE)</gui-button> </gui-toolbar> </gui-vbox-container> \x3c!-- CONTENT --\x3e <gui-vbox-container data-grow="1" data-shrink="0" data-basis="auto" data-fill="true"> <gui-richtext data-id="Text"></gui-richtext> </gui-vbox-container> \x3c!-- STATUSBAR --\x3e \x3c!-- <gui-vbox-container data-grow="0" data-shrink="1" data-basis="auto"> <gui-statusbar data-id="Statusbar"></gui-statusbar> </gui-vbox-container> --\x3e </gui-vbox></application-window>'},function(t,e){}]);
//# sourceMappingURL=main.js.map