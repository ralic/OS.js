{"version":3,"sources":["webpack:///main.js","webpack:///webpack/bootstrap 1e3d08cec60d4d919272","webpack:///./panelitem.js","webpack:///./locales.js","webpack:///./widget.js","webpack:///./main.js","webpack:///./windowswitcher.js","webpack:///./iconview.js","webpack:///./panel.js","webpack:///./widgets/digitalclock.js","webpack:///./widgets/analogclock.js","webpack:///./panelitems/appmenu.js","webpack:///./menu.js","webpack:///./panelitems/buttons.js","webpack:///./panelitems/clock.js","webpack:///./panelitemdialog.js","webpack:///./panelitems/notificationarea.js","webpack:///./panelitems/search.js","webpack:///./panelitems/weather.js","webpack:///./panelitems/windowlist.js","webpack:///./scheme.html"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_locales","_locales2","obj","default","_","OSjs","require","createLocalizer","Menu","DOM","Events","SettingsFragment","WindowManager","PanelItem","className","itemName","settings","defaults","this","_$root","_$container","_className","_itemName","split","_settings","_settingsDialog","mergeDefaults","description","icon","hasoptions","_this","document","createElement","setAttribute","title","$bind","ev","stopPropagation","preventDefault","create","onClick","openSettings","appendChild","destroy","$unbind","$remove","DialogRef","args","_this2","_restore","wm","_scheme","button","applySettings","addWindow","bg_BG","Killing this process will stop things from working!","Open settings","Your panel has no items. Go to settings to reset default or modify manually\n(This error may occur after upgrades of OS.js)","Create shortcut","Set as wallpaper","An error occured while creating PanelItem: {0}","Development","Education","Games","Graphics","Network","Multimedia","Office","System","Utilities","Other","de_DE","es_ES","fr_FR","Show Icons","Hide Icons","ar_DZ","it_IT","ko_KR","nl_NL","no_NO","Create in {0}","pl_PL","ru_RU","sk_SK","tr_TR","vi_VN","bindWidgetEvents","_getDimensionAspected","dx","dy","_options","aspect","width","dimension","height","_aspect","_mouseDown","pos","action","_locked","timeout","clearTimeout","start","position","_getNormalizedPosition","_getDimension","window","x","y","left","top","_onMouseMove","_onMouseUp","_windowWidth","innerWidth","_windowHeight","innerHeight","_onMouseDown","_$element","_$resize","_showEnvelope","setTimeout","TIMEOUT_SHOW_ENVELOPE","_hideEnvelope","TIMEOUT_HIDE_ENVELOPE","_onContextMenu","validNumber","num","isNaN","Utils","DEFAULT_OPTIONS","minWidth","minHeight","maxHeight","maxWidth","right","bottom","locked","canvas","resizable","viewBox","frequency","custom","enabled","Widget","options","mergeObject","cloneObject","_position","_dimension","_name","_isManipulating","_requestId","_saveTimeout","_settingsWindow","_$canvas","_$context","root","getContext","_updatePosition","_updateDimension","_setLock","$addClass","onInited","onResize","fpsInterval","now","then","elapsed","animate","requestAnimationFrame","Date","onRender","fps","Math","min","cancelAnimationFrame","_setPosition","onMove","_setDimension","_resizeTimeout","$removeClass","_saveOptions","_this3","onContextMenu","menu","Array","concat","push","_openSettings","tree","opts","set","_this4","_focus","win","Window","_on","scheme","onOpenSettings","_render","id","_find","on","save","render","stick","_isPastHalf","w","max","h","String","style","k","v","def","dir","hleft","aleft","htop","_interopRequireDefault","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","defaultSettings","compability","Compability","getCompability","cfg","animations","css","animation","useTouchMenu","touch","_get","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","_windowswitcher","_windowswitcher2","_iconview","_iconview2","_panel","_panel2","_digitalclock","_digitalclock2","_analogclock","_analogclock2","_appmenu","_appmenu2","_buttons","_buttons2","_clock","_clock2","_notificationarea","_notificationarea2","_search","_search2","_weather","_weather2","_windowlist","_windowlist2","Locales","GUIScheme","Config","Authenticator","Application","PackageManager","SettingsManager","FileMetadata","Notification","Theme","Init","GUI","VFS","FS","ServiceNotificationIcon","translate","CoreWM","_WindowManager","metadata","_winGenericHotkey","hotkey","_onKeyEvent","importSettings","panels","widgets","switcher","iconView","importedSettings","getConfig","fromString","generatedHotkeyMap","hotkeyMap","SEARCH","panel","getPanel","pitem","getItemByType","Applications","PanelItems","Search","show","SWITCHER","getSetting","WINDOW_MINIMIZE","_minimize","WINDOW_MAXIMIZE","_maximize","WINDOW_RESTORE","WINDOW_MOVE_LEFT","_moveTo","WINDOW_MOVE_RIGHT","WINDOW_MOVE_UP","WINDOW_MOVE_DOWN","SAVE","SAVEAS","OPEN","update","watch","msg","match","_refresh","e","initSwitcher","initDesktop","initPanels","initWidgets","initIconView","init","user","getUser","displayMenu","logout","toggleFullscreen","docElm","documentElement","notif","getIcon","_isFullscreen","displayDevMenu","don","$hasClass","body","apps","getProcesses","filter","iter","map","__label","__pid","reload","mnu","createIcon","username","Promise","resolve","force","confirm","destroyIcon","destroyPanels","destroyWidgets","background","apply","arguments","forEach","createDroppable","onOver","el","onDropOver","onLeave","onDropLeave","onDrop","onItemDropped","item","onDropItem","onFilesDropped","files","onDropFile","ps","added","storedItem","panelSettings","items","itemSettings","ex","addItem","message","getOntop","getPosition","space","getWindowSpace","_windows","_move","resize","setStyles","_this5","Widgets","_inited","_this6","en","getRoot","rect","wasInited","margin","windows","_isResponsive","wrect","mx","my","moved","_getViewRect","_state","mimimized","maximized","_restored","_this7","_applyWallpaper","data","wallpaper","path","_createShortcut","addShortcut","type","mime","dst","pathJoin","filename","copy","upload","destination","openDesktopMenu","altKey","hide","_this8","combination","keys","some","keyCombination","category","panelItem","getItem","WindowList","blur","NotificationArea","arg","_this9","_getContextMenu","showSettings","enableIconView","_emit","triggerWatch","_this10","setIconView","language","setLocale","slice","styles","raw","opacity","foreground","mw","getDefaultSetting","borderSize","theme","getStyleTheme","border","invertIconViewColor","backgroundColor","invertHEX","createStylesheet","noMargin","ph","getHeight","getAutohide","isAutoHidden","borders","val","idx","DigitalClock","AnalogClock","AppMenu","Buttons","Clock","Weather","WindowSwitcher","$switcher","showing","index","winRef","_remove","parentNode","removeChild","getLastWindow","$empty","container","image","label","src","_icon","innerHTML","_title","_wid","element","marginTop","createCreateDialog","cb","Dialog","result","Process","MountManager","GUIElement","IconViewShortcutDialog","_Dialog","closeCallback","allow_maximize","allow_resize","allow_minimize","values","app","JSON","stringify","_close","parse","DesktopIconView","dialog","$iconview","$element","shortcutCache","refreshTimeout","createFromNode","build","getCurrentWindow","_blur","detail","entries","entry","file","createFromFile","createContextMenu","desktopPath","shortcutPath","scandir","backlink","shortcut","niter","__index","_type","getFileIcon","clear","add","refresh","cache","mkdir","dirname","finally","write","_save","found","splice","dest","f","catch","err","error","openShortcutEdit","getModuleFromPath","option","unlink","removeShortcut","updateShortcut","_panelitem","_panelitem2","Panel","_items","_outtimeout","_intimeout","createMenu","onMouseOver","onMouseOut","onMouseLeave","_clearTimeouts","attrs","ontop","autohide","from","relatedTarget","toElement","nodeName","getAttribute","multiple","offsetHeight","_widget","_widget2","WidgetDigitalClock","_Widget","color","ctx","txt","getHours","getMinutes","getSeconds","join","fontSize","round","font","textBaseline","fillStyle","_getSetting","measureText","clearRect","fillText","btn","_setSetting","hex","WidgetAnalogClock","radius","drawHand","beginPath","lineWidth","lineCap","moveTo","rotate","lineTo","stroke","arc","PI","fill","textAlign","ang","toString","hour","minute","second","_menu","PanelItemAppMenu","_PanelItem","img","alt","sel","showMenu","querySelector","inst","ApplicationMenu","clientX","clientY","$position","$parent","node","tagName","toLowerCase","prect","CategorizedApplicationMenu","createEvent","createDraggable","launch","clickEvent","getPackages","cfgCategories","cats","a","visible","cat","list","submenu","tooltip","onCreated","createEntry","createTextNode","querySelectorAll","PanelItemButtons","buttons","clearGhost","inner","ghost","lastTarget","createGhost","isUl","ul","insertBefore","renderButtons","counter","onEnter","newPosition","$index","moveButton","appName","createButton","systemButtons","applications","exit","clearButtons","removeButton","callback","system","addButton","to","pkg","getPackage","onStart","onEnd","_panelitemdialog","_panelitemdialog2","ExtendedDate","ClockSettingsDialog","_PanelDialog","parseInt","PanelItemClock","utc","interval","format","clockInterval","$clock","timeFmt","tooltipFmt","clock","t","clearInterval","setInterval","li","createInterval","PanelItemDialog","_Window","_closeCallback","_restartFix","NotificationAreaItem","$container","$image","onDestroy","_build","classNames","setImage","PanelItemNotificationArea","notifications","fix","createNotification","Hooks","Keycodes","SearchEngine","PanelItemSearch","$ul","$box","$input","$message","hookId","currentIndex","currentCount","input","guinput","keyEvents","DOWN","navigateDown","UP","navigateUp","ESC","ENTER","search","navigateOpen","addHook","keyCode","focus","removeHook","display","q","limit","recursive","renderResult","errors","application","child","children","updateSelection","Connection","PanelItemWeather","navigator","geolocation","getCurrentPosition","updateWeather","busy","setWeather","weather","main","temp","lat","coords","latitude","lon","longitude","url","request","response","WindowListEntry","span","_onWindowIconClick","peeking","_onDndEvent","focused","parentEl","_change","cn","els","getElementsByClassName","replace","getElementsByTagName","PanelItemWindowList","wins","getWindows","_properties","allow_windowlist","event"],"mappings":"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","file":"main.js","sourcesContent":["\n/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n * @preserve\n */\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _locales = __webpack_require__(1);\n\nvar _locales2 = _interopRequireDefault(_locales);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _ = OSjs.require('core/locales').createLocalizer(_locales2.default);\nvar Menu = OSjs.require('gui/menu');\nvar DOM = OSjs.require('utils/dom');\nvar Events = OSjs.require('utils/events');\nvar SettingsFragment = OSjs.require('helpers/settings-fragment');\nvar WindowManager = OSjs.require('core/window-manager');\n\nvar PanelItem = function () {\n  _createClass(PanelItem, null, [{\n    key: 'metadata',\n    value: function metadata() {\n      return {\n        name: 'PanelItem',\n        description: 'PanelItem Description',\n        icon: 'actions/stock_about.png',\n        hasoptions: false\n      };\n    }\n  }]);\n\n  function PanelItem(className, itemName, settings, defaults) {\n    _classCallCheck(this, PanelItem);\n\n    this._$root = null;\n    this._$container = null;\n    this._className = className || 'Unknown';\n    this._itemName = itemName || className.split(' ')[0];\n    this._settings = null;\n    this._settingsDialog = null;\n\n    if (settings && settings instanceof SettingsFragment && defaults) {\n      this._settings = settings.mergeDefaults(defaults);\n    }\n  }\n\n  _createClass(PanelItem, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      this._$root = document.createElement('corewm-panel-item');\n      this._$root.className = this._className;\n\n      this._$container = document.createElement('ul');\n      this._$container.setAttribute('role', 'toolbar');\n      this._$container.className = 'corewm-panel-buttons';\n\n      if (this._settings) {\n        var title = _('Open {0} Settings', _(this._itemName));\n        Events.$bind(this._$root, 'contextmenu', function (ev) {\n          ev.stopPropagation();\n          ev.preventDefault();\n\n          Menu.create([{\n            title: title,\n            onClick: function onClick() {\n              return _this.openSettings();\n            }\n          }], ev);\n        });\n      }\n\n      this._$root.appendChild(this._$container);\n\n      return this._$root;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this._settingsDialog) {\n        this._settingsDialog.destroy();\n      }\n\n      Events.$unbind(this._$root, 'contextmenu');\n\n      this._settingsDialog = null;\n      this._$root = DOM.$remove(this._$root);\n      this._$container = DOM.$remove(this._$container);\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings() {}\n  }, {\n    key: 'openSettings',\n    value: function openSettings(DialogRef, args) {\n      var _this2 = this;\n\n      if (this._settingsDialog) {\n        this._settingsDialog._restore();\n        return false;\n      }\n\n      var wm = WindowManager.instance;\n\n      if (DialogRef) {\n        this._settingsDialog = new DialogRef(this, wm._scheme, function (button) {\n          if (button === 'ok') {\n            _this2.applySettings();\n          }\n          _this2._settingsDialog = null;\n        });\n\n        wm.addWindow(this._settingsDialog, true);\n      }\n\n      return true;\n    }\n  }, {\n    key: 'getRoot',\n    value: function getRoot() {\n      return this._$root;\n    }\n  }]);\n\n  return PanelItem;\n}();\n\nexports.default = PanelItem;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexports.default = {\n  bg_BG: {\n    'Killing this process will stop things from working!': 'Прекратяването на този процес ще спре някой приложения!',\n    'Open settings': 'Отвори настойки',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Вашият панел няма обекти. Отидете в настойки за да върнете по подразбиране или да модифицирате ръчно\\n(Тази грешка може да се появи след актуализация на OS.js)',\n    'Create shortcut': 'Създай пряк път',\n    'Set as wallpaper': 'Направи изображение за фон',\n    'An error occured while creating PanelItem: {0}': 'Появи се грешка докато се създаваше панелен обект: {0}',\n\n    'Development': 'Разработка',\n    'Education': 'Образование',\n    'Games': 'Игри',\n    'Graphics': 'Графика',\n    'Network': 'Мрежа',\n    'Multimedia': 'Мултимедия',\n    'Office': 'Офис',\n    'System': 'Система',\n    'Utilities': 'Инструменти',\n    'Other': 'Други'\n  },\n  de_DE: {\n    'Killing this process will stop things from working!': 'Das Beenden dieses Prozesses wird Konsequenzen haben!',\n    'Open settings': 'Einstellungen öffnen',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Ihr Panel enthält keine Items. Öffnen Sie die Einstellungen um die Panel-Einstellungen zurückzusetzen oder manuell zu ändern (Dieser Fehler kann nach einem Upgrade von OS.js entstehen)',\n    'Create shortcut': 'Verknüpfung erstellen',\n    'Set as wallpaper': 'Als Hintergrund verwenden',\n    'An error occured while creating PanelItem: {0}': 'Während des Erstellens eines Panel-Items ist folgender Fehler aufgetreten: {0}',\n\n    'Development': 'Entwicklung',\n    'Education': 'Bildung',\n    'Games': 'Spiele',\n    'Graphics': 'Grafik',\n    'Network': 'Netzwerk',\n    'Multimedia': 'Multimedia',\n    'Office': 'Büro',\n    'System': 'System',\n    'Utilities': 'Zubehör',\n    'Other': 'Andere'\n  },\n  es_ES: {\n    'Killing this process will stop things from working!': '¡Forzar la terminación de este proceso hará que las cosas dejen de funcionar!',\n    'Open settings': 'Abrir preferencias',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Tu panel no tiene elementos. Restablece los valores por defecto en las preferencias, o modifícalo manualmente\\n(Este error puede aparecer tras una actualización de OS.js)',\n    'Create shortcut': 'Crear acceso directo',\n    'Set as wallpaper': 'Seleccionar como fondo de pantalla',\n    'An error occured while creating PanelItem: {0}': 'Se produjo un error al crear el PanelItem: {0}',\n\n    'Development': 'Desarrollo',\n    'Education': 'Educación',\n    'Games': 'Juegos',\n    'Graphics': 'Gráficos',\n    'Network': 'Red',\n    'Multimedia': 'Multimedia',\n    'Office': 'Ofimática',\n    'System': 'Sistema',\n    'Utilities': 'Herramientas',\n    'Other': 'Otros'\n  },\n  fr_FR: {\n    'Killing this process will stop things from working!': 'Tuer ce processus va arrêter d\\'autres éléments de fonctionner !',\n    'Open settings': 'Ouvrir les paramètres',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Votre panneau n\\'a aucun objet. Rendez-vous dans les paramètres pour remettre à zéro ou modifier manuellement\\n(Cette erreur peut survenir après avori mis à jour OS.js)',\n    'Create shortcut': 'Créer un raccourci',\n    'Set as wallpaper': 'Définir un fond d\\'écran',\n    'An error occured while creating PanelItem: {0}': 'Une erreur est survenue pendant la création du PanelItem: {0}',\n    'Show Icons': 'Afficher les icônes',\n    'Hide Icons': 'Cacher les icônes',\n\n    'Development': 'Développement',\n    'Education': 'Éducation',\n    'Games': 'Jeux',\n    'Graphics': 'Graphique',\n    'Network': 'Réseau',\n    'Multimedia': 'Multimédia',\n    'Office': 'Bureautique',\n    'System': 'Système',\n    'Utilities': 'Utilitaires',\n    'Other': 'Autre'\n  },\n  ar_DZ: {\n    'Killing this process will stop things from working!': 'إنهاء هذا البرنامج سيوقف الأشياء عن العمل',\n    'Open settings': 'فتح الإعدادات',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'لايوجد أي شيء في لوحتك، إذهب إلى إعدادات وقم بإستعادة الأشياء إلى الحالة الإفتراضية أو غيرها يدويا (يحدث هذا أحيانا عند تحديث الـ OS.js)',\n    'Create shortcut': 'إنشاء إختصار',\n    'Set as wallpaper': 'وضع كخلفية سطح المكتب',\n    'An error occured while creating PanelItem: {0}': 'حدث خطأ أثناء إنشاء عنصر في اللوحة: {0}',\n    'Show Icons': 'إظهار الأيقونات',\n    'Hide Icons': 'إخفاء الأيقونات',\n\n    'Development': 'تطوير',\n    'Education': 'تعليم',\n    'Games': 'ألعاب',\n    'Graphics': 'رسومات',\n    'Network': 'شبكة',\n    'Multimedia': 'تعدد الوسائط',\n    'Office': 'مكتبيات',\n    'System': 'نظام',\n    'Utilities': 'أدوات',\n    'Other': 'أخرى'\n  },\n  it_IT: {\n    'Killing this process will stop things from working!': 'Terminare questo processo bloccherà altre funzionalità!',\n    'Open settings': 'Apri settaggi',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Il tuo pannello non ha elementi. Vai nei settaggi per resettare ai valori predefiniti o modificarli manualmente\\n(Questo errore può accadere dopo un aggiornamento di OS.js)',\n    'Create shortcut': 'Crea colelgamento',\n    'Set as wallpaper': 'Imposta come sfondo desktop',\n    'An error occured while creating PanelItem: {0}': 'Si è verificato un errore nella creazione del PanelItem: {0}',\n    'Show Icons': 'Mostra icone',\n    'Hide Icons': 'Nascondi icone',\n\n    'Development': 'Sviluppo',\n    'Education': 'Educazione',\n    'Games': 'Giochi',\n    'Graphics': 'Grafica',\n    'Network': 'Reti',\n    'Multimedia': 'Multimedia',\n    'Office': 'Ufficio',\n    'System': 'Sistema',\n    'Utilities': 'Utilità',\n    'Other': 'Altro'\n  },\n  ko_KR: {\n    'Killing this process will stop things from working!': '이 프로세스를 종료 할 시 작업 중인 것들이 종료됩니다!',\n    'Open settings': '환경설정 열기',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': '패널에 항목이 없습니다. 환경설정에서 초기화하거나 직접 수정하여 주십시오.\\n(이 오류는 OS.js의 업그레이드 후 발생하는 문제일 수도 있습니다)',\n    'Create shortcut': '단축키 생성',\n    'Set as wallpaper': '바탕화면으로 지정',\n    'An error occured while creating PanelItem: {0}': '해당 패널 항목 생성 중 오류가 발생 하였습니다: {0}',\n\n    'Development': '개발',\n    'Education': '교육',\n    'Games': '게임',\n    'Graphics': '그래픽',\n    'Network': '네트워크',\n    'Multimedia': '멀티미디어',\n    'Office': '오피스',\n    'System': '시스템',\n    'Utilities': '유틸리티',\n    'Other': '기타'\n  },\n  nl_NL: {\n    'Killing this process will stop things from working!': 'Het stoppen van dit proces zal er voor zorgen dat dingen niet meer werken!',\n    'Open settings': 'Instellingen openen',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Het paneel bevat geen items. Ga naar instellingen om te herstellen naar de standaard of om handmatig te wijzigen\\n(Deze fout kan het gevolg zijn van een update van OS.js)',\n    'Create shortcut': 'Maak een link',\n    'Set as wallpaper': 'Als achtergrond gebruiken',\n    'An error occured while creating PanelItem: {0}': 'Er is een fout opgetreden tijdens het maken van paneel item: {0}',\n\n    'Development': 'Ontwikkeling',\n    'Education': 'Educatie',\n    'Games': 'Spellen',\n    'Graphics': 'Grafisch',\n    'Network': 'Netwerk',\n    'Multimedia': 'Multimedia',\n    'Office': 'Kantoor',\n    'System': 'Systeem',\n    'Utilities': 'Toebehoren',\n    'Other': 'Overig'\n  },\n  no_NO: {\n    'Killing this process will stop things from working!': 'Dreping av denne prosessen vil få konsekvenser!',\n    'Open settings': 'Åpne instillinger',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Ditt panel har ingen objekter. Gå til instillinger for å nullstille eller modifisere manuelt\\n(Denne feilen kan oppstå etter en oppdatering av OS.js)',\n    'Create shortcut': 'Lag snarvei',\n    'Set as wallpaper': 'Sett som bakgrunn',\n    'An error occured while creating PanelItem: {0}': 'En feil oppstod under lasting av PanelItem: {0}',\n    'Show Icons': 'Vis Ikoner',\n    'Hide Icons': 'Skjul Ikoner',\n    'Create in {0}': 'Opprett i {0}',\n\n    'Development': 'Utvikling',\n    'Education': 'Utdanning',\n    'Games': 'Spill',\n    'Graphics': 'Grafikk',\n    'Network': 'Nettverk',\n    'Multimedia': 'Multimedia',\n    'Office': 'Kontor',\n    'System': 'System',\n    'Utilities': 'Verktøy',\n    'Other': 'Andre'\n  },\n  pl_PL: {\n    'Killing this process will stop things from working!': 'Zabicie tego procesu zatrzyma wykonywanie działań!',\n    'Open settings': 'Otwórz ustawienia',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Twój panel nie ma elementów. Idź do ustawień aby przywrócić domyślne lub zmień ręcznie\\n(Ten błąd może wystąpić po aktualizacji OS.js)',\n    'Create shortcut': 'Utwórz skrót',\n    'Set as wallpaper': 'Ustaw jako tapetę',\n    'An error occured while creating PanelItem: {0}': 'Wystąpił błąd podczas tworzenia PanelItem: {0}',\n    'Show Icons': 'Pokaż Ikony',\n    'Hide Icons': 'Ukryj Ikony',\n\n    'Development': 'Development',\n    'Education': 'Edukacja',\n    'Games': 'Gry',\n    'Graphics': 'Graficzne',\n    'Network': 'Sieć',\n    'Multimedia': 'Multimedia',\n    'Office': 'Biuro',\n    'System': 'System',\n    'Utilities': 'Użytkowe',\n    'Other': 'Inne'\n  },\n  ru_RU: {\n    'Killing this process will stop things from working!': 'Завершение этого процесса остановит работу системы!',\n    'Open settings': 'Открыть настройки',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'На вашей панели отсутствуют элементы. Откройте настройки для сброса панели к начальному состоянию или ручной настройки\\n(Эта ошибка может произойти после обновления OS.js)',\n    'Create shortcut': 'Создать ярлык',\n    'Set as wallpaper': 'Установить как обои',\n    'An error occured while creating PanelItem: {0}': 'Произошла обшибка при создании PanelItem: {0}',\n\n    'Development': 'Разработка',\n    'Education': 'Образование',\n    'Games': 'Игры',\n    'Graphics': 'Графика',\n    'Network': 'Интернет',\n    'Multimedia': 'Мультимедиа',\n    'Office': 'Офис',\n    'System': 'Система',\n    'Utilities': 'Утилиты',\n    'Other': 'Другое'\n  },\n  sk_SK: {\n    'Open settings': 'Otvor nastavenia',\n    'Create shortcut': 'Vytvor linku',\n    'Set as wallpaper': 'Nastav ako tapetu',\n    'An error occured while creating PanelItem: {0}': 'Chyba pri vytváraní položky: {0}',\n\n    'Development': 'Vývoj',\n    'Education': 'Vzdelávanie',\n    'Games': 'Hry',\n    'Graphics': 'Grafika',\n    'Network': 'Sieť',\n    'Multimedia': 'Multimédiá',\n    'Office': 'Kancelária',\n    'System': 'Systém',\n    'Utilities': 'Pomôcky',\n    'Other': 'Ostatné'\n  },\n  tr_TR: {\n    'Open settings': 'Ayarları Aç',\n    'Create shortcut': 'Kısayol Oluştur',\n    'Set as wallpaper': 'Arkaplan olarak ayarla',\n    'An error occured while creating PanelItem: {0}': '{0} oluşturulurken bir hata meydana geldi',\n\n    'Development': 'Geliştirici',\n    'Education': 'Eğitim',\n    'Games': 'Oyunlar',\n    'Graphics': 'Grafikler',\n    'Network': 'Ağ',\n    'Multimedia': 'Multimedia',\n    'Office': 'Ofis',\n    'System': 'Sistem',\n    'Utilities': 'Yan Gereksinimler',\n    'Other': 'Diğer'\n  },\n  vi_VN: {\n    'Killing this process will stop things from working!': 'Đóng quá trình này sẽ làm mọi thứ bị tắt!',\n    'Open settings': 'Mở cài đặt',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Bảng điều khiển của bạn không có mục nào. Vào cài đặt để thiết lập lại mặc định hoặc sửa đổi bằng tay\\n(Lỗi này có thể xảy ra sau khi nâng cấp OS.js)',\n    'Create shortcut': 'Tạo lối tắt',\n    'Set as wallpaper': 'Đặt làm hình nền',\n    'An error occured while creating PanelItem: {0}': 'Có lỗi xảy ra trong khi tạo PanelItem: {0}',\n    'Show Icons': 'Hiện các biểu tượng',\n    'Hide Icons': 'Ẩn các biểu tượng',\n    'Create in {0}': 'Tạo trong {0}',\n\n    'Development': 'Phát triển',\n    'Education': 'Giáo dục',\n    'Games': 'Trò chơi',\n    'Graphics': 'Đồ họa',\n    'Network': 'Mạng',\n    'Multimedia': 'Đa phương tiện',\n    'Office': 'Văn phòng',\n    'System': 'Hệ thống',\n    'Utilities': 'Tiện ích',\n    'Other': 'Khác'\n  }\n\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar _locales = __webpack_require__(1);\n\nvar _locales2 = _interopRequireDefault(_locales);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _ = OSjs.require('core/locales').createLocalizer(_locales2.default);\nvar Menu = OSjs.require('gui/menu');\nvar DOM = OSjs.require('utils/dom');\nvar Utils = OSjs.require('utils/misc');\nvar Events = OSjs.require('utils/events');\nvar WindowManager = OSjs.require('core/window-manager');\n\n/////////////////////////////////////////////////////////////////////////////\n// DEFAULTS\n/////////////////////////////////////////////////////////////////////////////\n\nvar MIN_WIDTH = 64;\nvar MIN_HEIGHT = 64;\n\nvar TIMEOUT_SAVE = 500;\nvar TIMEOUT_SHOW_ENVELOPE = 3000;\nvar TIMEOUT_HIDE_ENVELOPE = 1000;\n\nvar DEFAULT_OPTIONS = {\n  aspect: false, // true for automatic aspect based on width\n  width: 100,\n  height: 100,\n  minWidth: MIN_WIDTH,\n  minHeight: MIN_HEIGHT,\n  maxHeight: 500,\n  maxWidth: 500,\n  left: 0,\n  right: null,\n  top: 0,\n  bottom: null,\n  locked: false,\n  canvas: false,\n  resizable: false,\n  viewBox: false, // x y w h or 'true'\n  frequency: 2, // FPS for canvas\n  custom: {\n    // Used for widget-spesific styles etc\n  },\n  settings: {\n    enabled: false,\n    name: 'CoreWMWidgetSettingsWindow',\n    title: _('LBL_SETTINGS'),\n    width: 300,\n    height: 300\n  }\n};\n\n/////////////////////////////////////////////////////////////////////////////\n// HELPERS\n/////////////////////////////////////////////////////////////////////////////\n\nfunction bindWidgetEvents(instance) {\n  var timeout = null;\n  var position = instance._getNormalizedPosition();\n  var dimension = instance._getDimension();\n  var start = { x: 0, y: 0 };\n\n  function _getDimensionAspected(dx, dy) {\n    if (instance._options.aspect === true) {\n      var width = dimension.width + dx;\n      var height = width / instance._aspect;\n      return { width: width, height: height };\n    }\n\n    return {\n      width: dimension.width + dx,\n      height: dimension.height + dy\n    };\n  }\n\n  function _mouseDown(ev, pos, action) {\n    ev.preventDefault();\n    if (instance._locked) {\n      return;\n    }\n\n    timeout = clearTimeout(timeout);\n    start = pos;\n    position = instance._getNormalizedPosition();\n    dimension = instance._getDimension();\n\n    Events.$bind(window, 'mousemove:modifywidget', function (ev, pos) {\n      var dx = pos.x - start.x;\n      var dy = pos.y - start.y;\n      var obj = action === 'move' ? {\n        left: position.left + dx,\n        top: position.top + dy\n      } : _getDimensionAspected(dx, dy);\n\n      instance._onMouseMove(ev, obj, action);\n    });\n\n    Events.$bind(window, 'mouseup:modifywidget', function (ev, pos) {\n      Events.$unbind(window, 'mousemove:modifywidget');\n      Events.$unbind(window, 'mouseup:modifywidget');\n\n      instance._onMouseUp(ev, pos, action);\n    });\n\n    instance._windowWidth = window.innerWidth;\n    instance._windowHeight = window.innerHeight;\n    instance._onMouseDown(ev, pos, action);\n  }\n\n  Events.$bind(instance._$element, 'mousedown:movewidget', function (ev, pos) {\n    _mouseDown(ev, pos, 'move');\n  });\n  Events.$bind(instance._$resize, 'mousedown:resizewidget', function (ev, pos) {\n    ev.stopPropagation();\n    _mouseDown(ev, pos, 'resize');\n  });\n\n  Events.$bind(instance._$element, 'click:showenvelope', function (ev) {\n    timeout = clearTimeout(timeout);\n    instance._showEnvelope();\n  });\n  Events.$bind(instance._$element, 'mouseover:showenvelope', function () {\n    timeout = clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      instance._showEnvelope();\n    }, TIMEOUT_SHOW_ENVELOPE);\n  });\n  Events.$bind(instance._$element, 'mouseout:hideenvelope', function (ev) {\n    timeout = clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      instance._hideEnvelope();\n    }, TIMEOUT_HIDE_ENVELOPE);\n  });\n\n  Events.$bind(instance._$element, 'contextmenu:widgetcontext', function (ev) {\n    instance._onContextMenu(ev);\n  });\n}\n\nfunction validNumber(num) {\n  if (typeof num !== 'undefined' && num !== null) {\n    return !isNaN(num);\n  }\n  return false;\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// WIDGET\n/////////////////////////////////////////////////////////////////////////////\n\nvar Widget = function () {\n  /**\n   * A CoreWM Widget\n   *\n   * TODO: Behave according to orientation\n   *\n   * @param   {String}             name      Widget Name\n   * @param   {Object}             options   Widget Options\n   * @param   {SettingsFragment}   settings  SettingsFragment instance\n   */\n  function Widget(name, options, settings) {\n    _classCallCheck(this, Widget);\n\n    options = Utils.mergeObject(Utils.cloneObject(DEFAULT_OPTIONS), options || {});\n\n    this._aspect = options.aspect === true ? options.width / options.height : typeof options.aspect === 'number' ? options.aspect : 1.0;\n    if (options.aspect !== false) {\n      options.minHeight = options.width / this._aspect;\n      options.maxHeight = options.maxWidth / this._aspect;\n    }\n\n    if (options.viewBox) {\n      options.resizable = true;\n      if (options.viewBox === true) {\n        options.viewBox = '0 0 ' + options.width + ' ' + options.height;\n      }\n    }\n\n    this._position = {\n      left: settings.get('left', options.left),\n      top: settings.get('top', options.top),\n      right: settings.get('right', options.right),\n      bottom: settings.get('bottom', options.bottom)\n    };\n\n    this._dimension = {\n      height: settings.get('height', options.height),\n      width: settings.get('width', options.width)\n    };\n\n    this._name = name;\n    this._settings = settings;\n    this._options = options;\n    this._isManipulating = false;\n    this._windowWidth = window.innerWidth;\n    this._windowHeight = window.innerHeight;\n    this._requestId = null;\n    this._saveTimeout = null;\n    this._settingsWindow = null;\n    this._locked = settings.get('locked', false);\n\n    this._$element = null;\n    this._$resize = null;\n    this._$canvas = null;\n    this._$context = null;\n\n    Utils.mergeObject(this._options.settings, settings.get('settings', {}));\n\n    console.debug('Widget::construct()', this._name, this._settings.get());\n  }\n\n  /**\n   * When Widget is initialized\n   *\n   * @param {Node}      root          The DOM Node to append Widget to\n   *\n   * @return {Node}                   The created DOM Node containing Widget\n   */\n\n\n  _createClass(Widget, [{\n    key: 'init',\n    value: function init(root) {\n      this._windowWidth = window.innerWidth;\n      this._windowHeight = window.innerHeight;\n      this._$element = document.createElement('corewm-widget');\n      this._$resize = document.createElement('corewm-widget-resize');\n\n      if (this._options.canvas) {\n        this._$canvas = document.createElement('canvas');\n\n        if (this._options.viewBox) {\n          this._$canvas.setAttribute('viewBox', this._options.viewBox);\n        }\n\n        this._$context = this._$canvas.getContext('2d');\n        this._$element.appendChild(this._$canvas);\n      }\n\n      bindWidgetEvents(this);\n\n      this._updatePosition();\n      this._updateDimension();\n      this._setLock(this._locked);\n\n      DOM.$addClass(this._$element, 'Widget' + this._name);\n      this._$element.appendChild(this._$resize);\n      root.appendChild(this._$element);\n\n      return this._$element;\n    }\n\n    /**\n     * When widget has been rendered to DOM and added in WindowManager\n     */\n\n  }, {\n    key: '_inited',\n    value: function _inited() {\n      var _this = this;\n\n      this.onInited();\n      this.onResize(this._dimension);\n\n      var fpsInterval, now, then, elapsed;\n\n      var animate = function animate() {\n        window.requestAnimationFrame(animate);\n\n        now = Date.now();\n        elapsed = now - then;\n\n        if (elapsed > fpsInterval) {\n          then = now - elapsed % fpsInterval;\n          _this.onRender();\n        }\n      };\n\n      if (this._$canvas) {\n        var fps = Math.min(this._options.frequency, 1);\n\n        this._requestId = window.requestAnimationFrame(function () {\n          fpsInterval = 1000 / fps;\n          then = Date.now();\n\n          animate();\n        });\n      }\n    }\n\n    /**\n     * When WindowManager requests destruction of Widget\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      Events.$unbind(window, 'mousemove:modifywidget');\n      Events.$unbind(window, 'mouseup:modifywidget');\n      Events.$unbind(this._$resize, 'mousedown:resizewidget');\n      Events.$unbind(this._$element, 'mousedown:movewidget');\n      Events.$unbind(this._$element, 'click:showenvelope');\n      Events.$unbind(this._$element, 'mouseover:showenvelope');\n      Events.$unbind(this._$element, 'mouseout:hideenvelope');\n      Events.$unbind(this._$element, 'contextmenu:widgetcontext');\n\n      this._saveTimeout = clearTimeout(this._saveTimeout);\n\n      if (this._requestId) {\n        window.cancelAnimationFrame(this._requestId);\n      }\n      this._requestId = null;\n\n      if (this._settingsWindow) {\n        this._settingsWindow.destroy();\n      }\n      this._settingsWindow = null;\n\n      this._$canvas = DOM.$remove(this._$canvas);\n      this._$resize = DOM.$remove(this._$resize);\n      this._$element = DOM.$remove(this._$element);\n      this._$context = null;\n    }\n\n    /**\n     * Blurs the widget if active\n     */\n\n  }, {\n    key: 'blur',\n    value: function blur() {}\n\n    /**\n     * When mouse is pressed\n     */\n\n  }, {\n    key: '_onMouseDown',\n    value: function _onMouseDown(ev, pos, action) {\n      this._saveTimeout = clearTimeout(this._saveTimeout);\n\n      DOM.$addClass(this._$element, 'corewm-widget-active');\n\n      // This temporarily sets the position to a normalized one\n      // to prevent resizing going in wrong direction\n      if (action === 'resize') {\n        var obj = this._getNormalizedPosition();\n        this._setPosition(obj);\n      }\n    }\n\n    /**\n     * When mouse is moved after pressing\n     */\n\n  }, {\n    key: '_onMouseMove',\n    value: function _onMouseMove(ev, obj, action) {\n      this._isManipulating = true;\n\n      if (action === 'move') {\n        this._setPosition(obj, true);\n        this.onMove(this._position);\n      } else {\n        this._setDimension(obj);\n        this.onResize(this._dimension);\n      }\n    }\n\n    /**\n     * When mouse has been released\n     */\n\n  }, {\n    key: '_onMouseUp',\n    value: function _onMouseUp(ev, pos, action) {\n      var _this2 = this;\n\n      this._isManipulating = false;\n      this._resizeTimeout = clearTimeout(this._resizeTimeout);\n\n      DOM.$removeClass(this._$element, 'corewm-widget-active');\n\n      this._hideEnvelope();\n\n      // This resets the position back to an absolute one\n      // after it was temporarily set in onMouseDown\n      if (action === 'resize') {\n        this._setPosition(null, true);\n      }\n\n      this._saveTimeout = clearTimeout(this._saveTimeout);\n      this._saveTimeout = setTimeout(function () {\n        _this2._saveOptions();\n      }, TIMEOUT_SAVE);\n    }\n\n    /**\n     * When right mouse button is pressed\n     */\n\n  }, {\n    key: '_onContextMenu',\n    value: function _onContextMenu(ev) {\n      var _this3 = this;\n\n      var c = this.onContextMenu(ev);\n\n      var menu = [{\n        title: this._locked ? _('LBL_UNLOCK') : _('LBL_LOCK'),\n        onClick: function onClick() {\n          _this3._setLock();\n          _this3._saveOptions();\n        }\n      }];\n\n      if (c !== true) {\n        if (c instanceof Array) {\n          menu = c.concat(menu);\n        }\n\n        if (this._options.settings.enabled) {\n          menu.push({\n            title: _('Open {0} Settings', _(this._name)),\n            onClick: function onClick(ev) {\n              _this3._openSettings(ev);\n            }\n          });\n        }\n      }\n\n      Menu.create(menu, ev);\n    }\n\n    /**\n     * Saves this Widgets options to CoreWM\n     */\n\n  }, {\n    key: '_saveOptions',\n    value: function _saveOptions(custom) {\n      if (typeof custom !== 'undefined') {\n        this._options.settings.tree = custom;\n      }\n\n      var opts = {\n        width: this._dimension.width,\n        height: this._dimension.height,\n        right: this._position.right,\n        left: validNumber(this._position.right) ? null : this._position.left,\n        bottom: this._position.bottom,\n        top: validNumber(this._position.bottom) ? null : this._position.top,\n        locked: this._locked,\n        settings: {\n          tree: this._options.settings.tree\n        }\n      };\n\n      this._settings.set(null, opts, true);\n    }\n\n    /**\n     * Show settings dialog\n     */\n\n  }, {\n    key: '_openSettings',\n    value: function _openSettings(ev) {\n      var _this4 = this;\n\n      if (this._settingsWindow) {\n        this._settingsWindow._focus();\n        return;\n      }\n\n      var wm = WindowManager.instance;\n      var win = new Window(this._options.settings.name, {\n        title: this._options.settings.title,\n        width: this._options.settings.width,\n        height: this._options.settings.height\n      }, null, wm._scheme);\n\n      win._on('init', function (root, scheme) {\n        var opts = _this4.onOpenSettings(root, scheme, ev);\n\n        win._render(opts.id);\n\n        win._find('ButtonOK').on('click', function () {\n          var settings = opts.save(root, scheme, ev);\n          _this4._saveOptions(settings);\n        });\n\n        opts.render(root, scheme, ev);\n      });\n\n      win._on('close', function () {\n        _this4._settingsWindow = null;\n      });\n\n      this._settingsWindow = wm.addWindow(win, true);\n    }\n\n    /**\n     * Show the envelope containing this Widget\n     */\n\n  }, {\n    key: '_showEnvelope',\n    value: function _showEnvelope() {\n      if (!this._$element) {\n        return;\n      }\n      DOM.$addClass(this._$element, 'corewm-widget-envelope');\n    }\n\n    /**\n     * Hide the envelope containing this Widget\n     */\n\n  }, {\n    key: '_hideEnvelope',\n    value: function _hideEnvelope() {\n      if (!this._$element || this._isManipulating) {\n        return;\n      }\n      DOM.$removeClass(this._$element, 'corewm-widget-envelope');\n    }\n\n    /**\n     * Sets the position and correctly aligns it to the DOM (sticking)\n     */\n\n  }, {\n    key: '_setPosition',\n    value: function _setPosition(obj, stick) {\n      obj = obj || Utils.cloneObject(this._position);\n\n      this._position.top = obj.top;\n      this._position.left = obj.left;\n      this._position.bottom = null;\n      this._position.right = null;\n\n      if (stick) {\n        if (this._isPastHalf('vertical', obj)) {\n          this._position.top = null;\n          this._position.bottom = this._windowHeight - this._dimension.height - obj.top;\n        }\n\n        if (this._isPastHalf('horizontal', obj)) {\n          this._position.left = null;\n          this._position.right = this._windowWidth - this._dimension.width - obj.left;\n        }\n      }\n\n      this._updatePosition();\n    }\n\n    /**\n     * Sets the dimension of the widget\n     */\n\n  }, {\n    key: '_setDimension',\n    value: function _setDimension(obj) {\n      var o = this._options;\n      var w = Math.min(Math.max(obj.width, o.minWidth), o.maxWidth);\n      var h = Math.min(Math.max(obj.height, o.minHeight), o.maxHeight);\n      if (this._options.aspect === true) {\n        h = w / this._aspect;\n      }\n\n      this._dimension.width = w;\n      this._dimension.height = h;\n\n      this._updateDimension();\n    }\n\n    /**\n     * Lock widget (make unmoveable)\n     */\n\n  }, {\n    key: '_setLock',\n    value: function _setLock(l) {\n      if (typeof l !== 'boolean') {\n        l = !this._locked;\n      }\n      this._locked = l;\n\n      if (this._$element) {\n        this._$element.setAttribute('data-locked', String(this._locked));\n      }\n    }\n\n    /**\n     * Updates the Widgets position based on internal options\n     */\n\n  }, {\n    key: '_updatePosition',\n    value: function _updatePosition() {\n      if (this._$element) {\n        if (validNumber(this._position.right)) {\n          this._$element.style.left = 'auto';\n          this._$element.style.right = String(this._position.right) + 'px';\n        } else {\n          this._$element.style.left = String(this._position.left) + 'px';\n          this._$element.style.right = 'auto';\n        }\n\n        if (validNumber(this._position.bottom)) {\n          this._$element.style.top = 'auto';\n          this._$element.style.bottom = String(this._position.bottom) + 'px';\n        } else {\n          this._$element.style.top = String(this._position.top) + 'px';\n          this._$element.style.bottom = 'auto';\n        }\n      }\n    }\n\n    /**\n     * Updates the Widgets dimensions based on internal options\n     */\n\n  }, {\n    key: '_updateDimension',\n    value: function _updateDimension() {\n      if (this._$element) {\n        this._$element.style.width = String(this._dimension.width) + 'px';\n        this._$element.style.height = String(this._dimension.height) + 'px';\n      }\n\n      if (this._$canvas) {\n        this._$canvas.width = this._dimension.width || MIN_WIDTH;\n        this._$canvas.height = this._dimension.height || MIN_HEIGHT;\n      }\n    }\n\n    /**\n     * Gets the position of the Widget\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: '_getNormalizedPosition',\n    value: function _getNormalizedPosition() {\n      var left = this._position.left;\n      if (validNumber(this._position.right)) {\n        left = this._windowWidth - this._position.right - this._dimension.width;\n      }\n\n      var top = this._position.top;\n      if (validNumber(this._position.bottom)) {\n        top = this._windowHeight - this._position.bottom - this._dimension.height;\n      }\n\n      return { left: left, top: top };\n    }\n\n    /**\n     * Gets the dimensions\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: '_getDimension',\n    value: function _getDimension() {\n      return {\n        width: this._dimension.width,\n        height: this._dimension.height\n      };\n    }\n\n    /**\n     * Gets the position\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: '_getPosition',\n    value: function _getPosition() {\n      return {\n        left: this._position.left,\n        top: this._position.top,\n        right: this._position.right,\n        bottom: this._position.bottom\n      };\n    }\n\n    /**\n     * Sets a setting\n     */\n\n  }, {\n    key: '_setSetting',\n    value: function _setSetting(k, v, save) {\n      this._options.settings.tree[k] = v;\n      if (save) {\n        this._saveOptions();\n      }\n    }\n\n    /**\n     * Gets a setting\n     */\n\n  }, {\n    key: '_getSetting',\n    value: function _getSetting(k, def) {\n      if (typeof this._options.settings === 'undefined' || typeof this._options.settings.tree === 'undefined') {\n        return def;\n      }\n\n      var value = this._options.settings.tree[k];\n      return typeof value === 'undefined' ? def : value;\n    }\n\n    /**\n     * Check if widget has passed the middle of screen in\n     * given direction\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: '_isPastHalf',\n    value: function _isPastHalf(dir, obj) {\n      obj = obj || this._position;\n\n      var hleft = this._windowWidth / 2;\n      var aleft = obj.left + this._dimension.width / 2;\n      if (dir === 'horizontal') {\n        return aleft >= hleft;\n      }\n\n      var htop = this._windowHeight / 2;\n      var atop = obj.top + this._dimension.height / 2;\n      return atop >= htop;\n    }\n\n    /**\n     * When Widget is being moved\n     */\n\n  }, {\n    key: 'onMove',\n    value: function onMove() {}\n    // Implement in your widget\n\n\n    /**\n     * When Widget is being resized\n     */\n\n  }, {\n    key: 'onResize',\n    value: function onResize() {}\n    // Implement in your widget\n\n\n    /**\n     * When Widget is being rendered\n     */\n\n  }, {\n    key: 'onRender',\n    value: function onRender() {}\n    // Implement in your widget\n\n\n    /**\n     * When Widget has been initialized\n     */\n\n  }, {\n    key: 'onInited',\n    value: function onInited() {}\n    // Implement in your widget\n\n\n    /**\n     * When Widget opens contextmenu\n     */\n\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(ev) {}\n    // Implement in your widget.\n    // You can return true to prevent default context action.\n    // Or an array of elements to append to the default menu.\n\n\n    /**\n     * When Widget Settings dialog shows\n     */\n\n  }, {\n    key: 'onOpenSettings',\n    value: function onOpenSettings(root, scheme, ev) {\n      // Implement in your widget.\n      return {\n        id: null,\n        save: function save() {\n          return {};\n        },\n        render: function render() {}\n      };\n    }\n  }]);\n\n  return Widget;\n}();\n\nexports.default = Widget;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(4);\nmodule.exports = __webpack_require__(20);\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _locales = __webpack_require__(1);\n\nvar _locales2 = _interopRequireDefault(_locales);\n\nvar _windowswitcher = __webpack_require__(5);\n\nvar _windowswitcher2 = _interopRequireDefault(_windowswitcher);\n\nvar _iconview = __webpack_require__(6);\n\nvar _iconview2 = _interopRequireDefault(_iconview);\n\nvar _panel = __webpack_require__(7);\n\nvar _panel2 = _interopRequireDefault(_panel);\n\nvar _digitalclock = __webpack_require__(8);\n\nvar _digitalclock2 = _interopRequireDefault(_digitalclock);\n\nvar _analogclock = __webpack_require__(9);\n\nvar _analogclock2 = _interopRequireDefault(_analogclock);\n\nvar _appmenu = __webpack_require__(10);\n\nvar _appmenu2 = _interopRequireDefault(_appmenu);\n\nvar _buttons = __webpack_require__(12);\n\nvar _buttons2 = _interopRequireDefault(_buttons);\n\nvar _clock = __webpack_require__(13);\n\nvar _clock2 = _interopRequireDefault(_clock);\n\nvar _notificationarea = __webpack_require__(15);\n\nvar _notificationarea2 = _interopRequireDefault(_notificationarea);\n\nvar _search = __webpack_require__(16);\n\nvar _search2 = _interopRequireDefault(_search);\n\nvar _weather = __webpack_require__(17);\n\nvar _weather2 = _interopRequireDefault(_weather);\n\nvar _windowlist = __webpack_require__(18);\n\nvar _windowlist2 = _interopRequireDefault(_windowlist);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Menu = OSjs.require('gui/menu');\nvar Locales = OSjs.require('core/locales');\nvar GUIScheme = OSjs.require('gui/scheme');\nvar Config = OSjs.require('core/config');\nvar Authenticator = OSjs.require('core/authenticator');\nvar Application = OSjs.require('core/application');\nvar PackageManager = OSjs.require('core/package-manager');\nvar WindowManager = OSjs.require('core/window-manager');\nvar SettingsFragment = OSjs.require('helpers/settings-fragment');\nvar SettingsManager = OSjs.require('core/settings-manager');\nvar Events = OSjs.require('utils/events');\nvar Compability = OSjs.require('utils/compability');\nvar FileMetadata = OSjs.require('vfs/file');\nvar Notification = OSjs.require('gui/notification');\nvar Theme = OSjs.require('core/theme');\nvar DOM = OSjs.require('utils/dom');\nvar Utils = OSjs.require('utils/misc');\nvar Init = OSjs.require('core/init');\nvar GUI = OSjs.require('utils/gui');\nvar VFS = OSjs.require('vfs/fs');\nvar FS = OSjs.require('utils/fs');\nvar ServiceNotificationIcon = OSjs.require('helpers/service-notification-icon');\n\n/*eslint valid-jsdoc: \"off\"*/\n\nvar PADDING_PANEL_AUTOHIDE = 10; // FIXME: Replace with a constant ?!\n\nfunction defaultSettings(defaults) {\n  var compability = Compability.getCompability();\n\n  var cfg = {\n    animations: compability.css.animation,\n    useTouchMenu: compability.touch\n  };\n\n  if (defaults) {\n    cfg = Utils.mergeObject(cfg, defaults);\n  }\n\n  return cfg;\n}\n\nvar translate = Locales.createLocalizer(_locales2.default);\n\n/////////////////////////////////////////////////////////////////////////////\n// APPLICATION\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * Application\n */\n\nvar CoreWM = function (_WindowManager) {\n  _inherits(CoreWM, _WindowManager);\n\n  function CoreWM(args, metadata) {\n    _classCallCheck(this, CoreWM);\n\n    var importSettings = args.defaults || {};\n\n    var _this = _possibleConstructorReturn(this, (CoreWM.__proto__ || Object.getPrototypeOf(CoreWM)).call(this, 'CoreWM', args, metadata, defaultSettings(importSettings)));\n\n    _this.panels = [];\n    _this.widgets = [];\n    _this.switcher = null;\n    _this.iconView = null;\n    _this.importedSettings = Utils.mergeObject(Config.getConfig('SettingsManager.CoreWM'), importSettings);\n    _this._scheme = GUIScheme.fromString(__webpack_require__(19));\n\n    _this.generatedHotkeyMap = {};\n\n    function _winGenericHotkey(ev, win, wm, hotkey) {\n      if (win) {\n        win._onKeyEvent(ev, 'keydown', hotkey);\n      }\n    }\n    _this.hotkeyMap = {\n      SEARCH: function SEARCH(ev, win, wm) {\n        if (wm) {\n          var panel = wm.getPanel();\n          if (panel) {\n            var pitem = panel.getItemByType(OSjs.Applications.CoreWM.PanelItems.Search);\n            if (pitem) {\n              ev.preventDefault();\n              pitem.show();\n            }\n          }\n        }\n      },\n      SWITCHER: function SWITCHER(ev, win, wm) {\n        if (wm.getSetting('enableSwitcher') && wm.switcher) {\n          wm.switcher.show(ev, win, wm);\n        }\n      },\n      WINDOW_MINIMIZE: function WINDOW_MINIMIZE(ev, win) {\n        if (win) {\n          win._minimize();\n        }\n      },\n      WINDOW_MAXIMIZE: function WINDOW_MAXIMIZE(ev, win) {\n        if (win) {\n          win._maximize();\n        }\n      },\n      WINDOW_RESTORE: function WINDOW_RESTORE(ev, win) {\n        if (win) {\n          win._restore();\n        }\n      },\n      WINDOW_MOVE_LEFT: function WINDOW_MOVE_LEFT(ev, win) {\n        if (win) {\n          win._moveTo('left');\n        }\n      },\n      WINDOW_MOVE_RIGHT: function WINDOW_MOVE_RIGHT(ev, win) {\n        if (win) {\n          win._moveTo('right');\n        }\n      },\n      WINDOW_MOVE_UP: function WINDOW_MOVE_UP(ev, win) {\n        if (win) {\n          win._moveTo('top');\n        }\n      },\n      WINDOW_MOVE_DOWN: function WINDOW_MOVE_DOWN(ev, win) {\n        if (win) {\n          win._moveTo('bottom');\n        }\n      },\n      SAVE: _winGenericHotkey,\n      SAVEAS: _winGenericHotkey,\n      OPEN: _winGenericHotkey\n    };\n\n    Theme.update(_this.importedSettings);\n    return _this;\n  }\n\n  _createClass(CoreWM, [{\n    key: 'setup',\n    value: function setup() {\n      var _this2 = this;\n\n      var initNotifications = function initNotifications() {\n        ServiceNotificationIcon.init();\n\n        var user = Authenticator.instance.getUser();\n\n        var displayMenu = function displayMenu(ev) {\n          Menu.create([{\n            title: Locales._('TITLE_SIGN_OUT'),\n            onClick: function onClick() {\n              Init.logout();\n            }\n          }], ev);\n\n          return false;\n        };\n\n        var toggleFullscreen = function toggleFullscreen() {\n          var docElm = document.documentElement;\n          var notif = Notification.getIcon('_FullscreenNotification');\n          if (notif) {\n            _this2.toggleFullscreen(notif.opts._isFullscreen ? document : docElm, !notif.opts._isFullscreen);\n          }\n        };\n\n        var displayDevMenu = function displayDevMenu(ev) {\n          var don = DOM.$hasClass(document.body, 'debug');\n          var apps = Application.getProcesses().filter(function (iter) {\n            return iter !== null && iter instanceof Application;\n          }).map(function (iter) {\n            return {\n              title: iter.__label + ' (pid:' + iter.__pid + ')',\n              onClick: function onClick() {\n                Application.reload(iter.__pid);\n              }\n            };\n          });\n\n          var mnu = [{\n            title: don ? 'Turn off debug overlay' : 'Turn on debug overlay',\n            onClick: function onClick() {\n              if (don) {\n                DOM.$removeClass(document.body, 'debug');\n              } else {\n                DOM.$addClass(document.body, 'debug');\n              }\n            }\n          }, {\n            title: 'Reload manifest',\n            onClick: function onClick() {\n              PackageManager.init();\n            }\n          }, {\n            title: 'Reload running application',\n            menu: apps\n          }];\n\n          Menu.create(mnu, ev);\n        };\n\n        if (Config.getConfig('Debug')) {\n          Notification.createIcon('_DeveloperNotification', {\n            icon: Theme.getIcon('categories/applications-development.png', '16x16'),\n            title: 'Developer Tools',\n            onContextMenu: displayDevMenu,\n            onClick: displayDevMenu\n          });\n        }\n\n        if (_this2.getSetting('fullscreen')) {\n          Notification.createIcon('_FullscreenNotification', {\n            icon: Theme.getIcon('actions/view-fullscreen.png', '16x16'),\n            title: 'Enter fullscreen',\n            onClick: toggleFullscreen,\n            _isFullscreen: false\n          });\n        }\n\n        Notification.createIcon('_HandlerUserNotification', {\n          icon: Theme.getIcon('status/avatar-default.png', '16x16'),\n          title: Locales._('TITLE_SIGNED_IN_AS_FMT', user.username),\n          onContextMenu: displayMenu,\n          onClick: displayMenu\n        });\n      };\n\n      this.applySettings(this._settings.get());\n\n      try {\n        VFS.watch(new FileMetadata(this.getSetting('desktopPath'), 'dir'), function (msg, obj) {\n          if (!obj || msg.match(/^vfs:(un)?mount/)) {\n            return;\n          }\n\n          if (_this2.iconView) {\n            _this2.iconView._refresh();\n          }\n        });\n      } catch (e) {\n        console.warn('Failed to apply CoreWM VFS watch', e, e.stack);\n      }\n\n      this.initSwitcher();\n      this.initDesktop();\n      this.initPanels();\n      this.initWidgets();\n      this.initIconView();\n\n      initNotifications();\n\n      return Promise.resolve();\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy(force) {\n      if (!force && !window.confirm(translate('Killing this process will stop things from working!'))) {\n        return false;\n      }\n\n      ServiceNotificationIcon.destroy();\n\n      try {\n        Events.$unbind(document.body, 'dragenter, dragleave, dragover, drop');\n\n        Notification.destroyIcon('_HandlerUserNotification');\n\n        if (this.iconView) {\n          this.iconView.destroy();\n        }\n        if (this.switcher) {\n          this.switcher.destroy();\n        }\n\n        // Reset\n        this.destroyPanels();\n        this.destroyWidgets();\n\n        var settings = this.importedSettings;\n        try {\n          settings.background = 'color';\n        } catch (e) {}\n\n        //this.applySettings(defaultSettings(settings), true);\n      } catch (e) {\n        console.warn(e);\n        return false;\n      }\n\n      // Clear DOM\n      this.switcher = null;\n      this.iconView = null;\n\n      return _get(CoreWM.prototype.__proto__ || Object.getPrototypeOf(CoreWM.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }, {\n    key: 'destroyPanels',\n    value: function destroyPanels() {\n      this.panels.forEach(function (p) {\n        p.destroy();\n      });\n      this.panels = [];\n    }\n  }, {\n    key: 'destroyWidgets',\n    value: function destroyWidgets() {\n      this.widgets.forEach(function (w) {\n        w.destroy();\n      });\n      this.widgets = [];\n    }\n\n    //\n    // Initialization\n    //\n\n  }, {\n    key: 'initSwitcher',\n    value: function initSwitcher() {\n      this.switcher = new _windowswitcher2.default();\n    }\n  }, {\n    key: 'initDesktop',\n    value: function initDesktop() {\n      var _this3 = this;\n\n      // Enable dropping of new wallpaper if no iconview is enabled\n      GUI.createDroppable(document.body, {\n        onOver: function onOver(ev, el, args) {\n          return _this3.onDropOver(ev, el, args);\n        },\n        onLeave: function onLeave() {\n          return _this3.onDropLeave();\n        },\n        onDrop: function onDrop() {\n          return _this3.onDrop();\n        },\n        onItemDropped: function onItemDropped(ev, el, item, args) {\n          return _this3.onDropItem(ev, el, item, args);\n        },\n        onFilesDropped: function onFilesDropped(ev, el, files, args) {\n          return _this3.onDropFile(ev, el, files, args);\n        }\n      });\n    }\n  }, {\n    key: 'initPanels',\n    value: function initPanels(applySettings) {\n      var _this4 = this;\n\n      var ps = this.getSetting('panels');\n      var added = false;\n\n      if (ps === false) {\n        added = true;\n      } else {\n        this.destroyPanels();\n\n        (ps || []).forEach(function (storedItem) {\n          if (!storedItem.options) {\n            storedItem.options = {};\n          }\n\n          var panelSettings = new SettingsFragment(storedItem.options, 'CoreWM', SettingsManager);\n          var p = new _panel2.default('Default', panelSettings, _this4);\n          p.init(document.body);\n\n          (storedItem.items || []).forEach(function (iter) {\n            try {\n              if (typeof iter.settings === 'undefined' || iter.settings === null) {\n                iter.settings = {};\n              }\n\n              var itemSettings = {};\n              try {\n                itemSettings = new SettingsFragment(iter.settings, 'CoreWM', SettingsManager);\n              } catch (ex) {\n                console.warn('An error occured while loading PanelItem settings', ex);\n                console.warn('stack', ex.stack);\n              }\n\n              p.addItem(new OSjs.Applications.CoreWM.PanelItems[iter.name](itemSettings));\n              added = true;\n            } catch (e) {\n              console.warn('An error occured while creating PanelItem', e);\n              console.warn('stack', e.stack);\n\n              Notification.create({\n                icon: Theme.getIcon('status/dialog-warning.png', '32x32'),\n                title: 'CoreWM',\n                message: translate('An error occured while creating PanelItem: {0}', e)\n              });\n            }\n          });\n\n          _this4.panels.push(p);\n        });\n      }\n\n      if (!added) {\n        Notification.create({\n          timeout: 0,\n          icon: Theme.getIcon('status/dialog-warning.png', '32x32'),\n          title: 'CoreWM',\n          message: translate('Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)')\n        });\n      }\n\n      if (applySettings) {\n        // Workaround for windows appearing behind panel\n        var p = this.panels[0];\n        if (p && p.getOntop() && p.getPosition('top')) {\n          setTimeout(function () {\n            var space = _this4.getWindowSpace();\n            _this4._windows.forEach(function (iter) {\n              if (iter && iter._position.y < space.top) {\n                console.warn('CoreWM::initPanels()', 'I moved this window because it overlapped with a panel!', iter);\n                iter._move(iter._position.x, space.top);\n              }\n            });\n          }, 800);\n        }\n\n        if (this.iconView) {\n          this.iconView.resize(this);\n        }\n      }\n\n      setTimeout(function () {\n        _this4.setStyles(_this4._settings.get());\n      }, 250);\n    }\n  }, {\n    key: 'initWidgets',\n    value: function initWidgets(applySettings) {\n      var _this5 = this;\n\n      this.destroyWidgets();\n\n      var widgets = this.getSetting('widgets');\n\n      (widgets || []).forEach(function (item) {\n        if (!item.settings) {\n          item.settings = {};\n        }\n\n        var settings = new SettingsFragment(item.settings, 'CoreWM', SettingsManager);\n\n        try {\n          var w = new OSjs.Applications.CoreWM.Widgets[item.name](settings);\n          w.init(document.body);\n          _this5.widgets.push(w);\n\n          w._inited();\n        } catch (e) {\n          console.warn('CoreWM::initWidgets()', e, e.stack);\n        }\n      });\n    }\n  }, {\n    key: 'initIconView',\n    value: function initIconView() {\n      var _this6 = this;\n\n      var en = this.getSetting('enableIconView');\n      if (!en && this.iconView) {\n        this.iconView.destroy();\n        this.iconView = null;\n        return;\n      }\n\n      if (en && !this.iconView) {\n        this.iconView = new _iconview2.default(this);\n        document.body.appendChild(this.iconView.getRoot());\n      }\n\n      setTimeout(function () {\n        if (_this6.iconView) {\n          _this6.iconView.resize(_this6);\n        }\n      }, 280);\n    }\n\n    //\n    // Events\n    //\n\n  }, {\n    key: 'resize',\n    value: function resize(ev, rect, wasInited) {\n      _get(CoreWM.prototype.__proto__ || Object.getPrototypeOf(CoreWM.prototype), 'resize', this).apply(this, arguments);\n\n      var space = this.getWindowSpace();\n      var margin = this.getSetting('desktopMargin');\n      var windows = this._windows;\n\n      function moveIntoView() {\n        var i = 0,\n            l = windows.length,\n            iter = void 0,\n            wrect = void 0;\n        var mx = void 0,\n            my = void 0,\n            moved = void 0;\n\n        for (i; i < l; i++) {\n          iter = windows[i];\n          if (!iter) {\n            continue;\n          }\n          wrect = iter._getViewRect();\n          if (wrect === null || iter._state.mimimized) {\n            continue;\n          }\n\n          // Move the window into view if outside of view\n          mx = iter._position.x;\n          my = iter._position.y;\n          moved = false;\n\n          if (wrect.left + margin > rect.width) {\n            mx = space.width - iter._dimension.w;\n            moved = true;\n          }\n          if (wrect.top + margin > rect.height) {\n            my = space.height - iter._dimension.h;\n            moved = true;\n          }\n\n          if (moved) {\n            if (mx < space.left) {\n              mx = space.left;\n            }\n            if (my < space.top) {\n              my = space.top;\n            }\n            iter._move(mx, my);\n          }\n\n          // Restore maximized windows (FIXME: Better solution?)\n          if (iter._state.maximized && (wasInited ? iter._restored : true)) {\n            iter._restore(true, false);\n          }\n        }\n      }\n\n      if (!this._isResponsive) {\n        if (this.getSetting('moveOnResize')) {\n          moveIntoView();\n        }\n      }\n    }\n  }, {\n    key: 'onDropLeave',\n    value: function onDropLeave() {\n      document.body.setAttribute('data-attention', 'false');\n    }\n  }, {\n    key: 'onDropOver',\n    value: function onDropOver() {\n      document.body.setAttribute('data-attention', 'true');\n    }\n  }, {\n    key: 'onDrop',\n    value: function onDrop() {\n      document.body.setAttribute('data-attention', 'false');\n    }\n  }, {\n    key: 'onDropItem',\n    value: function onDropItem(ev, el, item, args) {\n      var _this7 = this;\n\n      document.body.setAttribute('data-attention', 'false');\n\n      var _applyWallpaper = function _applyWallpaper(data) {\n        _this7.applySettings({ wallpaper: data.path }, false, true);\n      };\n\n      var _createShortcut = function _createShortcut(data) {\n        if (_this7.iconView) {\n          _this7.iconView.addShortcut(data, _this7, true);\n        }\n      };\n\n      var _openMenu = function _openMenu(data) {\n        Menu.create([{\n          title: translate('LBL_COPY'),\n          onClick: function onClick() {\n            var dst = FS.pathJoin(_this7.getSetting('desktopPath'), data.filename);\n            VFS.copy(data, dst);\n          }\n          /*}, {\n            title: translate('Create shortcut'),\n            onClick: () => {\n              _createShortcut.call(this, data);\n            }\n            */\n        }, {\n          title: translate('Set as wallpaper'),\n          onClick: function onClick() {\n            _applyWallpaper(data);\n          }\n        }], ev);\n      };\n\n      if (item) {\n        var data = item.data;\n        if (item.type === 'file') {\n          if (data && data.mime) {\n            if (data.mime.match(/^image/)) {\n              if (this.iconView) {\n                _openMenu(data);\n              } else {\n                _applyWallpaper(data);\n              }\n            } else {\n              _createShortcut(data);\n            }\n          }\n        } else if (item.type === 'application') {\n          _createShortcut(data);\n        }\n      }\n    }\n  }, {\n    key: 'onDropFile',\n    value: function onDropFile(ev, el, files, args) {\n      VFS.upload({\n        destination: 'desktop:///',\n        files: files\n      });\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(ev) {\n      if (ev.target === document.body) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        this.openDesktopMenu(ev);\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: 'onKeyUp',\n    value: function onKeyUp(ev, win) {\n      if (!ev) {\n        return;\n      }\n\n      if (!ev.altKey) {\n        if (this.switcher) {\n          this.switcher.hide(ev, win, this);\n        }\n      }\n    }\n  }, {\n    key: 'onKeyDown',\n    value: function onKeyDown(ev, win) {\n      var _this8 = this;\n\n      var combination = false;\n\n      if (ev) {\n        var map = this.generatedHotkeyMap;\n        Object.keys(map).some(function (i) {\n          if (Events.keyCombination(ev, i)) {\n            map[i](ev, win, _this8);\n            combination = i;\n            return true;\n          }\n          return false;\n        });\n      }\n      return combination;\n    }\n  }, {\n    key: 'showSettings',\n    value: function showSettings(category) {\n      Application.create('ApplicationSettings', { category: category });\n    }\n  }, {\n    key: 'eventWindow',\n    value: function eventWindow(ev, win) {\n      // Make sure panel items are updated correctly\n      // FIXME: This is not compatible with other PanelItems\n\n      this.panels.forEach(function (panel) {\n        if (panel) {\n          var panelItem = panel.getItem(OSjs.Applications.CoreWM.PanelItems.WindowList);\n          if (panelItem) {\n            panelItem.update(ev, win);\n          }\n        }\n      });\n\n      // Unfocus IconView if we focus a window\n      if (ev === 'focus') {\n        if (this.iconView) {\n          this.iconView.blur();\n          this.widgets.forEach(function (w) {\n            w.blur();\n          });\n        }\n      }\n    }\n  }, {\n    key: 'getNotificationArea',\n    value: function getNotificationArea() {\n      var panelId = 0; // FIXME\n      var panel = this.panels[panelId];\n      if (panel) {\n        return panel.getItem(OSjs.Applications.CoreWM.PanelItems.NotificationArea);\n      }\n      return null;\n    }\n  }, {\n    key: '_getContextMenu',\n    value: function _getContextMenu(arg) {\n      var _this9 = this;\n\n      var menu = [];\n\n      if (this.iconView) {\n        menu = this.iconView._getContextMenu(arg);\n      }\n\n      menu.push({\n        title: translate('Open settings'),\n        onClick: function onClick() {\n          return _this9.showSettings();\n        }\n      });\n\n      if (this.getSetting('enableIconView') === true) {\n        menu.push({\n          title: translate('Hide Icons'),\n          onClick: function onClick(ev) {\n            _this9.applySettings({ enableIconView: false }, false, true);\n          }\n        });\n      } else {\n        menu.push({\n          title: translate('Show Icons'),\n          onClick: function onClick(ev) {\n            _this9.applySettings({ enableIconView: true }, false, true);\n          }\n        });\n      }\n\n      return menu;\n    }\n  }, {\n    key: 'openDesktopMenu',\n    value: function openDesktopMenu(ev) {\n      if (this._emit('wm:contextmenu', [ev, this]) === false) {\n        return;\n      }\n\n      var menu = this._getContextMenu();\n      Menu.create(menu, ev);\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings(settings, force, save, triggerWatch) {\n      var _this10 = this;\n\n      console.group('CoreWM::applySettings()');\n\n      settings = force ? settings : Utils.mergeObject(this._settings.get(), settings);\n\n      console.log(settings);\n\n      Theme.update(settings, true);\n\n      this.setIconView(settings);\n      this.setStyles(settings);\n\n      if (save) {\n        this.initPanels(true);\n        this.initWidgets(true);\n\n        if (settings && save === true) {\n          if (settings.language) {\n            SettingsManager.set('Core', 'Locale', settings.language, triggerWatch);\n            Locales.setLocale(settings.language);\n          }\n          this._settings.set(null, settings, save, triggerWatch);\n        }\n      }\n\n      this.generatedHotkeyMap = {};\n\n      var keys = this._settings.get('hotkeys');\n      var self = this;\n      Object.keys(keys).forEach(function (k) {\n        _this10.generatedHotkeyMap[keys[k]] = function () {\n          var args = Array.prototype.slice.call(arguments);\n          args.push(k);\n          return self.hotkeyMap[k].apply(this, args);\n        };\n      });\n\n      console.groupEnd();\n\n      return true;\n    }\n  }, {\n    key: 'setIconView',\n    value: function setIconView(settings) {\n      if (settings.enableIconView) {\n        this.initIconView();\n      } else {\n        if (this.iconView) {\n          this.iconView.destroy();\n          this.iconView = null;\n        }\n      }\n    }\n  }, {\n    key: 'setStyles',\n    value: function setStyles(settings) {\n      /*eslint dot-notation: \"off\"*/\n\n      var styles = {};\n      var raw = '';\n\n      if (settings.panels) {\n        settings.panels.forEach(function (p, i) {\n          styles['corewm-panel'] = {};\n          styles['corewm-notification'] = {};\n          styles['corewm-notification:before'] = {\n            'opacity': p.options.opacity / 100\n          };\n          styles['corewm-panel:before'] = {\n            'opacity': p.options.opacity / 100\n          };\n\n          styles['.custom-notification'] = {};\n          styles['.custom-notification:before'] = {\n            'opacity': p.options.opacity / 100\n          };\n\n          if (p.options.background) {\n            styles['corewm-panel:before']['background-color'] = p.options.background;\n            styles['corewm-notification:before']['background-color'] = p.options.background;\n            styles['.custom-notification:before']['background-color'] = p.options.background;\n          }\n          if (p.options.foreground) {\n            styles['corewm-panel']['color'] = p.options.foreground;\n            styles['corewm-notification']['color'] = p.options.foreground;\n            styles['.custom-notification']['color'] = p.options.foreground;\n          }\n        });\n      }\n\n      var mw = this.getDefaultSetting('fullscreenTrigger') || 800;\n      raw += '@media all and (max-width: ' + String(mw) + 'px) {\\n';\n      raw += 'application-window {\\n';\n\n      var borderSize = 0;\n      var space = this.getWindowSpace(true);\n      var theme = Theme.getStyleTheme(true);\n      if (theme && theme.style && theme.style.window) {\n        borderSize = theme.style.window.border;\n      }\n\n      raw += 'top: calc(' + String(space.top) + 'px + ' + borderSize + ') !important;\\n';\n      raw += 'left: calc(' + String(space.left) + 'px + ' + borderSize + ') !important;\\n';\n      raw += 'right: calc(' + String(borderSize) + ') !important;\\n';\n      raw += 'bottom: calc(' + (space.bottom ? String(space.bottom) + 'px + ' : '') + borderSize + ') !important;\\n';\n      raw += '\\n}';\n      raw += '\\n}';\n\n      styles['#CoreWMDesktopIconView'] = {};\n      if (settings.invertIconViewColor && settings.backgroundColor) {\n        styles['#CoreWMDesktopIconView']['color'] = Utils.invertHEX(settings.backgroundColor);\n      }\n\n      if (Object.keys(styles).length) {\n        this.createStylesheet(styles, raw);\n      }\n    }\n\n    //\n    // Getters / Setters\n    //\n\n  }, {\n    key: 'getWindowSpace',\n    value: function getWindowSpace(noMargin) {\n      var s = _get(CoreWM.prototype.__proto__ || Object.getPrototypeOf(CoreWM.prototype), 'getWindowSpace', this).apply(this, arguments);\n      var d = this.getSetting('desktopMargin');\n\n      s.bottom = 0;\n\n      this.panels.forEach(function (p) {\n        if (p && p.getOntop()) {\n          var ph = p.getHeight();\n          if (p.getAutohide() && p.isAutoHidden()) {\n            s.top += PADDING_PANEL_AUTOHIDE;\n            s.height -= PADDING_PANEL_AUTOHIDE;\n          } else if (p.getPosition('top')) {\n            s.top += ph;\n            s.height -= ph;\n          } else {\n            s.height -= ph;\n          }\n\n          if (p._options.get('position') === 'bottom') {\n            s.bottom += ph;\n          }\n        }\n      });\n\n      if (!noMargin) {\n        if (d > 0) {\n          s.top += d;\n          s.left += d;\n          s.width -= d * 2;\n          s.height -= d * 2;\n        }\n      }\n\n      return s;\n    }\n  }, {\n    key: 'getWindowPosition',\n    value: function getWindowPosition(borders) {\n      borders = typeof borders === 'undefined' || borders === true;\n      var pos = _get(CoreWM.prototype.__proto__ || Object.getPrototypeOf(CoreWM.prototype), 'getWindowPosition', this).apply(this, arguments);\n\n      var m = borders ? this.getSetting('desktopMargin') : 0;\n      pos.x += m || 0;\n      pos.y += m || 0;\n\n      this.panels.forEach(function (p) {\n        if (p && p.getOntop() && p.getPosition('top')) {\n          if (p.getAutohide()) {\n            pos.y += PADDING_PANEL_AUTOHIDE;\n          } else {\n            pos.y += p.getHeight();\n          }\n        }\n      });\n\n      return pos;\n    }\n  }, {\n    key: 'getSetting',\n    value: function getSetting(k) {\n      var val = _get(CoreWM.prototype.__proto__ || Object.getPrototypeOf(CoreWM.prototype), 'getSetting', this).apply(this, arguments);\n      if (typeof val === 'undefined' || val === null) {\n        return defaultSettings(this.importedSettings)[k];\n      }\n      return val;\n    }\n  }, {\n    key: 'getDefaultSetting',\n    value: function getDefaultSetting(k) {\n      var settings = defaultSettings(this.importedSettings);\n      if (typeof k !== 'undefined') {\n        return settings[k];\n      }\n      return settings;\n    }\n  }, {\n    key: 'getPanels',\n    value: function getPanels() {\n      return this.panels;\n    }\n  }, {\n    key: 'getPanel',\n    value: function getPanel(idx) {\n      return this.panels[idx || 0];\n    }\n  }], [{\n    key: 'Widgets',\n    get: function get() {\n      return {\n        DigitalClock: _digitalclock2.default,\n        AnalogClock: _analogclock2.default\n      };\n    }\n  }, {\n    key: 'PanelItems',\n    get: function get() {\n      return {\n        AppMenu: _appmenu2.default,\n        Buttons: _buttons2.default,\n        Clock: _clock2.default,\n        NotificationArea: _notificationarea2.default,\n        Search: _search2.default,\n        Weather: _weather2.default,\n        WindowList: _windowlist2.default\n      };\n    }\n  }]);\n\n  return CoreWM;\n}(WindowManager);\n\n/////////////////////////////////////////////////////////////////////////////\n// EXPORTS\n/////////////////////////////////////////////////////////////////////////////\n\nOSjs.Applications.CoreWM = CoreWM;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nvar DOM = OSjs.require('utils/dom');\n\nvar WindowSwitcher = function () {\n  function WindowSwitcher() {\n    _classCallCheck(this, WindowSwitcher);\n\n    this.$switcher = null;\n    this.showing = false;\n    this.index = -1;\n    this.winRef = null;\n  }\n\n  _createClass(WindowSwitcher, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._remove();\n    }\n  }, {\n    key: '_remove',\n    value: function _remove() {\n      if (this.$switcher) {\n        if (this.$switcher.parentNode) {\n          this.$switcher.parentNode.removeChild(this.$switcher);\n        }\n        this.$switcher = null;\n      }\n    }\n  }, {\n    key: 'show',\n    value: function show(ev, win, wm) {\n      win = win || wm.getLastWindow();\n\n      ev.preventDefault();\n\n      var height = 0;\n      var items = [];\n      var index = 0;\n\n      // Render\n      if (!this.$switcher) {\n        this.$switcher = document.createElement('corewm-window-switcher');\n      } else {\n        DOM.$empty(this.$switcher);\n      }\n\n      var container, image, label, iter;\n      for (var i = 0; i < wm._windows.length; i++) {\n        iter = wm._windows[i];\n        if (iter) {\n          container = document.createElement('div');\n\n          image = document.createElement('img');\n          image.src = iter._icon;\n\n          label = document.createElement('span');\n          label.innerHTML = iter._title;\n\n          container.appendChild(image);\n          container.appendChild(label);\n          this.$switcher.appendChild(container);\n\n          height += 32; // FIXME: We can automatically calculate this\n\n          if (win && win._wid === iter._wid) {\n            index = i;\n          }\n\n          items.push({\n            element: container,\n            win: iter\n          });\n        }\n      }\n\n      if (!this.$switcher.parentNode) {\n        document.body.appendChild(this.$switcher);\n      }\n\n      this.$switcher.style.height = height + 'px';\n      this.$switcher.style.marginTop = (height ? -(height / 2 << 0) : 0) + 'px';\n\n      // Select\n      if (this.showing) {\n        this.index++;\n        if (this.index > items.length - 1) {\n          this.index = -1;\n        }\n      } else {\n        this.index = index;\n        this.showing = true;\n      }\n\n      console.debug('WindowSwitcher::show()', this.index);\n\n      if (items[this.index]) {\n        items[this.index].element.className = 'Active';\n        this.winRef = items[this.index].win;\n      } else {\n        this.winRef = null;\n      }\n    }\n  }, {\n    key: 'hide',\n    value: function hide(ev, win, wm) {\n      if (!this.showing) {\n        return;\n      }\n\n      ev.preventDefault();\n\n      this._remove();\n\n      win = this.winRef || win;\n      if (win) {\n        win._focus();\n      }\n\n      this.winRef = null;\n      this.index = -1;\n      this.showing = false;\n    }\n  }]);\n\n  return WindowSwitcher;\n}();\n\nexports.default = WindowSwitcher;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _locales = __webpack_require__(1);\n\nvar _locales2 = _interopRequireDefault(_locales);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar _ = OSjs.require('core/locales').createLocalizer(_locales2.default);\nvar FS = OSjs.require('utils/fs');\nvar Menu = OSjs.require('gui/menu');\nvar DOM = OSjs.require('utils/dom');\nvar GUI = OSjs.require('utils/gui');\nvar VFS = OSjs.require('vfs/fs');\nvar Process = OSjs.require('core/process');\nvar Theme = OSjs.require('core/theme');\nvar Dialog = OSjs.require('core/dialog');\nvar FileMetadata = OSjs.require('vfs/file');\nvar MountManager = OSjs.require('core/mount-manager');\nvar GUIElement = OSjs.require('gui/element');\nvar WindowManager = OSjs.require('core/window-manager');\n\nfunction createCreateDialog(title, dir, cb) {\n  Dialog.create('Input', {\n    value: title,\n    message: _('Create in {0}', dir)\n  }, function (ev, button, result) {\n    if (result) {\n      cb(new FileMetadata(FS.pathJoin(dir, result)));\n    }\n  });\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// SHORTCUT DIALOG\n/////////////////////////////////////////////////////////////////////////////\n\nvar IconViewShortcutDialog = function (_Dialog) {\n  _inherits(IconViewShortcutDialog, _Dialog);\n\n  function IconViewShortcutDialog(item, scheme, closeCallback) {\n    _classCallCheck(this, IconViewShortcutDialog);\n\n    var _this = _possibleConstructorReturn(this, (IconViewShortcutDialog.__proto__ || Object.getPrototypeOf(IconViewShortcutDialog)).call(this, 'IconViewShortcutDialog', {\n      title: 'Edit Launcher',\n      icon: 'status/appointment-soon.png',\n      width: 400,\n      height: 220,\n      allow_maximize: false,\n      allow_resize: false,\n      allow_minimize: false\n    }, function () {}));\n\n    _this.scheme = scheme;\n    _this.values = {\n      path: item.path,\n      filename: item.filename,\n      args: item.args || {}\n    };\n\n    _this.cb = closeCallback || function () {};\n    return _this;\n  }\n\n  _createClass(IconViewShortcutDialog, [{\n    key: 'init',\n    value: function init(wm, app) {\n      var _this2 = this;\n\n      var root = _get(IconViewShortcutDialog.prototype.__proto__ || Object.getPrototypeOf(IconViewShortcutDialog.prototype), 'init', this).apply(this, arguments);\n\n      this._render(this._name, this.scheme);\n\n      this._find('InputShortcutLaunch').set('value', this.values.path);\n      this._find('InputShortcutLabel').set('value', this.values.filename);\n      this._find('InputTooltipFormatString').set('value', JSON.stringify(this.values.args || {}));\n\n      this._find('ButtonApply').on('click', function () {\n        _this2.applySettings();\n        _this2._close('ok');\n      });\n\n      this._find('ButtonCancel').on('click', function () {\n        _this2._close();\n      });\n\n      return root;\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings() {\n      this.values.path = this._find('InputShortcutLaunch').get('value');\n      this.values.filename = this._find('InputShortcutLabel').get('value');\n      this.values.args = JSON.parse(this._find('InputTooltipFormatString').get('value') || {});\n    }\n  }, {\n    key: '_close',\n    value: function _close(button) {\n      this.cb(button, this.values);\n      return _get(IconViewShortcutDialog.prototype.__proto__ || Object.getPrototypeOf(IconViewShortcutDialog.prototype), '_close', this).apply(this, arguments);\n    }\n  }]);\n\n  return IconViewShortcutDialog;\n}(Dialog);\n\n/////////////////////////////////////////////////////////////////////////////\n// ICON VIEW\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * FIXME: This can now be remade into extending the GUI IconView base class\n * FIXME: Implement the grid desktopview I made in Jan\n */\n\n\nvar DesktopIconView = function () {\n  function DesktopIconView(wm) {\n    var _this3 = this;\n\n    _classCallCheck(this, DesktopIconView);\n\n    this.dialog = null;\n    this.$iconview = null;\n    this.$element = document.createElement('gui-icon-view');\n    this.$element.setAttribute('data-multiple', 'false');\n    //this.$element.setAttribute('no-selection', 'true');\n    this.$element.id = 'CoreWMDesktopIconView';\n    this.shortcutCache = [];\n    this.refreshTimeout = null;\n\n    GUI.createDroppable(this.$element, {\n      onOver: function onOver(ev, el, args) {\n        wm.onDropOver(ev, el, args);\n      },\n\n      onLeave: function onLeave() {\n        wm.onDropLeave();\n      },\n\n      onDrop: function onDrop() {\n        wm.onDrop();\n      },\n\n      onItemDropped: function onItemDropped(ev, el, item, args) {\n        wm.onDropItem(ev, el, item, args);\n      },\n\n      onFilesDropped: function onFilesDropped(ev, el, files, args) {\n        wm.onDropFile(ev, el, files, args);\n      }\n    });\n\n    this.$iconview = GUIElement.createFromNode(this.$element);\n    this.$iconview.build();\n\n    this.$iconview.on('select', function () {\n      if (wm) {\n        var win = wm.getCurrentWindow();\n        if (win) {\n          win._blur();\n        }\n      }\n    }).on('activate', function (ev) {\n      if (ev && ev.detail) {\n        ev.detail.entries.forEach(function (entry) {\n          var item = entry.data;\n          var file = new FileMetadata(item);\n          Process.createFromFile(file, item.args);\n        });\n      }\n    }).on('contextmenu', function (ev) {\n      if (ev && ev.detail && ev.detail.entries) {\n        _this3.createContextMenu(ev.detail.entries[0], ev);\n      }\n    });\n\n    this._refresh();\n  }\n\n  _createClass(DesktopIconView, [{\n    key: 'destroy',\n    value: function destroy() {\n      DOM.$remove(this.$element);\n      this.refreshTimeout = clearTimeout(this.refreshTimeout);\n      this.$element = null;\n      this.$iconview = null;\n\n      if (this.dialog) {\n        this.dialog.destroy();\n      }\n      this.dialog = null;\n\n      this.shortcutCache = [];\n    }\n  }, {\n    key: 'blur',\n    value: function blur() {\n      var cel = GUIElement.createFromNode(this.$element);\n      cel.set('value', null);\n    }\n  }, {\n    key: 'getRoot',\n    value: function getRoot() {\n      return this.$element;\n    }\n  }, {\n    key: 'resize',\n    value: function resize(wm) {\n      var el = this.getRoot();\n      var s = wm.getWindowSpace();\n\n      if (el) {\n        el.style.top = s.top + 'px';\n        el.style.left = s.left + 'px';\n        el.style.width = s.width + 'px';\n        el.style.height = s.height + 'px';\n      }\n    }\n  }, {\n    key: '_refresh',\n    value: function _refresh(wm) {\n      var _this4 = this;\n\n      var desktopPath = WindowManager.instance.getSetting('desktopPath');\n      var shortcutPath = FS.pathJoin(desktopPath, '.shortcuts.json');\n\n      this.shortcutCache = [];\n\n      this.refreshTimeout = clearTimeout(this.refreshTimeout);\n      this.refreshTimeout = setTimeout(function () {\n        VFS.scandir(desktopPath, { backlink: false }).then(function (result) {\n          if (_this4.$iconview) {\n            var entries = result.map(function (iter) {\n              if (iter.type === 'application' || iter.shortcut === true) {\n                var niter = new FileMetadata(iter);\n                niter.shortcut = true;\n\n                var idx = _this4.shortcutCache.push(niter) - 1;\n\n                var file = new FileMetadata(iter);\n                file.__index = idx;\n\n                return {\n                  _type: iter.type,\n                  icon: Theme.getFileIcon(iter, '32x32'),\n                  label: iter.filename,\n                  value: file,\n                  args: iter.args || {}\n                };\n              }\n\n              return {\n                _type: 'vfs',\n                icon: Theme.getFileIcon(iter, '32x32'),\n                label: iter.filename,\n                value: iter\n              };\n            }).filter(function (iter) {\n              return iter.value.path !== shortcutPath;\n            });\n\n            _this4.$iconview.clear().add(entries);\n          }\n        });\n      }, 150);\n    }\n  }, {\n    key: '_save',\n    value: function _save(refresh) {\n      var _this5 = this;\n\n      var desktopPath = WindowManager.instance.getSetting('desktopPath');\n      var path = FS.pathJoin(desktopPath, '.shortcuts.json');\n      var cache = this.shortcutCache;\n\n      VFS.mkdir(FS.dirname(path)).finally(function () {\n        VFS.write(path, JSON.stringify(cache, null, 4)).then(function () {\n          if (refresh) {\n            // Normally caught by VFS message in main.js\n            _this5._refresh();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'updateShortcut',\n    value: function updateShortcut(data, values) {\n      var o = this.shortcutCache[data.__index];\n      if (o.path === data.path) {\n        Object.keys(values).forEach(function (k) {\n          o[k] = values[k];\n        });\n\n        this._save(true);\n      }\n    }\n  }, {\n    key: 'getShortcutByPath',\n    value: function getShortcutByPath(path) {\n      var found = null;\n      var index = -1;\n\n      this.shortcutCache.forEach(function (i, idx) {\n        if (!found) {\n          if (i.type !== 'application' && i.path === path) {\n            found = i;\n            index = idx;\n          }\n        }\n      });\n\n      return { item: found, index: index };\n    }\n  }, {\n    key: 'addShortcut',\n    value: function addShortcut(data, wm, save) {\n      ['icon'].forEach(function (k) {\n        if (data[k]) {\n          delete data[k];\n        }\n      });\n\n      if (data.type === 'application') {\n        data.args = data.args || {};\n      }\n\n      data.shortcut = true;\n      this.shortcutCache.push(data);\n      this._save(true);\n    }\n  }, {\n    key: 'removeShortcut',\n    value: function removeShortcut(data) {\n      var o = this.shortcutCache[data.__index];\n      if (o && o.path === data.path) {\n        this.shortcutCache.splice(data.__index, 1);\n        this._save(true);\n      }\n    }\n  }, {\n    key: '_getContextMenu',\n    value: function _getContextMenu(item) {\n      var _this6 = this;\n\n      var desktopPath = WindowManager.instance.getSetting('desktopPath');\n      var menu = [{\n        title: _('LBL_UPLOAD'),\n        onClick: function onClick() {\n          Dialog.create('FileUpload', {\n            dest: desktopPath\n          }, function () {\n            _this6._refresh();\n          });\n        }\n      }, {\n        title: _('LBL_CREATE'),\n        menu: [{\n          title: _('LBL_FILE'),\n          onClick: function onClick() {\n            createCreateDialog('New file', desktopPath, function (f) {\n              VFS.write(f, '').catch(function (err) {\n                OSjs.error('CoreWM', _('ERR_VFSMODULE_MKFILE'), err);\n              });\n            });\n          }\n        }, {\n          title: _('LBL_DIRECTORY'),\n          onClick: function onClick() {\n            createCreateDialog('New directory', desktopPath, function (f) {\n              VFS.mkdir(f).catch(function (err) {\n                OSjs.error('CoreWM', _('ERR_VFSMODULE_MKDIR'), err);\n              });\n            });\n          }\n        }]\n      }];\n\n      if (item && item.data) {\n        var file = item.data;\n\n        if (file.type === 'application') {\n          menu.push({\n            title: _('Edit shortcut'),\n            onClick: function onClick() {\n              return _this6.openShortcutEdit(file);\n            }\n          });\n        }\n\n        var m = MountManager.getModuleFromPath(file.path);\n        if (!m || m.option('root') !== desktopPath) {\n          menu.push({\n            title: _('Remove shortcut'),\n            onClick: function onClick() {\n              return _this6.removeShortcut(file);\n            }\n          });\n        } else {\n          menu.push({\n            title: _('LBL_DELETE'),\n            onClick: function onClick() {\n              return VFS.unlink(file);\n            } // Caught by VFS message in main.js\n          });\n        }\n      }\n\n      return menu;\n    }\n  }, {\n    key: 'createContextMenu',\n    value: function createContextMenu(item, ev) {\n      var wm = WindowManager.instance;\n      var menu = wm._getContextMenu(item);\n      Menu.create(menu, ev);\n    }\n  }, {\n    key: 'openShortcutEdit',\n    value: function openShortcutEdit(item) {\n      var _this7 = this;\n\n      if (this.dialog) {\n        this.dialog._close();\n      }\n\n      var wm = WindowManager.instance;\n\n      this.dialog = new IconViewShortcutDialog(item, wm._scheme, function (button, values) {\n        if (button === 'ok') {\n          _this7.updateShortcut(item, values);\n        }\n        _this7.dialog = null;\n      });\n\n      wm.addWindow(this.dialog, true);\n    }\n  }]);\n\n  return DesktopIconView;\n}();\n\nexports.default = DesktopIconView;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _locales = __webpack_require__(1);\n\nvar _locales2 = _interopRequireDefault(_locales);\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _ = OSjs.require('core/locales').createLocalizer(_locales2.default);\nvar DOM = OSjs.require('utils/dom');\nvar Events = OSjs.require('utils/events');\nvar Menu = OSjs.require('gui/menu');\nvar WindowManager = OSjs.require('core/window-manager');\n\n/*eslint valid-jsdoc: \"off\"*/\n\nvar PANEL_SHOW_TIMEOUT = 150;\nvar PANEL_HIDE_TIMEOUT = 600;\n\nvar Panel = function () {\n  function Panel(name, options, wm) {\n    _classCallCheck(this, Panel);\n\n    options = options || {};\n\n    this._name = name;\n    this._$element = null;\n    this._$container = null;\n    this._items = [];\n    this._outtimeout = null;\n    this._intimeout = null;\n    this._options = options.mergeDefaults({\n      position: 'top'\n    });\n\n    console.debug('Panel::construct()', this._name, this._options.get());\n  }\n\n  _createClass(Panel, [{\n    key: 'init',\n    value: function init(root) {\n      var _this = this;\n\n      var wm = WindowManager.instance;\n\n      function createMenu(ev) {\n        var menu = [{ title: _('Open Panel Settings'), onClick: function onClick(ev) {\n            wm.showSettings('panel');\n          } }];\n\n        if (wm.getSetting('useTouchMenu') === true) {\n          menu.push({\n            title: _('Turn off TouchMenu'),\n            onClick: function onClick(ev) {\n              wm.applySettings({ useTouchMenu: false }, false, true);\n            }\n          });\n        } else {\n          menu.push({\n            title: _('Turn on TouchMenu'),\n            onClick: function onClick(ev) {\n              wm.applySettings({ useTouchMenu: true }, false, true);\n            }\n          });\n        }\n\n        Menu.create(menu, ev);\n      }\n\n      this._$container = document.createElement('corewm-panel-container');\n      this._$element = document.createElement('corewm-panel');\n      this._$element.setAttribute('data-orientation', 'horizontal');\n      this._$element.setAttribute('role', 'toolbar');\n\n      /*Utils.$bind(this._$element, 'mousedown', function(ev) {\n        ev.preventDefault();\n      }); // This makes DnD not work in panel items*/\n      Events.$bind(this._$element, 'mouseover', function (ev) {\n        _this.onMouseOver(ev);\n      });\n      Events.$bind(this._$element, 'mouseout', function (ev) {\n        _this.onMouseOut(ev);\n      });\n      Events.$bind(this._$element, 'click', function (ev) {\n        Menu.blur();\n      });\n      Events.$bind(this._$element, 'contextmenu', function (ev) {\n        createMenu(ev);\n      });\n\n      Events.$bind(document, 'mouseout:panelmouseleave', function (ev) {\n        _this.onMouseLeave(ev);\n      }, false);\n\n      this._$element.appendChild(this._$container);\n      root.appendChild(this._$element);\n\n      setTimeout(function () {\n        return _this.update();\n      }, 0);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._clearTimeouts();\n\n      Events.$unbind(document, 'mouseout:panelmouseleave');\n      Events.$unbind(this._$element);\n\n      this._items.forEach(function (item) {\n        item.destroy();\n      });\n      this._items = [];\n      this._$element = DOM.$remove(this._$element);\n      this._$container = null;\n    }\n  }, {\n    key: 'update',\n    value: function update(options) {\n      var _this2 = this;\n\n      options = options || this._options.get();\n\n      // CSS IS SET IN THE WINDOW MANAGER!\n      var attrs = {\n        ontop: !!options.ontop,\n        position: options.position || 'bottom'\n      };\n\n      if (options.autohide) {\n        this.onMouseOut();\n      }\n      if (this._$element) {\n        Object.keys(attrs).forEach(function (k) {\n          _this2._$element.setAttribute('data-' + k, typeof attrs[k] === 'boolean' ? attrs[k] ? 'true' : 'false' : attrs[k]);\n        });\n      }\n      this._options.set(null, options);\n    }\n  }, {\n    key: 'autohide',\n    value: function autohide(hide) {\n      if (!this._options.get('autohide') || !this._$element) {\n        return;\n      }\n\n      if (hide) {\n        this._$element.setAttribute('data-autohide', 'true');\n      } else {\n        this._$element.setAttribute('data-autohide', 'false');\n      }\n    }\n  }, {\n    key: '_clearTimeouts',\n    value: function _clearTimeouts() {\n      if (this._outtimeout) {\n        clearTimeout(this._outtimeout);\n        this._outtimeout = null;\n      }\n      if (this._intimeout) {\n        clearTimeout(this._intimeout);\n        this._intimeout = null;\n      }\n    }\n  }, {\n    key: 'onMouseLeave',\n    value: function onMouseLeave(ev) {\n      var from = ev.relatedTarget || ev.toElement;\n      if (!from || from.nodeName === 'HTML') {\n        this.onMouseOut(ev);\n      }\n    }\n  }, {\n    key: 'onMouseOver',\n    value: function onMouseOver() {\n      var _this3 = this;\n\n      this._clearTimeouts();\n      this._intimeout = setTimeout(function () {\n        _this3.autohide(false);\n      }, PANEL_SHOW_TIMEOUT);\n    }\n  }, {\n    key: 'onMouseOut',\n    value: function onMouseOut() {\n      var _this4 = this;\n\n      this._clearTimeouts();\n      this._outtimeout = setTimeout(function () {\n        _this4.autohide(true);\n      }, PANEL_HIDE_TIMEOUT);\n    }\n  }, {\n    key: 'addItem',\n    value: function addItem(item) {\n      if (!(item instanceof _panelitem2.default)) {\n        throw 'Expected a PanelItem in Panel::addItem()';\n      }\n\n      this._items.push(item);\n      this._$container.appendChild(item.init());\n    }\n  }, {\n    key: 'isAutoHidden',\n    value: function isAutoHidden() {\n      if (this._$element) {\n        return this._$element.getAttribute('data-autohide') === 'true';\n      }\n\n      return false;\n    }\n  }, {\n    key: 'getItemByType',\n    value: function getItemByType(type) {\n      return this.getItem(type);\n    }\n  }, {\n    key: 'getItemsByType',\n    value: function getItemsByType(type) {\n      return this.getItem(type, true);\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem(type, multiple) {\n      var result = multiple ? [] : null;\n\n      this._items.forEach(function (item, idx) {\n        if (item instanceof type) {\n          if (multiple) {\n            result.push(item);\n          } else {\n            result = item;\n            return false;\n          }\n        }\n        return true;\n      });\n\n      return result;\n    }\n  }, {\n    key: 'getOntop',\n    value: function getOntop() {\n      return this._options.get('ontop');\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition(pos) {\n      return pos ? this._options.get('position') === pos : this._options.get('position');\n    }\n  }, {\n    key: 'getAutohide',\n    value: function getAutohide() {\n      return this._options.get('autohide');\n    }\n  }, {\n    key: 'getRoot',\n    value: function getRoot() {\n      return this._$element;\n    }\n  }, {\n    key: 'getHeight',\n    value: function getHeight() {\n      return this._$element ? this._$element.offsetHeight : 0;\n    }\n  }]);\n\n  return Panel;\n}();\n\nexports.default = Panel;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _widget = __webpack_require__(2);\n\nvar _widget2 = _interopRequireDefault(_widget);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar Locales = OSjs.require('core/locales');\nvar Dialog = OSjs.require('core/dialog');\n\n/////////////////////////////////////////////////////////////////////////////\n// ITEM\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * Widget: DigitalClock\n */\n\nvar WidgetDigitalClock = function (_Widget) {\n  _inherits(WidgetDigitalClock, _Widget);\n\n  function WidgetDigitalClock(settings) {\n    _classCallCheck(this, WidgetDigitalClock);\n\n    return _possibleConstructorReturn(this, (WidgetDigitalClock.__proto__ || Object.getPrototypeOf(WidgetDigitalClock)).call(this, 'DigitalClock', {\n      width: 300,\n      height: 100,\n      aspect: true,\n      top: 100,\n      right: 20,\n      canvas: true,\n      frequency: 1,\n      resizable: true,\n      viewBox: true,\n      settings: {\n        enabled: false,\n        tree: {\n          color: '#ffffff'\n        }\n      }\n    }, settings));\n  }\n\n  _createClass(WidgetDigitalClock, [{\n    key: 'onRender',\n    value: function onRender() {\n      if (!this._$canvas) {\n        return;\n      }\n\n      var ctx = this._$context;\n      var now = new Date();\n      var txt = [now.getHours(), now.getMinutes(), now.getSeconds()].map(function (i) {\n        return i < 10 ? '0' + String(i) : String(i);\n      }).join(':');\n\n      var ratio = 0.55;\n      var xOffset = -10;\n      var fontSize = Math.round(this._dimension.height * ratio);\n\n      ctx.font = String(fontSize) + 'px Digital-7Mono';\n      //ctx.textAlign = 'center'; // Does not work properly for @font-facve\n      ctx.textBaseline = 'middle';\n      ctx.fillStyle = this._getSetting('color');\n\n      var x = Math.round(this._dimension.width / 2);\n      var y = Math.round(this._dimension.height / 2);\n      var m = ctx.measureText(txt).width;\n\n      ctx.clearRect(0, 0, this._dimension.width, this._dimension.height);\n      //ctx.fillText(txt, x, y);\n      ctx.fillText(txt, x - m / 2 + xOffset, y);\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(ev) {\n      var _this2 = this;\n\n      var color = this._getSetting('color') || '#ffffff';\n\n      return [{\n        title: Locales._('LBL_COLOR'),\n        onClick: function onClick() {\n          Dialog.create('Color', {\n            color: color\n          }, function (ev, btn, result) {\n            if (btn === 'ok') {\n              _this2._setSetting('color', result.hex, true);\n            }\n          });\n        }\n      }];\n    }\n  }]);\n\n  return WidgetDigitalClock;\n}(_widget2.default);\n\nexports.default = WidgetDigitalClock;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _widget = __webpack_require__(2);\n\nvar _widget2 = _interopRequireDefault(_widget);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\n/**\n * Widget: AnalogClock\n */\nvar WidgetAnalogClock = function (_Widget) {\n  _inherits(WidgetAnalogClock, _Widget);\n\n  function WidgetAnalogClock(settings) {\n    _classCallCheck(this, WidgetAnalogClock);\n\n    var _this = _possibleConstructorReturn(this, (WidgetAnalogClock.__proto__ || Object.getPrototypeOf(WidgetAnalogClock)).call(this, 'AnalogClock', {\n      width: 300,\n      height: 300,\n      aspect: true,\n      top: 100,\n      right: 20,\n      canvas: true,\n      frequency: 1,\n      resizable: true,\n      viewBox: true\n    }, settings));\n\n    _this.radius = 300 / 2;\n    return _this;\n  }\n\n  _createClass(WidgetAnalogClock, [{\n    key: 'onRender',\n    value: function onRender() {\n      if (!this._$canvas) {\n        return;\n      }\n\n      var ctx = this._$context;\n      var radius = Math.round(this.radius * 0.95);\n\n      function drawHand(ctx, pos, length, width) {\n        ctx.beginPath();\n        ctx.lineWidth = width;\n        ctx.lineCap = 'round';\n        ctx.moveTo(0, 0);\n        ctx.rotate(pos);\n        ctx.lineTo(0, -length);\n        ctx.stroke();\n        ctx.rotate(-pos);\n      }\n\n      // Clear\n      ctx.clearRect(0, 0, this.radius * 2, this.radius * 2);\n\n      // Draw face\n      ctx.beginPath();\n      ctx.arc(0, 0, radius, 0, 2 * Math.PI);\n      ctx.fillStyle = 'white';\n      ctx.fill();\n\n      ctx.lineWidth = radius * 0.04;\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);\n      ctx.fillStyle = '#000';\n      ctx.fill();\n\n      // Draw numbers\n      ctx.font = radius * 0.15 + 'px arial';\n      ctx.textBaseline = 'middle';\n      ctx.textAlign = 'center';\n\n      var ang = void 0;\n      for (var num = 1; num < 13; num++) {\n        ang = num * Math.PI / 6;\n        ctx.rotate(ang);\n        ctx.translate(0, -radius * 0.85);\n        ctx.rotate(-ang);\n        ctx.fillText(num.toString(), 0, 0);\n        ctx.rotate(ang);\n        ctx.translate(0, radius * 0.85);\n        ctx.rotate(-ang);\n      }\n\n      // Draw time\n      var now = new Date();\n      var hour = now.getHours();\n      var minute = now.getMinutes();\n      var second = now.getSeconds();\n\n      hour = hour % 12;\n      hour = hour * Math.PI / 6 + minute * Math.PI / (6 * 60) + second * Math.PI / (360 * 60);\n      minute = minute * Math.PI / 30 + second * Math.PI / (30 * 60);\n      second = second * Math.PI / 30;\n\n      drawHand(ctx, hour, radius * 0.5, radius * 0.07);\n      drawHand(ctx, minute, radius * 0.8, radius * 0.07);\n      drawHand(ctx, second, radius * 0.9, radius * 0.02);\n    }\n  }, {\n    key: 'onResize',\n    value: function onResize(dimension) {\n      if (!this._$canvas || !this._$context) {\n        return;\n      }\n\n      this.radius = dimension.height / 2;\n      this._$context.translate(this.radius, this.radius);\n    }\n  }]);\n\n  return WidgetAnalogClock;\n}(_widget2.default);\n\nexports.default = WidgetAnalogClock;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nvar _menu = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar Theme = OSjs.require('core/theme');\nvar Events = OSjs.require('utils/events');\nvar Locales = OSjs.require('core/locales');\nvar WindowManager = OSjs.require('core/window-manager');\n\n/*eslint valid-jsdoc: \"off\"*/\n\nvar PanelItemAppMenu = function (_PanelItem) {\n  _inherits(PanelItemAppMenu, _PanelItem);\n\n  function PanelItemAppMenu(settings) {\n    _classCallCheck(this, PanelItemAppMenu);\n\n    return _possibleConstructorReturn(this, (PanelItemAppMenu.__proto__ || Object.getPrototypeOf(PanelItemAppMenu)).call(this, 'PanelItemAppMenu', 'AppMenu', settings, {}));\n  }\n\n  _createClass(PanelItemAppMenu, [{\n    key: 'init',\n    value: function init() {\n      var root = _get(PanelItemAppMenu.prototype.__proto__ || Object.getPrototypeOf(PanelItemAppMenu.prototype), 'init', this).apply(this, arguments);\n      var wm = WindowManager.instance;\n\n      var img = document.createElement('img');\n      img.alt = '';\n      img.src = Theme.getIcon(wm.getSetting('icon') || 'osjs-white.png');\n\n      var sel = document.createElement('li');\n      sel.title = Locales._('LBL_APPLICATIONS');\n      sel.className = 'corewm-panel-button-centered';\n      sel.setAttribute('role', 'button');\n      sel.setAttribute('data-label', 'OS.js Application Menu');\n      sel.appendChild(img);\n\n      Events.$bind(sel, 'mousedown', function (ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n      });\n      Events.$bind(sel, 'click', function (ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n\n        var wm = WindowManager.instance;\n        if (wm) {\n          (0, _menu.showMenu)(ev);\n        }\n      });\n\n      this._$container.appendChild(sel);\n\n      return root;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this._$container) {\n        Events.$unbind(this._$container.querySelector('li'), 'click');\n      }\n      return _get(PanelItemAppMenu.prototype.__proto__ || Object.getPrototypeOf(PanelItemAppMenu.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }]);\n\n  return PanelItemAppMenu;\n}(_panelitem2.default);\n\nexports.default = PanelItemAppMenu;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nexports.showMenu = showMenu;\n\nvar _locales = __webpack_require__(1);\n\nvar _locales2 = _interopRequireDefault(_locales);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _ = OSjs.require('core/locales').createLocalizer(_locales2.default);\nvar Menu = OSjs.require('gui/menu');\nvar GUI = OSjs.require('utils/gui');\nvar DOM = OSjs.require('utils/dom');\nvar Events = OSjs.require('utils/events');\nvar Process = OSjs.require('core/process');\nvar Theme = OSjs.require('core/theme');\nvar WindowManager = OSjs.require('core/window-manager');\nvar PackageManager = OSjs.require('core/package-manager');\n\nvar CategorizedApplicationMenu = function () {\n  function CategorizedApplicationMenu() {\n    _classCallCheck(this, CategorizedApplicationMenu);\n\n    var apps = PackageManager.getPackages();\n    var wm = WindowManager.instance;\n    var cfgCategories = wm.getDefaultSetting('menu');\n\n    function createEvent(iter) {\n      return function (el) {\n        GUI.createDraggable(el, {\n          type: 'application',\n          data: {\n            launch: iter.name\n          }\n        });\n      };\n    }\n\n    function clickEvent(iter) {\n      return function () {\n        Process.create(iter.name);\n      };\n    }\n\n    var cats = {};\n\n    Object.keys(cfgCategories).forEach(function (c) {\n      cats[c] = [];\n    });\n\n    Object.keys(apps).forEach(function (a) {\n      var iter = apps[a];\n      if (iter.type === 'application' && iter.visible !== false) {\n        var cat = iter.category && cats[iter.category] ? iter.category : 'unknown';\n        cats[cat].push({ name: a, data: iter });\n      }\n    });\n\n    var list = [];\n    Object.keys(cats).forEach(function (c) {\n      var submenu = [];\n      for (var a = 0; a < cats[c].length; a++) {\n        var iter = cats[c][a];\n        submenu.push({\n          title: iter.data.name,\n          icon: Theme.getIcon(iter.data.icon, '16x16'),\n          tooltip: iter.data.description,\n          onCreated: createEvent(iter),\n          onClick: clickEvent(iter)\n        });\n      }\n\n      if (submenu.length) {\n        list.push({\n          title: _(cfgCategories[c].title),\n          icon: Theme.getIcon(cfgCategories[c].icon, '16x16'),\n          menu: submenu\n        });\n      }\n    });\n\n    this.list = list;\n  }\n\n  _createClass(CategorizedApplicationMenu, [{\n    key: 'show',\n    value: function show(ev) {\n      var m = Menu.create(this.list, ev);\n      if (m && m.$element) {\n        DOM.$addClass(m.$element, 'CoreWMDefaultApplicationMenu');\n      }\n    }\n  }]);\n\n  return CategorizedApplicationMenu;\n}();\n\nvar ApplicationMenu = function () {\n  function ApplicationMenu() {\n    _classCallCheck(this, ApplicationMenu);\n\n    var root = this.$element = document.createElement('gui-menu');\n    this.$element.id = 'CoreWMApplicationMenu';\n\n    var apps = PackageManager.getPackages();\n\n    function createEntry(a, iter) {\n      var entry = document.createElement('gui-menu-entry');\n\n      var img = document.createElement('img');\n      img.src = Theme.getIcon(iter.icon, '32x32');\n\n      var txt = document.createElement('div');\n      txt.appendChild(document.createTextNode(iter.name)); //.replace(/([^\\s-]{8})([^\\s-]{8})/, '$1-$2')));\n\n      Events.$bind(entry, 'click', function (ev) {\n        ev.stopPropagation();\n        Process.create(a);\n        Menu.blur();\n      });\n\n      entry.appendChild(img);\n      entry.appendChild(txt);\n      root.appendChild(entry);\n    }\n\n    Object.keys(apps).forEach(function (a) {\n      var iter = apps[a];\n      if (iter.type === 'application' && iter.visible !== false) {\n        createEntry(a, iter);\n      }\n    });\n  }\n\n  _createClass(ApplicationMenu, [{\n    key: 'destroy',\n    value: function destroy() {\n      if (this.$element) {\n        this.$element.querySelectorAll('gui-menu-entry').forEach(function (el) {\n          Events.$unbind(el, 'click');\n        });\n        DOM.$remove(this.$element);\n      }\n      this.$element = null;\n    }\n  }, {\n    key: 'show',\n    value: function show(pos) {\n      if (!this.$element) {\n        return;\n      }\n\n      if (!this.$element.parentNode) {\n        document.body.appendChild(this.$element);\n      }\n\n      // FIXME: This is a very hackish way of doing it and does not work when button is moved!\n      DOM.$removeClass(this.$element, 'AtBottom');\n      DOM.$removeClass(this.$element, 'AtTop');\n      if (pos.y > window.innerHeight / 2) {\n        DOM.$addClass(this.$element, 'AtBottom');\n\n        this.$element.style.top = 'auto';\n        this.$element.style.bottom = '30px';\n      } else {\n        DOM.$addClass(this.$element, 'AtTop');\n\n        this.$element.style.bottom = 'auto';\n        this.$element.style.top = '30px';\n      }\n\n      this.$element.style.left = pos.x + 'px';\n    }\n  }, {\n    key: 'getRoot',\n    value: function getRoot() {\n      return this.$element;\n    }\n  }]);\n\n  return ApplicationMenu;\n}();\n\nfunction showMenu(ev) {\n  var wm = WindowManager.instance;\n\n  var inst = void 0;\n  if (wm && wm.getSetting('useTouchMenu') === true) {\n    inst = new ApplicationMenu();\n\n    var pos = { x: ev.clientX, y: ev.clientY };\n    if (ev.target) {\n      var rect = DOM.$position(ev.target, document.body);\n      if (rect.left && rect.top && rect.width && rect.height) {\n        pos.x = rect.left - rect.width / 2;\n\n        if (pos.x <= 16) {\n          pos.x = 0; // Snap to left\n        }\n\n        var panel = DOM.$parent(ev.target, function (node) {\n          return node.tagName.toLowerCase() === 'corewm-panel';\n        });\n\n        if (panel) {\n          var prect = DOM.$position(panel);\n          pos.y = prect.top + prect.height;\n        } else {\n          pos.y = rect.top + rect.height;\n        }\n      }\n    }\n    Menu.create(null, pos, inst);\n  } else {\n    inst = new CategorizedApplicationMenu();\n    inst.show(ev);\n  }\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar GUI = OSjs.require('utils/gui');\nvar Menu = OSjs.require('gui/menu');\nvar DOM = OSjs.require('utils/dom');\nvar Init = OSjs.require('core/init');\nvar Theme = OSjs.require('core/theme');\nvar Events = OSjs.require('utils/events');\nvar Locales = OSjs.require('core/locales');\nvar Process = OSjs.require('core/process');\nvar PackageManager = OSjs.require('core/package-manager');\nvar WindowManager = OSjs.require('core/window-manager');\n\n/////////////////////////////////////////////////////////////////////////////\n// ITEM\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * PanelItem: Buttons\n */\n\nvar PanelItemButtons = function (_PanelItem) {\n  _inherits(PanelItemButtons, _PanelItem);\n\n  function PanelItemButtons(settings) {\n    _classCallCheck(this, PanelItemButtons);\n\n    return _possibleConstructorReturn(this, (PanelItemButtons.__proto__ || Object.getPrototypeOf(PanelItemButtons)).call(this, 'PanelItemButtons', 'Buttons', settings, {\n      buttons: [{\n        title: Locales._('LBL_SETTINGS'),\n        icon: 'categories/applications-system.png',\n        launch: 'ApplicationSettings'\n      }]\n    }));\n  }\n\n  _createClass(PanelItemButtons, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      var root = _get(PanelItemButtons.prototype.__proto__ || Object.getPrototypeOf(PanelItemButtons.prototype), 'init', this).apply(this, arguments);\n\n      this.renderButtons();\n\n      var ghost = void 0,\n          lastTarget = void 0;\n\n      function clearGhost(inner) {\n        ghost = DOM.$remove(ghost);\n        if (!inner) {\n          lastTarget = null;\n        }\n      }\n\n      function createGhost(target) {\n        var isUl = target.tagName === 'UL';\n        if (!target || lastTarget === target || isUl) {\n          return;\n        }\n\n        var ul = target.parentNode;\n        lastTarget = target;\n\n        clearGhost(true);\n\n        ghost = document.createElement('li');\n        ghost.className = 'Ghost';\n\n        ul.insertBefore(ghost, target);\n      }\n\n      var counter = 0;\n      GUI.createDroppable(this._$container, {\n        onOver: function onOver(ev, el, args) {\n          if (ev.target) {\n            createGhost(ev.target);\n          }\n        },\n\n        onEnter: function onEnter(ev) {\n          ev.preventDefault();\n          counter++;\n        },\n\n        onLeave: function onLeave(ev) {\n          if (counter <= 0) {\n            clearGhost();\n          }\n        },\n\n        onDrop: function onDrop() {\n          counter = 0;\n          clearGhost();\n        },\n\n        onItemDropped: function onItemDropped(ev, el, item, args) {\n          if (item && item.data) {\n            var newPosition = 0;\n            if (DOM.$hasClass(ev.target, 'Ghost')) {\n              newPosition = DOM.$index(ev.target);\n            }\n\n            if (typeof item.data.position !== 'undefined') {\n              _this2.moveButton(item.data.position, newPosition - 1);\n            } else if (item.data.mime === 'osjs/application') {\n              var appName = item.data.path.split('applications:///')[1];\n              _this2.createButton(appName, newPosition);\n            }\n          }\n        }\n      });\n\n      return root;\n    }\n  }, {\n    key: 'clearButtons',\n    value: function clearButtons() {\n      DOM.$empty(this._$container);\n    }\n  }, {\n    key: 'renderButtons',\n    value: function renderButtons() {\n      var _this3 = this;\n\n      var wm = WindowManager.instance;\n\n      var systemButtons = {\n        applications: function applications(ev) {\n          wm.showMenu(ev);\n        },\n        settings: function settings(ev) {\n          if (wm) {\n            wm.showSettings();\n          }\n        },\n        exit: function exit(ev) {\n          Init.logout();\n        }\n      };\n\n      this.clearButtons();\n\n      (this._settings.get('buttons') || []).forEach(function (btn, idx) {\n        var menu = [{\n          title: 'Remove button',\n          onClick: function onClick() {\n            _this3.removeButton(idx);\n          }\n        }];\n        var callback = function callback() {\n          Process.create(btn.launch);\n        };\n\n        if (btn.system) {\n          menu = null; //systemMenu;\n          callback = function callback(ev) {\n            ev.stopPropagation();\n            systemButtons[btn.system](ev);\n          };\n        }\n\n        _this3.addButton(btn.title, btn.icon, menu, callback, idx);\n      });\n    }\n  }, {\n    key: 'removeButton',\n    value: function removeButton(index) {\n      var buttons = this._settings.get('buttons');\n      buttons.splice(index, 1);\n      this.renderButtons();\n\n      this._settings.save();\n    }\n  }, {\n    key: 'moveButton',\n    value: function moveButton(from, to) {\n      var _this4 = this;\n\n      var buttons = this._settings.get('buttons');\n\n      if (from === to || buttons.length <= 1) {\n        return;\n      }\n\n      if (to >= buttons.length) {\n        var k = to - buttons.length;\n        while (k-- + 1) {\n          buttons.push(window.undefined);\n        }\n      }\n\n      buttons.splice(to, 0, buttons.splice(from, 1)[0]);\n\n      this._settings.save(function () {\n        _this4.renderButtons();\n      });\n    }\n  }, {\n    key: 'createButton',\n    value: function createButton(appName, position) {\n      var pkg = PackageManager.getPackage(appName);\n      var buttons = this._settings.get('buttons');\n\n      var iter = {\n        title: appName,\n        icon: pkg.icon,\n        launch: appName\n      };\n\n      if (!buttons.length) {\n        buttons.push(iter);\n      } else {\n        buttons.splice(position, 0, iter);\n      }\n\n      this.renderButtons();\n\n      this._settings.save();\n    }\n  }, {\n    key: 'addButton',\n    value: function addButton(title, icon, menu, callback, idx) {\n      var img = document.createElement('img');\n      img.alt = '';\n      img.src = Theme.getIcon(icon);\n\n      var sel = document.createElement('li');\n      sel.title = title;\n      sel.setAttribute('role', 'button');\n      sel.setAttribute('aria-label', title);\n      sel.appendChild(img);\n\n      Events.$bind(sel, 'mousedown', function (ev) {\n        ev.stopPropagation();\n      });\n      Events.$bind(sel, 'click', callback, true);\n      Events.$bind(sel, 'contextmenu', function (ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (menu) {\n          Menu.create(menu, ev);\n        }\n      });\n\n      GUI.createDraggable(sel, {\n        data: {\n          position: idx\n        },\n        onStart: function onStart(ev, el) {\n          setTimeout(function () {\n            DOM.$addClass(el, 'Ghosting');\n          }, 1);\n        },\n        onEnd: function onEnd(ev, el) {\n          DOM.$removeClass(el, 'Ghosting');\n        }\n      });\n\n      this._$container.appendChild(sel);\n    }\n  }]);\n\n  return PanelItemButtons;\n}(_panelitem2.default);\n\nexports.default = PanelItemButtons;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nvar _panelitemdialog = __webpack_require__(14);\n\nvar _panelitemdialog2 = _interopRequireDefault(_panelitemdialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar DOM = OSjs.require('utils/dom');\nvar ExtendedDate = OSjs.require('helpers/date');\n\n/////////////////////////////////////////////////////////////////////////////\n// Clock Settings Dialog\n/////////////////////////////////////////////////////////////////////////////\n\nvar ClockSettingsDialog = function (_PanelDialog) {\n  _inherits(ClockSettingsDialog, _PanelDialog);\n\n  function ClockSettingsDialog(panelItem, scheme, closeCallback) {\n    _classCallCheck(this, ClockSettingsDialog);\n\n    return _possibleConstructorReturn(this, (ClockSettingsDialog.__proto__ || Object.getPrototypeOf(ClockSettingsDialog)).call(this, 'ClockSettingsDialog', {\n      title: 'Clock Settings',\n      icon: 'status/appointment-soon.png',\n      width: 400,\n      height: 280\n    }, panelItem._settings, scheme, closeCallback));\n  }\n\n  _createClass(ClockSettingsDialog, [{\n    key: 'init',\n    value: function init(wm, app) {\n      var root = _get(ClockSettingsDialog.prototype.__proto__ || Object.getPrototypeOf(ClockSettingsDialog.prototype), 'init', this).apply(this, arguments);\n      this._find('InputUseUTC').set('value', this._settings.get('utc'));\n      this._find('InputInterval').set('value', String(this._settings.get('interval')));\n      this._find('InputTimeFormatString').set('value', this._settings.get('format'));\n      this._find('InputTooltipFormatString').set('value', this._settings.get('tooltip'));\n      return root;\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings() {\n      this._settings.set('utc', this._find('InputUseUTC').get('value'));\n      this._settings.set('interval', parseInt(this._find('InputInterval').get('value'), 10));\n      this._settings.set('format', this._find('InputTimeFormatString').get('value'));\n      this._settings.set('tooltip', this._find('InputTooltipFormatString').get('value'), true);\n    }\n  }]);\n\n  return ClockSettingsDialog;\n}(_panelitemdialog2.default);\n\n/////////////////////////////////////////////////////////////////////////////\n// ITEM\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * PanelItem: Clock\n */\n\n\nvar PanelItemClock = function (_PanelItem) {\n  _inherits(PanelItemClock, _PanelItem);\n\n  function PanelItemClock(settings) {\n    _classCallCheck(this, PanelItemClock);\n\n    var _this2 = _possibleConstructorReturn(this, (PanelItemClock.__proto__ || Object.getPrototypeOf(PanelItemClock)).call(this, 'PanelItemClock corewm-panel-right', 'Clock', settings, {\n      utc: false,\n      interval: 1000,\n      format: 'H:i:s',\n      tooltip: 'l, j F Y'\n    }));\n\n    _this2.clockInterval = null;\n    _this2.$clock = null;\n    return _this2;\n  }\n\n  _createClass(PanelItemClock, [{\n    key: 'createInterval',\n    value: function createInterval() {\n      var _this3 = this;\n\n      var timeFmt = this._settings.get('format');\n      var tooltipFmt = this._settings.get('tooltip');\n\n      var update = function update() {\n        var clock = _this3.$clock;\n        if (clock) {\n          var now = new Date();\n          var t = ExtendedDate.format(now, timeFmt);\n          var d = ExtendedDate.format(now, tooltipFmt);\n          DOM.$empty(clock);\n          clock.appendChild(document.createTextNode(t));\n          clock.setAttribute('aria-label', String(t));\n          clock.title = d;\n        }\n        clock = null;\n      };\n\n      var create = function create(interval) {\n        clearInterval(_this3.clockInterval);\n        _this3.clockInterval = clearInterval(_this3.clockInterval);\n        _this3.clockInterval = setInterval(function () {\n          return update();\n        }, interval);\n      };\n\n      create(this._settings.get('interval'));\n      update();\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      var root = _get(PanelItemClock.prototype.__proto__ || Object.getPrototypeOf(PanelItemClock.prototype), 'init', this).apply(this, arguments);\n\n      this.$clock = document.createElement('span');\n      this.$clock.innerHTML = '00:00:00';\n      this.$clock.setAttribute('role', 'button');\n\n      var li = document.createElement('li');\n      li.appendChild(this.$clock);\n      this._$container.appendChild(li);\n\n      this.createInterval();\n\n      return root;\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings() {\n      this.createInterval();\n    }\n  }, {\n    key: 'openSettings',\n    value: function openSettings() {\n      return _get(PanelItemClock.prototype.__proto__ || Object.getPrototypeOf(PanelItemClock.prototype), 'openSettings', this).call(this, ClockSettingsDialog, {});\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.clockInterval = clearInterval(this.clockInterval);\n      this.$clock = DOM.$remove(this.$clock);\n      return _get(PanelItemClock.prototype.__proto__ || Object.getPrototypeOf(PanelItemClock.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }]);\n\n  return PanelItemClock;\n}(_panelitem2.default);\n\nexports.default = PanelItemClock;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Window = OSjs.require('core/window');\n\nvar PanelItemDialog = function (_Window) {\n  _inherits(PanelItemDialog, _Window);\n\n  function PanelItemDialog(name, args, settings, scheme, closeCallback) {\n    _classCallCheck(this, PanelItemDialog);\n\n    var _this = _possibleConstructorReturn(this, (PanelItemDialog.__proto__ || Object.getPrototypeOf(PanelItemDialog)).call(this, name, args, null));\n\n    _this._closeCallback = closeCallback || function () {};\n    _this._settings = settings;\n    _this._scheme = scheme;\n    return _this;\n  }\n\n  _createClass(PanelItemDialog, [{\n    key: 'init',\n    value: function init(wm, app) {\n      var _this2 = this;\n\n      var root = Window.prototype.init.apply(this, arguments);\n\n      this._render(this._name, this._scheme);\n\n      this._find('ButtonApply').on('click', function () {\n        _this2.applySettings();\n        _this2._close('ok');\n      });\n\n      this._find('ButtonCancel').on('click', function () {\n        _this2._close();\n      });\n\n      return root;\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings() {}\n  }, {\n    key: '_close',\n    value: function _close(button) {\n      this._closeCallback(button);\n      return _get(PanelItemDialog.prototype.__proto__ || Object.getPrototypeOf(PanelItemDialog.prototype), '_close', this).apply(this, arguments);\n    }\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      this._settings = null;\n      return _get(PanelItemDialog.prototype.__proto__ || Object.getPrototypeOf(PanelItemDialog.prototype), '_destroy', this).apply(this, arguments);\n    }\n  }]);\n\n  return PanelItemDialog;\n}(Window);\n\nexports.default = PanelItemDialog;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Menu = OSjs.require('gui/menu');\nvar DOM = OSjs.require('utils/dom');\nvar Events = OSjs.require('utils/events');\n\n/*eslint valid-jsdoc: \"off\"*/\n\n// NOTE: This is a workaround for resetting items on panel change\nvar _restartFix = {};\n\nvar NotificationAreaItem = function () {\n  function NotificationAreaItem(name, opts) {\n    _classCallCheck(this, NotificationAreaItem);\n\n    opts = opts || {};\n\n    this.name = name;\n    this.opts = opts;\n    this.$container = document.createElement('li');\n    this.$image = opts.image || opts.icon ? document.createElement('img') : null;\n    this.onCreated = opts.onCreated || function () {};\n    this.onInited = opts.onInited || function () {};\n    this.onDestroy = opts.onDestroy || function () {};\n    this.onClick = opts.onClick || function () {};\n    this.onContextMenu = opts.onContextMenu || function () {};\n\n    this._build(name);\n\n    this.onCreated();\n  }\n\n  _createClass(NotificationAreaItem, [{\n    key: '_build',\n    value: function _build(name) {\n      /* eslint no-invalid-this: \"off\" */\n      var classNames = ['NotificationArea', 'NotificationArea_' + name];\n      if (this.opts.className) {\n        classNames.push(this.opts.className);\n      }\n\n      this.$container.className = classNames.join(' ');\n      this.$container.setAttribute('role', 'button');\n      this.$container.setAttribute('aria-label', this.opts.title);\n\n      if (this.opts.tooltip) {\n        this.$container.title = this.opts.tooltip;\n      }\n\n      Events.$bind(this.$container, 'mousedown', function (ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n      });\n\n      var self = this;\n\n      Events.$bind(this.$container, 'click', function (ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        Menu.blur();\n        self.onClick.apply(this, arguments);\n        return false;\n      });\n\n      Events.$bind(this.$container, 'contextmenu', function (ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        Menu.blur();\n        self.onContextMenu.apply(this, arguments);\n        return false;\n      });\n\n      if (this.$image) {\n        this.$image.title = this.opts.title || '';\n        this.$image.src = this.opts.image || this.opts.icon || 'about:blank';\n        this.$container.appendChild(this.$image);\n      }\n\n      var inner = document.createElement('div');\n      inner.appendChild(document.createElement('div'));\n      this.$container.appendChild(inner);\n    }\n  }, {\n    key: 'init',\n    value: function init(root) {\n      root.appendChild(this.$container);\n\n      try {\n        this.onInited(this.$container, this.$image);\n      } catch (e) {\n        console.warn('NotificationAreaItem', 'onInited error');\n        console.warn(e, e.stack);\n      }\n    }\n  }, {\n    key: 'setIcon',\n    value: function setIcon(src) {\n      return this.setImage(src);\n    }\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      if (this.$image) {\n        this.$image.src = src;\n      }\n      this.opts.image = src;\n    }\n  }, {\n    key: 'setTitle',\n    value: function setTitle(title) {\n      if (this.$image) {\n        this.$image.title = title;\n      }\n      this.opts.title = title;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this.$container) {\n        Events.$unbind(this.$container, 'click');\n        Events.$unbind(this.$container, 'mousedown');\n        Events.$unbind(this.$container, 'contextmenu');\n      }\n      this.onDestroy();\n\n      this.$image = DOM.$remove(this.$image);\n      this.$container = DOM.$remove(this.$container);\n    }\n  }]);\n\n  return NotificationAreaItem;\n}();\n\nvar PanelItemNotificationArea = function (_PanelItem) {\n  _inherits(PanelItemNotificationArea, _PanelItem);\n\n  function PanelItemNotificationArea() {\n    _classCallCheck(this, PanelItemNotificationArea);\n\n    var _this = _possibleConstructorReturn(this, (PanelItemNotificationArea.__proto__ || Object.getPrototypeOf(PanelItemNotificationArea)).call(this, 'PanelItemNotificationArea corewm-panel-right'));\n\n    _this.notifications = {};\n    return _this;\n  }\n\n  _createClass(PanelItemNotificationArea, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      var root = _get(PanelItemNotificationArea.prototype.__proto__ || Object.getPrototypeOf(PanelItemNotificationArea.prototype), 'init', this).apply(this, arguments);\n      root.setAttribute('role', 'toolbar');\n\n      var fix = Object.keys(_restartFix);\n      if (fix.length) {\n        fix.forEach(function (k) {\n          _this2.createNotification(k, _restartFix[k]);\n        });\n      }\n\n      return root;\n    }\n  }, {\n    key: 'createNotification',\n    value: function createNotification(name, opts) {\n      if (this._$root) {\n        if (!this.notifications[name]) {\n          var item = new NotificationAreaItem(name, opts);\n          item.init(this._$container);\n          this.notifications[name] = item;\n          _restartFix[name] = opts;\n\n          return item;\n        }\n      }\n      return null;\n    }\n  }, {\n    key: 'removeNotification',\n    value: function removeNotification(name) {\n      if (this._$root) {\n        if (this.notifications[name]) {\n          this.notifications[name].destroy();\n          delete this.notifications[name];\n          if (_restartFix[name]) {\n            delete _restartFix[name];\n          }\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: 'getNotification',\n    value: function getNotification(name) {\n      if (this._$root) {\n        if (this.notifications[name]) {\n          return this.notifications[name];\n        }\n      }\n      return false;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      for (var i in this.notifications) {\n        if (this.notifications.hasOwnProperty(i)) {\n          if (this.notifications[i]) {\n            this.notifications[i].destroy();\n          }\n          delete this.notifications[i];\n        }\n      }\n\n      return _get(PanelItemNotificationArea.prototype.__proto__ || Object.getPrototypeOf(PanelItemNotificationArea.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }]);\n\n  return PanelItemNotificationArea;\n}(_panelitem2.default);\n\nexports.default = PanelItemNotificationArea;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar DOM = OSjs.require('utils/dom');\nvar Hooks = OSjs.require('helpers/hooks');\nvar Theme = OSjs.require('core/theme');\nvar Events = OSjs.require('utils/events');\nvar Locales = OSjs.require('core/locales');\nvar Keycodes = OSjs.require('utils/keycodes');\nvar Process = OSjs.require('core/process');\nvar FileMetadata = OSjs.require('vfs/file');\nvar SearchEngine = OSjs.require('core/search-engine');\nvar WindowManager = OSjs.require('core/window-manager');\n\nvar PanelItemSearch = function (_PanelItem) {\n  _inherits(PanelItemSearch, _PanelItem);\n\n  function PanelItemSearch(settings) {\n    _classCallCheck(this, PanelItemSearch);\n\n    var _this = _possibleConstructorReturn(this, (PanelItemSearch.__proto__ || Object.getPrototypeOf(PanelItemSearch)).call(this, 'PanelItemSearch corewm-panel-right', 'Search', settings, {}));\n\n    _this.$ul = null;\n    _this.$box = null;\n    _this.$input = null;\n\n    _this.$message = null;\n    _this.visible = false;\n    _this.hookId = -1;\n    _this.currentIndex = -1;\n    _this.currentCount = 0;\n    return _this;\n  }\n\n  _createClass(PanelItemSearch, [{\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      var root = _get(PanelItemSearch.prototype.__proto__ || Object.getPrototypeOf(PanelItemSearch.prototype), 'init', this).apply(this, arguments);\n\n      var img = document.createElement('img');\n      img.src = Theme.getIcon('actions/system-search.png');\n\n      var input = document.createElement('input');\n      input.setAttribute('type', 'text');\n\n      var guinput = document.createElement('gui-text');\n      guinput.appendChild(input);\n\n      var ul = document.createElement('ul');\n\n      this.$message = document.createElement('div');\n      this.$message.appendChild(document.createTextNode(Locales._('SEARCH_LOADING')));\n\n      this.$box = document.createElement('corewm-search');\n      this.$box.className = 'custom-notification';\n      this.$box.appendChild(guinput);\n      this.$box.appendChild(this.$message);\n      this.$box.appendChild(ul);\n\n      var self = this;\n      var keyEvents = {};\n      keyEvents[Keycodes.DOWN] = function () {\n        return _this2.navigateDown();\n      };\n      keyEvents[Keycodes.UP] = function () {\n        return _this2.navigateUp();\n      };\n      keyEvents[Keycodes.ESC] = function () {\n        return _this2.hide();\n      };\n      keyEvents[Keycodes.ENTER] = function (ev) {\n        if (this.value.length) {\n          self.search(this.value);\n          this.value = '';\n        } else {\n          self.navigateOpen();\n        }\n      };\n\n      Hooks.addHook('menuBlur', function () {\n        return _this2.hide();\n      });\n\n      Events.$bind(root, 'click', function (ev) {\n        ev.stopPropagation();\n\n        if (self.visible) {\n          self.hide();\n        } else {\n          self.show();\n        }\n      });\n\n      Events.$bind(input, 'mousedown', function (ev) {\n        return ev.stopPropagation();\n      });\n\n      Events.$bind(input, 'keydown', function (ev) {\n        /* eslint no-invalid-this: \"off\" */\n        if (keyEvents[ev.keyCode]) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          keyEvents[ev.keyCode].call(this, ev);\n        }\n      });\n\n      Events.$bind(ul, 'mousedown', function (ev) {\n        return ev.stopPropagation();\n      });\n\n      Events.$bind(ul, 'click', function (ev) {\n        var target = ev.target;\n        if (target.tagName === 'LI') {\n          self.launch(target);\n        }\n      });\n\n      Events.$bind(this.$box, 'mousedown', function () {\n        if (input) {\n          input.focus();\n        }\n      });\n\n      var li = document.createElement('li');\n      li.appendChild(img);\n\n      this.$ul = ul;\n      this.$input = input;\n      this._$container.appendChild(li);\n\n      document.body.appendChild(this.$box);\n\n      return root;\n    }\n  }, {\n    key: 'applySettings',\n    value: function applySettings() {}\n  }, {\n    key: 'openSettings',\n    value: function openSettings() {\n      Process.create('ApplicationSettings', { category: 'search' });\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this.hookId >= 0) {\n        Hooks.removeHook(this.hookId);\n      }\n\n      Events.$unbind(this._$root, 'click');\n      Events.$unbind(this.$input, 'mousedown');\n      Events.$unbind(this.$input, 'keydown');\n      Events.$unbind(this.$ul, 'mousedown');\n      Events.$unbind(this.$ul, 'click');\n      Events.$unbind(this.$box, 'mousedown');\n\n      this.$message = DOM.$remove(this.$message);\n      this.$input = DOM.$remove(this.$input);\n      this.$box = DOM.$remove(this.$box);\n      this.$ul = DOM.$remove(this.$ul);\n\n      return _get(PanelItemSearch.prototype.__proto__ || Object.getPrototypeOf(PanelItemSearch.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }, {\n    key: 'launch',\n    value: function launch(target) {\n      var launch = target.getAttribute('data-launch');\n      var args = JSON.parse(target.getAttribute('data-args'));\n      var file = target.getAttribute('data-file');\n      var mime = target.getAttribute('data-mime');\n      var type = target.getAttribute('data-type');\n\n      if (file) {\n        if (type === 'dir') {\n          Process.create('ApplicationFileManager', { path: file });\n        } else {\n          Process.createFromFile(new FileMetadata(file, mime));\n        }\n      } else {\n        Process.create(launch, args);\n      }\n\n      this.hide();\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      if (!this.$box || this.visible) {\n        return;\n      }\n\n      var wm = WindowManager.instance;\n      var space = wm.getWindowSpace(true);\n      var input = this.$box.querySelector('input');\n\n      DOM.$empty(this.$box.querySelector('ul'));\n      this.$box.style.marginTop = String(space.top) + 'px';\n      this.$box.setAttribute('data-visible', String(true));\n\n      if (input) {\n        input.value = '';\n        input.focus();\n      }\n      this.visible = true;\n\n      this.$message.style.display = 'none';\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      if (!this.$box || !this.visible) {\n        return;\n      }\n\n      this.$box.setAttribute('data-visible', String(false));\n      this.visible = false;\n    }\n  }, {\n    key: 'search',\n    value: function search(q) {\n      var _this3 = this;\n\n      if (!this.$box) {\n        return;\n      }\n\n      this.currentIndex = -1;\n      this.currentCount = 0;\n\n      DOM.$empty(this.$message);\n      this.$message.appendChild(document.createTextNode(Locales._('SEARCH_LOADING')));\n      this.$message.style.display = 'block';\n\n      SearchEngine.search(q, { limit: 10, recursive: true }).then(function (result) {\n        _this3.renderResult(result);\n      }).catch(function (errors) {\n        console.error('PanelItemSearch::search()', 'errors', errors);\n      });\n    }\n  }, {\n    key: 'renderResult',\n    value: function renderResult(list) {\n      if (!this.$box) {\n        return;\n      }\n\n      var root = this.$box.querySelector('ul');\n      DOM.$empty(root);\n\n      this.currentCount = list.length;\n\n      if (this.currentCount) {\n        this.$message.style.display = 'none';\n      } else {\n        DOM.$empty(this.$message);\n        this.$message.appendChild(document.createTextNode(Locales._('SEARCH_NO_RESULTS')));\n        this.$message.style.display = 'block';\n      }\n\n      list.forEach(function (l) {\n        var img = document.createElement('img');\n        img.src = l.icon;\n\n        var title = document.createElement('div');\n        title.className = 'Title';\n        title.appendChild(document.createTextNode(l.title));\n\n        var description = document.createElement('div');\n        description.className = 'Message';\n        description.appendChild(document.createTextNode(l.description));\n\n        var node = document.createElement('li');\n        node.setAttribute('data-launch', l.launch.application);\n        node.setAttribute('data-args', JSON.stringify(l.launch.args));\n        if (l.launch.file) {\n          node.setAttribute('data-file', l.launch.file.path);\n          node.setAttribute('data-mime', l.launch.file.mime);\n          node.setAttribute('data-type', l.launch.file.type);\n        }\n\n        node.appendChild(img);\n        node.appendChild(title);\n        node.appendChild(description);\n        root.appendChild(node);\n      });\n    }\n  }, {\n    key: 'updateSelection',\n    value: function updateSelection() {\n      var root = this.$box.querySelector('ul');\n      var child = root.children[this.currentIndex];\n\n      root.querySelectorAll('li').forEach(function (el) {\n        DOM.$removeClass(el, 'active');\n      });\n\n      DOM.$addClass(child, 'active');\n    }\n  }, {\n    key: 'navigateUp',\n    value: function navigateUp() {\n      if (!this.currentCount) {\n        return;\n      }\n\n      if (this.currentIndex > 0) {\n        this.currentIndex--;\n      } else {\n        this.currentIndex = this.currentCount - 1;\n      }\n\n      this.updateSelection();\n    }\n  }, {\n    key: 'navigateDown',\n    value: function navigateDown() {\n      if (!this.currentCount) {\n        return;\n      }\n\n      if (this.currentIndex < 0 || this.currentIndex >= this.currentCount - 1) {\n        this.currentIndex = 0;\n      } else {\n        this.currentIndex++;\n      }\n\n      this.updateSelection();\n    }\n  }, {\n    key: 'navigateOpen',\n    value: function navigateOpen() {\n      if (this.currentIndex === -1 || !this.currentCount) {\n        return;\n      }\n\n      var root = this.$box.querySelector('ul');\n      var child = root.children[this.currentIndex];\n      if (child) {\n        this.launch(child);\n      }\n    }\n  }]);\n\n  return PanelItemSearch;\n}(_panelitem2.default);\n\nexports.default = PanelItemSearch;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar DOM = OSjs.require('utils/dom');\nvar Utils = OSjs.require('utils/misc');\nvar Theme = OSjs.require('core/theme');\nvar Events = OSjs.require('utils/events');\nvar Connection = OSjs.require('core/connection');\n\nvar PanelItemWeather = function (_PanelItem) {\n  _inherits(PanelItemWeather, _PanelItem);\n\n  function PanelItemWeather() {\n    _classCallCheck(this, PanelItemWeather);\n\n    var _this = _possibleConstructorReturn(this, (PanelItemWeather.__proto__ || Object.getPrototypeOf(PanelItemWeather)).call(this, 'PanelItemWeather corewm-panel-right corewm-panel-dummy'));\n\n    _this.clockInterval = null;\n    _this.position = null;\n    _this.interval = null;\n    _this.$element = null;\n    _this.$image = null;\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function (pos) {\n        _this.position = pos;\n        setTimeout(function () {\n          return _this.updateWeather();\n        }, 100);\n      });\n    }\n    return _this;\n  }\n\n  _createClass(PanelItemWeather, [{\n    key: 'init',\n    value: function init() {\n      var root = _get(PanelItemWeather.prototype.__proto__ || Object.getPrototypeOf(PanelItemWeather.prototype), 'init', this).apply(this, arguments);\n      this.$element = document.createElement('li');\n      this.$image = document.createElement('img');\n      this.$element.appendChild(this.$image);\n      this._$container.appendChild(this.$element);\n      this.updateWeather();\n      return root;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      Events.$unbind(this._$root, 'click');\n      this.interval = clearInterval(this.interval);\n      this.$image = DOM.$remove(this.$image);\n      this.$element = DOM.$remove(this.$element);\n\n      return _get(PanelItemWeather.prototype.__proto__ || Object.getPrototypeOf(PanelItemWeather.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }, {\n    key: 'updateWeather',\n    value: function updateWeather() {\n      var _this2 = this;\n\n      if (!this.$image) {\n        return;\n      }\n\n      this.$image.title = 'Not allowed or unavailable';\n\n      var busy = false;\n\n      var setImage = function setImage(src) {\n        if (_this2.$image) {\n          _this2.$image.src = src;\n        }\n      };\n\n      var setWeather = function setWeather(name, weather, main) {\n        if (!_this2.$image) {\n          return;\n        }\n\n        name = name || '<unknown location>';\n        weather = weather || {};\n        main = main || {};\n\n        var desc = weather.description || '<unknown weather>';\n        var temp = main.temp || '<unknown temp>';\n        if (main.temp) {\n          temp += 'C';\n        }\n        var icon = 'sunny.png';\n\n        switch (desc) {\n          case 'clear sky':\n            if (weather.icon === '01n') {\n              icon = 'weather-clear-night.png';\n            } else {\n              icon = 'weather-clear.png';\n            }\n            break;\n          case 'few clouds':\n            if (weather.icon === '02n') {\n              icon = 'weather-few-clouds-night.png';\n            } else {\n              icon = 'weather-few-clouds.png';\n            }\n            break;\n          case 'scattered clouds':\n          case 'broken clouds':\n            icon = 'weather-overcast.png';\n            break;\n          case 'shower rain':\n            icon = 'weather-showers.png';\n            break;\n          case 'rain':\n            icon = 'weather-showers-scattered.png';\n            break;\n          case 'thunderstorm':\n            icon = 'stock_weather-storm.png';\n            break;\n          case 'snow':\n            icon = 'stock_weather-snow.png';\n            break;\n          case 'mist':\n            icon = 'stock_weather-fog.png';\n            break;\n          default:\n            if (desc.match(/rain$/)) {\n              icon = 'weather-showers-scattered.png';\n            }\n            break;\n        }\n\n        var src = Theme.getIcon('status/' + icon);\n        _this2.$image.title = Utils.format('{0} - {1} - {2}', name, desc, temp);\n        setImage(src);\n      };\n\n      var updateWeather = function updateWeather() {\n        if (busy || !_this2.position) {\n          return;\n        }\n        busy = true;\n\n        var lat = _this2.position.coords.latitude;\n        var lon = _this2.position.coords.longitude;\n        var unt = 'metric';\n        var key = '4ea33327bcfa4ea0293b2d02b6fda385';\n        var url = Utils.format('http://api.openweathermap.org/data/2.5/weather?lat={0}&lon={1}&units={2}&APPID={3}', lat, lon, unt, key);\n\n        Connection.request('curl', {\n          url: url\n        }).then(function (response) {\n          if (response) {\n            var result = null;\n            try {\n              result = JSON.parse(response.body);\n            } catch (e) {}\n\n            if (result) {\n              setWeather(result.name, result.weather ? result.weather[0] : null, result.main);\n            }\n          }\n\n          busy = false;\n        }).catch(function () {\n          busy = false;\n        });\n      };\n\n      setImage(Theme.getIcon('status/weather-severe-alert.png'));\n\n      this.interval = setInterval(function () {\n        updateWeather();\n      }, 60 * 60 * 1000);\n\n      Events.$bind(this._$root, 'click', function () {\n        return updateWeather();\n      });\n      setTimeout(function () {\n        return updateWeather();\n      }, 1000);\n    }\n  }]);\n\n  return PanelItemWeather;\n}(_panelitem2.default);\n\nexports.default = PanelItemWeather;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * OS.js - JavaScript Cloud/Web Desktop Platform\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Redistribution and use in source and binary forms, with or without\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * modification, are permitted provided that the following conditions are met:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 1. Redistributions of source code must retain the above copyright notice, this\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    list of conditions and the following disclaimer.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 2. Redistributions in binary form must reproduce the above copyright notice,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    this list of conditions and the following disclaimer in the documentation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *    and/or other materials provided with the distribution.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author  Anders Evenrud <andersevenrud@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @licence Simplified BSD License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n/*eslint valid-jsdoc: \"off\"*/\n\n\nvar _panelitem = __webpack_require__(0);\n\nvar _panelitem2 = _interopRequireDefault(_panelitem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GUI = OSjs.require('utils/gui');\nvar DOM = OSjs.require('utils/dom');\nvar Events = OSjs.require('utils/events');\nvar WindowManager = OSjs.require('core/window-manager');\n\nvar WindowListEntry = function () {\n  function WindowListEntry(win, className) {\n    _classCallCheck(this, WindowListEntry);\n\n    var el = document.createElement('li');\n    el.className = className;\n    el.title = win._title;\n    el.setAttribute('role', 'button');\n    el.setAttribute('aria-label', win._title);\n\n    var img = document.createElement('img');\n    img.alt = win._title;\n    img.src = win._icon;\n\n    var span = document.createElement('span');\n    span.appendChild(document.createTextNode(win._title));\n\n    el.appendChild(img);\n    el.appendChild(span);\n\n    Events.$bind(el, 'click', function () {\n      win._restore(false, true);\n    });\n\n    Events.$bind(el, 'contextmenu', function (ev) {\n      /* eslint no-invalid-this: \"off\" */\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      if (win) {\n        win._onWindowIconClick(ev, this);\n      }\n\n      return false;\n    });\n\n    var peeking = false;\n    GUI.createDroppable(el, {\n      onDrop: function onDrop(ev, el) {\n        if (win) {\n          win._focus();\n        }\n      },\n      onLeave: function onLeave() {\n        if (peeking) {\n          peeking = false;\n        }\n      },\n      onEnter: function onEnter(ev, inst, args) {\n        if (!peeking) {\n          if (win) {\n            win._focus();\n          }\n          peeking = true;\n        }\n      },\n      onItemDropped: function onItemDropped(ev, el, item, args) {\n        if (win) {\n          return win._onDndEvent(ev, 'itemDrop', item, args);\n        }\n        return false;\n      },\n      onFilesDropped: function onFilesDropped(ev, el, files, args) {\n        if (win) {\n          return win._onDndEvent(ev, 'filesDrop', files, args);\n        }\n        return false;\n      }\n    });\n\n    if (win._state.focused) {\n      el.className += ' Focused';\n    }\n\n    this.$element = el;\n    this.id = win._wid;\n  }\n\n  _createClass(WindowListEntry, [{\n    key: 'destroy',\n    value: function destroy() {\n      if (this.$element) {\n        Events.$unbind(this.$element, 'click');\n        Events.$unbind(this.$element, 'contextmenu');\n        this.$element = DOM.$remove(this.$element);\n      }\n    }\n  }, {\n    key: 'event',\n    value: function event(ev, win, parentEl) {\n      var cn = 'WindowList_Window_' + win._wid;\n\n      function _change(cn, callback) {\n        var els = parentEl.getElementsByClassName(cn);\n        if (els.length) {\n          for (var i = 0, l = els.length; i < l; i++) {\n            if (els[i] && els[i].parentNode) {\n              callback(els[i]);\n            }\n          }\n        }\n      }\n\n      if (ev === 'focus') {\n        _change(cn, function (el) {\n          el.className += ' Focused';\n        });\n      } else if (ev === 'blur') {\n        _change(cn, function (el) {\n          el.className = el.className.replace(/\\s?Focused/, '');\n        });\n      } else if (ev === 'title') {\n        _change(cn, function (el) {\n          el.setAttribute('aria-label', win._title);\n\n          var span = el.getElementsByTagName('span')[0];\n          if (span) {\n            DOM.$empty(span);\n            span.appendChild(document.createTextNode(win._title));\n          }\n          var img = el.getElementsByTagName('img')[0];\n          if (img) {\n            img.alt = win._title;\n          }\n        });\n      } else if (ev === 'icon') {\n        _change(cn, function (el) {\n          el.getElementsByTagName('img')[0].src = win._icon;\n        });\n      } else if (ev === 'attention_on') {\n        _change(cn, function (el) {\n          if (!el.className.match(/Attention/)) {\n            el.className += ' Attention';\n          }\n        });\n      } else if (ev === 'attention_off') {\n        _change(cn, function (el) {\n          if (!el.className.match(/Attention/)) {\n            el.className = el.className.replace(/\\s?Attention/, '');\n          }\n        });\n      } else if (ev === 'close') {\n        return false;\n      }\n\n      return true;\n    }\n  }]);\n\n  return WindowListEntry;\n}();\n\nvar PanelItemWindowList = function (_PanelItem) {\n  _inherits(PanelItemWindowList, _PanelItem);\n\n  function PanelItemWindowList() {\n    _classCallCheck(this, PanelItemWindowList);\n\n    var _this = _possibleConstructorReturn(this, (PanelItemWindowList.__proto__ || Object.getPrototypeOf(PanelItemWindowList)).call(this, 'PanelItemWindowList corewm-panel-expand'));\n\n    _this.entries = [];\n    return _this;\n  }\n\n  _createClass(PanelItemWindowList, [{\n    key: 'init',\n    value: function init() {\n      var root = _get(PanelItemWindowList.prototype.__proto__ || Object.getPrototypeOf(PanelItemWindowList.prototype), 'init', this).apply(this, arguments);\n\n      var wm = WindowManager.instance;\n      if (wm) {\n        var wins = wm.getWindows();\n        for (var i = 0; i < wins.length; i++) {\n          if (wins[i]) {\n            this.update('create', wins[i]);\n          }\n        }\n      }\n\n      return root;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.entries.forEach(function (e) {\n        try {\n          e.destroy();\n        } catch (e) {}\n        e = null;\n      });\n\n      this.entries = [];\n\n      return _get(PanelItemWindowList.prototype.__proto__ || Object.getPrototypeOf(PanelItemWindowList.prototype), 'destroy', this).apply(this, arguments);\n    }\n  }, {\n    key: 'update',\n    value: function update(ev, win) {\n      if (!this._$container || win && win._properties.allow_windowlist === false) {\n        return;\n      }\n\n      var entry = null;\n      if (ev === 'create') {\n        var className = 'corewm-panel-ellipsis WindowList_Window_' + win._wid;\n        if (this._$container.getElementsByClassName(className).length) {\n          return;\n        }\n\n        entry = new WindowListEntry(win, className);\n        this.entries.push(entry);\n        this._$container.appendChild(entry.$element);\n      } else {\n        var found = -1;\n        this.entries.forEach(function (e, idx) {\n          if (e.id === win._wid) {\n            found = idx;\n          }\n          return found !== -1;\n        });\n\n        entry = this.entries[found];\n        if (entry) {\n          if (entry.event(ev, win, this._$container) === false) {\n            entry.destroy();\n\n            this.entries.splice(found, 1);\n          }\n        }\n      }\n    }\n  }]);\n\n  return PanelItemWindowList;\n}(_panelitem2.default);\n\nexports.default = PanelItemWindowList;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<application-window data-id=\\\"ClockSettingsDialog\\\"> <gui-vbox> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>Time Format String:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputTimeFormatString\\\">H:i:s</gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>Tooltip Format String:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputTooltipFormatString\\\">l, j F Y</gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>Interval:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-select data-id=\\\"InputInterval\\\"> <gui-select-option data-value=\\\"1000\\\">1 second</gui-select-option> <gui-select-option data-value=\\\"60000\\\">1 minute</gui-select-option> <gui-select-option data-value=\\\"3600000\\\">1 hour</gui-select-option> </gui-select> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>UTC Time:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-checkbox data-id=\\\"InputUseUTC\\\"></gui-checkbox> </gui-vbox-container> <gui-vbox-container data-shrink=\\\"1\\\" data-align=\\\"end\\\"> <gui-hbox> <gui-hbox-container data-grow=\\\"0\\\" data-shrink=\\\"1\\\"> <gui-button data-id=\\\"ButtonApply\\\">Apply</gui-button> <gui-button data-id=\\\"ButtonCancel\\\">Cancel</gui-button> </gui-hbox-container> </gui-hbox> </gui-vbox-container> </gui-vbox></application-window><application-window data-id=\\\"IconViewShortcutDialog\\\"> <gui-vbox> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\"> <gui-label>Launch:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputShortcutLaunch\\\">ApplicationClassName</gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\"> <gui-label>Label:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputShortcutLabel\\\"></gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\"> <gui-label>Launch arguments:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputTooltipFormatString\\\"></gui-text> </gui-vbox-container> <gui-vbox-container data-shrink=\\\"1\\\" data-align=\\\"end\\\"> <gui-hbox> <gui-hbox-container data-grow=\\\"0\\\" data-shrink=\\\"1\\\"> <gui-button data-id=\\\"ButtonApply\\\">Apply</gui-button> <gui-button data-id=\\\"ButtonCancel\\\">Cancel</gui-button> </gui-hbox-container> </gui-hbox> </gui-vbox-container> </gui-vbox></application-window>\";\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1e3d08cec60d4d919272","import Translations from './locales';\n\nconst _ = OSjs.require('core/locales').createLocalizer(Translations);\nconst Menu = OSjs.require('gui/menu');\nconst DOM = OSjs.require('utils/dom');\nconst Events = OSjs.require('utils/events');\nconst SettingsFragment = OSjs.require('helpers/settings-fragment');\nconst WindowManager = OSjs.require('core/window-manager');\n\nexport default class PanelItem {\n  static metadata() {\n    return {\n      name: 'PanelItem',\n      description: 'PanelItem Description',\n      icon: 'actions/stock_about.png',\n      hasoptions: false\n    };\n  }\n\n  constructor(className, itemName, settings, defaults) {\n    this._$root = null;\n    this._$container = null;\n    this._className = className || 'Unknown';\n    this._itemName = itemName || className.split(' ')[0];\n    this._settings = null;\n    this._settingsDialog = null;\n\n    if ( settings && (settings instanceof SettingsFragment) && defaults ) {\n      this._settings = settings.mergeDefaults(defaults);\n    }\n  }\n\n  init() {\n    this._$root = document.createElement('corewm-panel-item');\n    this._$root.className = this._className;\n\n    this._$container = document.createElement('ul');\n    this._$container.setAttribute('role', 'toolbar');\n    this._$container.className = 'corewm-panel-buttons';\n\n    if ( this._settings ) {\n      var title = _('Open {0} Settings', _(this._itemName));\n      Events.$bind(this._$root, 'contextmenu', (ev) => {\n        ev.stopPropagation();\n        ev.preventDefault();\n\n        Menu.create([{\n          title: title,\n          onClick: () => this.openSettings()\n        }], ev);\n      });\n    }\n\n    this._$root.appendChild(this._$container);\n\n    return this._$root;\n  }\n\n  destroy() {\n    if ( this._settingsDialog ) {\n      this._settingsDialog.destroy();\n    }\n\n    Events.$unbind(this._$root, 'contextmenu');\n\n    this._settingsDialog = null;\n    this._$root = DOM.$remove(this._$root);\n    this._$container = DOM.$remove(this._$container);\n  }\n\n  applySettings() {\n  }\n\n  openSettings(DialogRef, args) {\n    if ( this._settingsDialog ) {\n      this._settingsDialog._restore();\n      return false;\n    }\n\n    var wm = WindowManager.instance;\n\n    if ( DialogRef ) {\n      this._settingsDialog = new DialogRef(this, wm._scheme, (button) => {\n        if ( button === 'ok' ) {\n          this.applySettings();\n        }\n        this._settingsDialog = null;\n      });\n\n      wm.addWindow(this._settingsDialog, true);\n    }\n\n    return true;\n  }\n\n  getRoot() {\n    return this._$root;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitem.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport default {\n  bg_BG: {\n    'Killing this process will stop things from working!': 'Прекратяването на този процес ще спре някой приложения!',\n    'Open settings': 'Отвори настойки',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Вашият панел няма обекти. Отидете в настойки за да върнете по подразбиране или да модифицирате ръчно\\n(Тази грешка може да се появи след актуализация на OS.js)',\n    'Create shortcut': 'Създай пряк път',\n    'Set as wallpaper': 'Направи изображение за фон',\n    'An error occured while creating PanelItem: {0}': 'Появи се грешка докато се създаваше панелен обект: {0}',\n\n    'Development': 'Разработка',\n    'Education': 'Образование',\n    'Games': 'Игри',\n    'Graphics': 'Графика',\n    'Network': 'Мрежа',\n    'Multimedia': 'Мултимедия',\n    'Office': 'Офис',\n    'System': 'Система',\n    'Utilities': 'Инструменти',\n    'Other': 'Други'\n  },\n  de_DE: {\n    'Killing this process will stop things from working!': 'Das Beenden dieses Prozesses wird Konsequenzen haben!',\n    'Open settings': 'Einstellungen öffnen',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Ihr Panel enthält keine Items. Öffnen Sie die Einstellungen um die Panel-Einstellungen zurückzusetzen oder manuell zu ändern (Dieser Fehler kann nach einem Upgrade von OS.js entstehen)',\n    'Create shortcut': 'Verknüpfung erstellen',\n    'Set as wallpaper': 'Als Hintergrund verwenden',\n    'An error occured while creating PanelItem: {0}': 'Während des Erstellens eines Panel-Items ist folgender Fehler aufgetreten: {0}',\n\n    'Development': 'Entwicklung',\n    'Education': 'Bildung',\n    'Games': 'Spiele',\n    'Graphics': 'Grafik',\n    'Network': 'Netzwerk',\n    'Multimedia': 'Multimedia',\n    'Office': 'Büro',\n    'System': 'System',\n    'Utilities': 'Zubehör',\n    'Other': 'Andere'\n  },\n  es_ES: {\n    'Killing this process will stop things from working!': '¡Forzar la terminación de este proceso hará que las cosas dejen de funcionar!',\n    'Open settings': 'Abrir preferencias',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Tu panel no tiene elementos. Restablece los valores por defecto en las preferencias, o modifícalo manualmente\\n(Este error puede aparecer tras una actualización de OS.js)',\n    'Create shortcut': 'Crear acceso directo',\n    'Set as wallpaper': 'Seleccionar como fondo de pantalla',\n    'An error occured while creating PanelItem: {0}': 'Se produjo un error al crear el PanelItem: {0}',\n\n    'Development': 'Desarrollo',\n    'Education': 'Educación',\n    'Games': 'Juegos',\n    'Graphics': 'Gráficos',\n    'Network': 'Red',\n    'Multimedia': 'Multimedia',\n    'Office': 'Ofimática',\n    'System': 'Sistema',\n    'Utilities': 'Herramientas',\n    'Other': 'Otros'\n  },\n  fr_FR: {\n    'Killing this process will stop things from working!': 'Tuer ce processus va arrêter d\\'autres éléments de fonctionner !',\n    'Open settings': 'Ouvrir les paramètres',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Votre panneau n\\'a aucun objet. Rendez-vous dans les paramètres pour remettre à zéro ou modifier manuellement\\n(Cette erreur peut survenir après avori mis à jour OS.js)',\n    'Create shortcut': 'Créer un raccourci',\n    'Set as wallpaper': 'Définir un fond d\\'écran',\n    'An error occured while creating PanelItem: {0}': 'Une erreur est survenue pendant la création du PanelItem: {0}',\n    'Show Icons': 'Afficher les icônes',\n    'Hide Icons': 'Cacher les icônes',\n\n    'Development': 'Développement',\n    'Education': 'Éducation',\n    'Games': 'Jeux',\n    'Graphics': 'Graphique',\n    'Network': 'Réseau',\n    'Multimedia': 'Multimédia',\n    'Office': 'Bureautique',\n    'System': 'Système',\n    'Utilities': 'Utilitaires',\n    'Other': 'Autre'\n  },\n  ar_DZ: {\n    'Killing this process will stop things from working!': 'إنهاء هذا البرنامج سيوقف الأشياء عن العمل',\n    'Open settings': 'فتح الإعدادات',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'لايوجد أي شيء في لوحتك، إذهب إلى إعدادات وقم بإستعادة الأشياء إلى الحالة الإفتراضية أو غيرها يدويا (يحدث هذا أحيانا عند تحديث الـ OS.js)',\n    'Create shortcut': 'إنشاء إختصار',\n    'Set as wallpaper': 'وضع كخلفية سطح المكتب',\n    'An error occured while creating PanelItem: {0}': 'حدث خطأ أثناء إنشاء عنصر في اللوحة: {0}',\n    'Show Icons': 'إظهار الأيقونات',\n    'Hide Icons': 'إخفاء الأيقونات',\n\n    'Development': 'تطوير',\n    'Education': 'تعليم',\n    'Games': 'ألعاب',\n    'Graphics': 'رسومات',\n    'Network': 'شبكة',\n    'Multimedia': 'تعدد الوسائط',\n    'Office': 'مكتبيات',\n    'System': 'نظام',\n    'Utilities': 'أدوات',\n    'Other': 'أخرى'\n  },\n  it_IT: {\n    'Killing this process will stop things from working!': 'Terminare questo processo bloccherà altre funzionalità!',\n    'Open settings': 'Apri settaggi',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Il tuo pannello non ha elementi. Vai nei settaggi per resettare ai valori predefiniti o modificarli manualmente\\n(Questo errore può accadere dopo un aggiornamento di OS.js)',\n    'Create shortcut': 'Crea colelgamento',\n    'Set as wallpaper': 'Imposta come sfondo desktop',\n    'An error occured while creating PanelItem: {0}': 'Si è verificato un errore nella creazione del PanelItem: {0}',\n    'Show Icons': 'Mostra icone',\n    'Hide Icons': 'Nascondi icone',\n\n    'Development': 'Sviluppo',\n    'Education': 'Educazione',\n    'Games': 'Giochi',\n    'Graphics': 'Grafica',\n    'Network': 'Reti',\n    'Multimedia': 'Multimedia',\n    'Office': 'Ufficio',\n    'System': 'Sistema',\n    'Utilities': 'Utilità',\n    'Other': 'Altro'\n  },\n  ko_KR: {\n    'Killing this process will stop things from working!': '이 프로세스를 종료 할 시 작업 중인 것들이 종료됩니다!',\n    'Open settings': '환경설정 열기',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': '패널에 항목이 없습니다. 환경설정에서 초기화하거나 직접 수정하여 주십시오.\\n(이 오류는 OS.js의 업그레이드 후 발생하는 문제일 수도 있습니다)',\n    'Create shortcut': '단축키 생성',\n    'Set as wallpaper': '바탕화면으로 지정',\n    'An error occured while creating PanelItem: {0}': '해당 패널 항목 생성 중 오류가 발생 하였습니다: {0}',\n\n    'Development': '개발',\n    'Education': '교육',\n    'Games': '게임',\n    'Graphics': '그래픽',\n    'Network': '네트워크',\n    'Multimedia': '멀티미디어',\n    'Office': '오피스',\n    'System': '시스템',\n    'Utilities': '유틸리티',\n    'Other': '기타'\n  },\n  nl_NL: {\n    'Killing this process will stop things from working!': 'Het stoppen van dit proces zal er voor zorgen dat dingen niet meer werken!',\n    'Open settings': 'Instellingen openen',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Het paneel bevat geen items. Ga naar instellingen om te herstellen naar de standaard of om handmatig te wijzigen\\n(Deze fout kan het gevolg zijn van een update van OS.js)',\n    'Create shortcut': 'Maak een link',\n    'Set as wallpaper': 'Als achtergrond gebruiken',\n    'An error occured while creating PanelItem: {0}': 'Er is een fout opgetreden tijdens het maken van paneel item: {0}',\n\n    'Development': 'Ontwikkeling',\n    'Education': 'Educatie',\n    'Games': 'Spellen',\n    'Graphics': 'Grafisch',\n    'Network': 'Netwerk',\n    'Multimedia': 'Multimedia',\n    'Office': 'Kantoor',\n    'System': 'Systeem',\n    'Utilities': 'Toebehoren',\n    'Other': 'Overig'\n  },\n  no_NO: {\n    'Killing this process will stop things from working!': 'Dreping av denne prosessen vil få konsekvenser!',\n    'Open settings': 'Åpne instillinger',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Ditt panel har ingen objekter. Gå til instillinger for å nullstille eller modifisere manuelt\\n(Denne feilen kan oppstå etter en oppdatering av OS.js)',\n    'Create shortcut': 'Lag snarvei',\n    'Set as wallpaper': 'Sett som bakgrunn',\n    'An error occured while creating PanelItem: {0}': 'En feil oppstod under lasting av PanelItem: {0}',\n    'Show Icons': 'Vis Ikoner',\n    'Hide Icons': 'Skjul Ikoner',\n    'Create in {0}': 'Opprett i {0}',\n\n    'Development': 'Utvikling',\n    'Education': 'Utdanning',\n    'Games': 'Spill',\n    'Graphics': 'Grafikk',\n    'Network': 'Nettverk',\n    'Multimedia': 'Multimedia',\n    'Office': 'Kontor',\n    'System': 'System',\n    'Utilities': 'Verktøy',\n    'Other': 'Andre'\n  },\n  pl_PL: {\n    'Killing this process will stop things from working!': 'Zabicie tego procesu zatrzyma wykonywanie działań!',\n    'Open settings': 'Otwórz ustawienia',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Twój panel nie ma elementów. Idź do ustawień aby przywrócić domyślne lub zmień ręcznie\\n(Ten błąd może wystąpić po aktualizacji OS.js)',\n    'Create shortcut': 'Utwórz skrót',\n    'Set as wallpaper': 'Ustaw jako tapetę',\n    'An error occured while creating PanelItem: {0}': 'Wystąpił błąd podczas tworzenia PanelItem: {0}',\n    'Show Icons': 'Pokaż Ikony',\n    'Hide Icons': 'Ukryj Ikony',\n\n    'Development': 'Development',\n    'Education': 'Edukacja',\n    'Games': 'Gry',\n    'Graphics': 'Graficzne',\n    'Network': 'Sieć',\n    'Multimedia': 'Multimedia',\n    'Office': 'Biuro',\n    'System': 'System',\n    'Utilities': 'Użytkowe',\n    'Other': 'Inne'\n  },\n  ru_RU: {\n    'Killing this process will stop things from working!': 'Завершение этого процесса остановит работу системы!',\n    'Open settings': 'Открыть настройки',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'На вашей панели отсутствуют элементы. Откройте настройки для сброса панели к начальному состоянию или ручной настройки\\n(Эта ошибка может произойти после обновления OS.js)',\n    'Create shortcut': 'Создать ярлык',\n    'Set as wallpaper': 'Установить как обои',\n    'An error occured while creating PanelItem: {0}': 'Произошла обшибка при создании PanelItem: {0}',\n\n    'Development': 'Разработка',\n    'Education': 'Образование',\n    'Games': 'Игры',\n    'Graphics': 'Графика',\n    'Network': 'Интернет',\n    'Multimedia': 'Мультимедиа',\n    'Office': 'Офис',\n    'System': 'Система',\n    'Utilities': 'Утилиты',\n    'Other': 'Другое'\n  },\n  sk_SK: {\n    'Open settings': 'Otvor nastavenia',\n    'Create shortcut': 'Vytvor linku',\n    'Set as wallpaper': 'Nastav ako tapetu',\n    'An error occured while creating PanelItem: {0}': 'Chyba pri vytváraní položky: {0}',\n\n    'Development': 'Vývoj',\n    'Education': 'Vzdelávanie',\n    'Games': 'Hry',\n    'Graphics': 'Grafika',\n    'Network': 'Sieť',\n    'Multimedia': 'Multimédiá',\n    'Office': 'Kancelária',\n    'System': 'Systém',\n    'Utilities': 'Pomôcky',\n    'Other': 'Ostatné'\n  },\n  tr_TR: {\n    'Open settings': 'Ayarları Aç',\n    'Create shortcut': 'Kısayol Oluştur',\n    'Set as wallpaper': 'Arkaplan olarak ayarla',\n    'An error occured while creating PanelItem: {0}': '{0} oluşturulurken bir hata meydana geldi',\n\n    'Development': 'Geliştirici',\n    'Education': 'Eğitim',\n    'Games': 'Oyunlar',\n    'Graphics': 'Grafikler',\n    'Network': 'Ağ',\n    'Multimedia': 'Multimedia',\n    'Office': 'Ofis',\n    'System': 'Sistem',\n    'Utilities': 'Yan Gereksinimler',\n    'Other': 'Diğer'\n  },\n  vi_VN: {\n    'Killing this process will stop things from working!': 'Đóng quá trình này sẽ làm mọi thứ bị tắt!',\n    'Open settings': 'Mở cài đặt',\n    'Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)': 'Bảng điều khiển của bạn không có mục nào. Vào cài đặt để thiết lập lại mặc định hoặc sửa đổi bằng tay\\n(Lỗi này có thể xảy ra sau khi nâng cấp OS.js)',\n    'Create shortcut': 'Tạo lối tắt',\n    'Set as wallpaper': 'Đặt làm hình nền',\n    'An error occured while creating PanelItem: {0}': 'Có lỗi xảy ra trong khi tạo PanelItem: {0}',\n    'Show Icons': 'Hiện các biểu tượng',\n    'Hide Icons': 'Ẩn các biểu tượng',\n    'Create in {0}': 'Tạo trong {0}',\n\n    'Development': 'Phát triển',\n    'Education': 'Giáo dục',\n    'Games': 'Trò chơi',\n    'Graphics': 'Đồ họa',\n    'Network': 'Mạng',\n    'Multimedia': 'Đa phương tiện',\n    'Office': 'Văn phòng',\n    'System': 'Hệ thống',\n    'Utilities': 'Tiện ích',\n    'Other': 'Khác'\n  }\n\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./locales.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport Translations from './locales';\n\nconst _ = OSjs.require('core/locales').createLocalizer(Translations);\nconst Menu = OSjs.require('gui/menu');\nconst DOM = OSjs.require('utils/dom');\nconst Utils = OSjs.require('utils/misc');\nconst Events = OSjs.require('utils/events');\nconst WindowManager = OSjs.require('core/window-manager');\n\n/////////////////////////////////////////////////////////////////////////////\n// DEFAULTS\n/////////////////////////////////////////////////////////////////////////////\n\nconst MIN_WIDTH = 64;\nconst MIN_HEIGHT = 64;\n\nconst TIMEOUT_SAVE = 500;\nconst TIMEOUT_SHOW_ENVELOPE = 3000;\nconst TIMEOUT_HIDE_ENVELOPE = 1000;\n\nconst DEFAULT_OPTIONS = {\n  aspect: false, // true for automatic aspect based on width\n  width: 100,\n  height: 100,\n  minWidth: MIN_WIDTH,\n  minHeight: MIN_HEIGHT,\n  maxHeight: 500,\n  maxWidth: 500,\n  left: 0,\n  right: null,\n  top: 0,\n  bottom: null,\n  locked: false,\n  canvas: false,\n  resizable: false,\n  viewBox: false, // x y w h or 'true'\n  frequency: 2, // FPS for canvas\n  custom: {\n    // Used for widget-spesific styles etc\n  },\n  settings: {\n    enabled: false,\n    name: 'CoreWMWidgetSettingsWindow',\n    title: _('LBL_SETTINGS'),\n    width: 300,\n    height: 300\n  }\n};\n\n/////////////////////////////////////////////////////////////////////////////\n// HELPERS\n/////////////////////////////////////////////////////////////////////////////\n\nfunction bindWidgetEvents(instance) {\n  var timeout = null;\n  var position = instance._getNormalizedPosition();\n  var dimension = instance._getDimension();\n  var start = {x: 0, y: 0};\n\n  function _getDimensionAspected(dx, dy) {\n    if ( instance._options.aspect === true ) {\n      var width = dimension.width + dx;\n      var height = width / instance._aspect;\n      return {width: width, height: height};\n    }\n\n    return {\n      width: dimension.width + dx,\n      height: dimension.height + dy\n    };\n  }\n\n  function _mouseDown(ev, pos, action) {\n    ev.preventDefault();\n    if ( instance._locked ) {\n      return;\n    }\n\n    timeout = clearTimeout(timeout);\n    start = pos;\n    position = instance._getNormalizedPosition();\n    dimension = instance._getDimension();\n\n    Events.$bind(window, 'mousemove:modifywidget', function(ev, pos) {\n      var dx = pos.x - start.x;\n      var dy = pos.y - start.y;\n      var obj = action === 'move' ? {\n        left: position.left + dx,\n        top: position.top + dy\n      } : _getDimensionAspected(dx, dy);\n\n      instance._onMouseMove(ev, obj, action);\n    });\n\n    Events.$bind(window, 'mouseup:modifywidget', function(ev, pos) {\n      Events.$unbind(window, 'mousemove:modifywidget');\n      Events.$unbind(window, 'mouseup:modifywidget');\n\n      instance._onMouseUp(ev, pos, action);\n    });\n\n    instance._windowWidth = window.innerWidth;\n    instance._windowHeight = window.innerHeight;\n    instance._onMouseDown(ev, pos, action);\n  }\n\n  Events.$bind(instance._$element, 'mousedown:movewidget', function(ev, pos) {\n    _mouseDown(ev, pos, 'move');\n  });\n  Events.$bind(instance._$resize, 'mousedown:resizewidget', function(ev, pos) {\n    ev.stopPropagation();\n    _mouseDown(ev, pos, 'resize');\n  });\n\n  Events.$bind(instance._$element, 'click:showenvelope', function(ev) {\n    timeout = clearTimeout(timeout);\n    instance._showEnvelope();\n  });\n  Events.$bind(instance._$element, 'mouseover:showenvelope', function() {\n    timeout = clearTimeout(timeout);\n    timeout = setTimeout(function() {\n      instance._showEnvelope();\n    }, TIMEOUT_SHOW_ENVELOPE);\n  });\n  Events.$bind(instance._$element, 'mouseout:hideenvelope', function(ev) {\n    timeout = clearTimeout(timeout);\n    timeout = setTimeout(function() {\n      instance._hideEnvelope();\n    }, TIMEOUT_HIDE_ENVELOPE);\n  });\n\n  Events.$bind(instance._$element, 'contextmenu:widgetcontext', function(ev) {\n    instance._onContextMenu(ev);\n  });\n}\n\nfunction validNumber(num) {\n  if ( typeof num !== 'undefined' && num !== null ) {\n    return !isNaN(num);\n  }\n  return false;\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// WIDGET\n/////////////////////////////////////////////////////////////////////////////\n\nexport default class Widget {\n  /**\n   * A CoreWM Widget\n   *\n   * TODO: Behave according to orientation\n   *\n   * @param   {String}             name      Widget Name\n   * @param   {Object}             options   Widget Options\n   * @param   {SettingsFragment}   settings  SettingsFragment instance\n   */\n  constructor(name, options, settings) {\n    options = Utils.mergeObject(Utils.cloneObject(DEFAULT_OPTIONS), options || {});\n\n    this._aspect = options.aspect === true ? options.width / options.height : (typeof options.aspect === 'number' ? options.aspect : 1.0);\n    if ( options.aspect !== false ) {\n      options.minHeight = options.width / this._aspect;\n      options.maxHeight = options.maxWidth / this._aspect;\n    }\n\n    if ( options.viewBox ) {\n      options.resizable = true;\n      if ( options.viewBox === true ) {\n        options.viewBox = '0 0 ' + options.width + ' ' + options.height;\n      }\n    }\n\n    this._position = {\n      left: settings.get('left', options.left),\n      top: settings.get('top', options.top),\n      right: settings.get('right', options.right),\n      bottom: settings.get('bottom', options.bottom)\n    };\n\n    this._dimension = {\n      height: settings.get('height', options.height),\n      width: settings.get('width', options.width)\n    };\n\n    this._name = name;\n    this._settings = settings;\n    this._options = options;\n    this._isManipulating = false;\n    this._windowWidth = window.innerWidth;\n    this._windowHeight = window.innerHeight;\n    this._requestId = null;\n    this._saveTimeout = null;\n    this._settingsWindow = null;\n    this._locked = settings.get('locked', false);\n\n    this._$element = null;\n    this._$resize = null;\n    this._$canvas = null;\n    this._$context = null;\n\n    Utils.mergeObject(this._options.settings, settings.get('settings', {}));\n\n    console.debug('Widget::construct()', this._name, this._settings.get());\n  }\n\n  /**\n   * When Widget is initialized\n   *\n   * @param {Node}      root          The DOM Node to append Widget to\n   *\n   * @return {Node}                   The created DOM Node containing Widget\n   */\n  init(root) {\n    this._windowWidth = window.innerWidth;\n    this._windowHeight = window.innerHeight;\n    this._$element = document.createElement('corewm-widget');\n    this._$resize = document.createElement('corewm-widget-resize');\n\n    if ( this._options.canvas ) {\n      this._$canvas = document.createElement('canvas');\n\n      if ( this._options.viewBox ) {\n        this._$canvas.setAttribute('viewBox', this._options.viewBox);\n      }\n\n      this._$context = this._$canvas.getContext('2d');\n      this._$element.appendChild(this._$canvas);\n    }\n\n    bindWidgetEvents(this);\n\n    this._updatePosition();\n    this._updateDimension();\n    this._setLock(this._locked);\n\n    DOM.$addClass(this._$element, 'Widget' + this._name);\n    this._$element.appendChild(this._$resize);\n    root.appendChild(this._$element);\n\n    return this._$element;\n  }\n\n  /**\n   * When widget has been rendered to DOM and added in WindowManager\n   */\n  _inited() {\n    this.onInited();\n    this.onResize(this._dimension);\n\n    var fpsInterval, now, then, elapsed;\n\n    const animate = () => {\n      window.requestAnimationFrame(animate);\n\n      now = Date.now();\n      elapsed = now - then;\n\n      if ( elapsed > fpsInterval ) {\n        then = now - (elapsed % fpsInterval);\n        this.onRender();\n      }\n    };\n\n    if ( this._$canvas ) {\n      var fps = Math.min(this._options.frequency, 1);\n\n      this._requestId = window.requestAnimationFrame(function() {\n        fpsInterval = 1000 / fps;\n        then = Date.now();\n\n        animate();\n      });\n    }\n  }\n\n  /**\n   * When WindowManager requests destruction of Widget\n   */\n  destroy() {\n    Events.$unbind(window, 'mousemove:modifywidget');\n    Events.$unbind(window, 'mouseup:modifywidget');\n    Events.$unbind(this._$resize, 'mousedown:resizewidget');\n    Events.$unbind(this._$element, 'mousedown:movewidget');\n    Events.$unbind(this._$element, 'click:showenvelope');\n    Events.$unbind(this._$element, 'mouseover:showenvelope');\n    Events.$unbind(this._$element, 'mouseout:hideenvelope');\n    Events.$unbind(this._$element, 'contextmenu:widgetcontext');\n\n    this._saveTimeout = clearTimeout(this._saveTimeout);\n\n    if ( this._requestId ) {\n      window.cancelAnimationFrame(this._requestId);\n    }\n    this._requestId = null;\n\n    if ( this._settingsWindow ) {\n      this._settingsWindow.destroy();\n    }\n    this._settingsWindow = null;\n\n    this._$canvas = DOM.$remove(this._$canvas);\n    this._$resize = DOM.$remove(this._$resize);\n    this._$element = DOM.$remove(this._$element);\n    this._$context = null;\n  }\n\n  /**\n   * Blurs the widget if active\n   */\n  blur() {\n  }\n\n  /**\n   * When mouse is pressed\n   */\n  _onMouseDown(ev, pos, action) {\n    this._saveTimeout = clearTimeout(this._saveTimeout);\n\n    DOM.$addClass(this._$element, 'corewm-widget-active');\n\n    // This temporarily sets the position to a normalized one\n    // to prevent resizing going in wrong direction\n    if ( action === 'resize' ) {\n      var obj = this._getNormalizedPosition();\n      this._setPosition(obj);\n    }\n  }\n\n  /**\n   * When mouse is moved after pressing\n   */\n  _onMouseMove(ev, obj, action) {\n    this._isManipulating = true;\n\n    if ( action === 'move' ) {\n      this._setPosition(obj, true);\n      this.onMove(this._position);\n    } else {\n      this._setDimension(obj);\n      this.onResize(this._dimension);\n    }\n  }\n\n  /**\n   * When mouse has been released\n   */\n  _onMouseUp(ev, pos, action) {\n    this._isManipulating = false;\n    this._resizeTimeout = clearTimeout(this._resizeTimeout);\n\n    DOM.$removeClass(this._$element, 'corewm-widget-active');\n\n    this._hideEnvelope();\n\n    // This resets the position back to an absolute one\n    // after it was temporarily set in onMouseDown\n    if ( action === 'resize' ) {\n      this._setPosition(null, true);\n    }\n\n    this._saveTimeout = clearTimeout(this._saveTimeout);\n    this._saveTimeout = setTimeout(() => {\n      this._saveOptions();\n    }, TIMEOUT_SAVE);\n  }\n\n  /**\n   * When right mouse button is pressed\n   */\n  _onContextMenu(ev) {\n    var c = this.onContextMenu(ev);\n\n    var menu = [{\n      title: this._locked ? _('LBL_UNLOCK') : _('LBL_LOCK'),\n      onClick: () => {\n        this._setLock();\n        this._saveOptions();\n      }\n    }];\n\n    if ( c !== true ) {\n      if ( c instanceof Array ) {\n        menu = c.concat(menu);\n      }\n\n      if ( this._options.settings.enabled ) {\n        menu.push({\n          title: _('Open {0} Settings', _(this._name)),\n          onClick: (ev) => {\n            this._openSettings(ev);\n          }\n        });\n      }\n    }\n\n    Menu.create(menu, ev);\n  }\n\n  /**\n   * Saves this Widgets options to CoreWM\n   */\n  _saveOptions(custom) {\n    if ( typeof custom !== 'undefined' ) {\n      this._options.settings.tree = custom;\n    }\n\n    var opts = {\n      width: this._dimension.width,\n      height: this._dimension.height,\n      right: this._position.right,\n      left: validNumber(this._position.right) ? null : this._position.left,\n      bottom: this._position.bottom,\n      top: validNumber(this._position.bottom) ? null : this._position.top,\n      locked: this._locked,\n      settings: {\n        tree: this._options.settings.tree\n      }\n    };\n\n    this._settings.set(null, opts, true);\n  }\n\n  /**\n   * Show settings dialog\n   */\n  _openSettings(ev) {\n    if ( this._settingsWindow ) {\n      this._settingsWindow._focus();\n      return;\n    }\n\n    var wm = WindowManager.instance;\n    var win = new Window(this._options.settings.name, {\n      title: this._options.settings.title,\n      width: this._options.settings.width,\n      height: this._options.settings.height\n    }, null, wm._scheme);\n\n    win._on('init', (root, scheme) => {\n      var opts = this.onOpenSettings(root, scheme, ev);\n\n      win._render(opts.id);\n\n      win._find('ButtonOK').on('click', () => {\n        var settings = opts.save(root, scheme, ev);\n        this._saveOptions(settings);\n      });\n\n      opts.render(root, scheme, ev);\n    });\n\n    win._on('close', () => {\n      this._settingsWindow = null;\n    });\n\n    this._settingsWindow = wm.addWindow(win, true);\n  }\n\n  /**\n   * Show the envelope containing this Widget\n   */\n  _showEnvelope() {\n    if ( !this._$element ) {\n      return;\n    }\n    DOM.$addClass(this._$element, 'corewm-widget-envelope');\n  }\n\n  /**\n   * Hide the envelope containing this Widget\n   */\n  _hideEnvelope() {\n    if ( !this._$element || this._isManipulating ) {\n      return;\n    }\n    DOM.$removeClass(this._$element, 'corewm-widget-envelope');\n  }\n\n  /**\n   * Sets the position and correctly aligns it to the DOM (sticking)\n   */\n  _setPosition(obj, stick) {\n    obj = obj || Utils.cloneObject(this._position);\n\n    this._position.top = obj.top;\n    this._position.left = obj.left;\n    this._position.bottom = null;\n    this._position.right = null;\n\n    if ( stick ) {\n      if ( this._isPastHalf('vertical', obj) ) {\n        this._position.top = null;\n        this._position.bottom = this._windowHeight - this._dimension.height - obj.top;\n      }\n\n      if ( this._isPastHalf('horizontal', obj) ) {\n        this._position.left = null;\n        this._position.right = this._windowWidth - this._dimension.width - obj.left;\n      }\n    }\n\n    this._updatePosition();\n  }\n\n  /**\n   * Sets the dimension of the widget\n   */\n  _setDimension(obj) {\n    var o = this._options;\n    var w = Math.min(Math.max(obj.width, o.minWidth), o.maxWidth);\n    var h = Math.min(Math.max(obj.height, o.minHeight), o.maxHeight);\n    if ( this._options.aspect === true ) {\n      h = w / this._aspect;\n    }\n\n    this._dimension.width = w;\n    this._dimension.height = h;\n\n    this._updateDimension();\n  }\n\n  /**\n   * Lock widget (make unmoveable)\n   */\n  _setLock(l) {\n    if ( typeof l !== 'boolean' ) {\n      l = !this._locked;\n    }\n    this._locked = l;\n\n    if ( this._$element ) {\n      this._$element.setAttribute('data-locked', String(this._locked));\n    }\n  }\n\n  /**\n   * Updates the Widgets position based on internal options\n   */\n  _updatePosition() {\n    if ( this._$element ) {\n      if ( validNumber(this._position.right) ) {\n        this._$element.style.left = 'auto';\n        this._$element.style.right = String(this._position.right) + 'px';\n      } else {\n        this._$element.style.left = String(this._position.left) + 'px';\n        this._$element.style.right = 'auto';\n      }\n\n      if ( validNumber(this._position.bottom) ) {\n        this._$element.style.top = 'auto';\n        this._$element.style.bottom = String(this._position.bottom) + 'px';\n      } else {\n        this._$element.style.top = String(this._position.top) + 'px';\n        this._$element.style.bottom = 'auto';\n      }\n    }\n  }\n\n  /**\n   * Updates the Widgets dimensions based on internal options\n   */\n  _updateDimension() {\n    if ( this._$element ) {\n      this._$element.style.width = String(this._dimension.width) + 'px';\n      this._$element.style.height = String(this._dimension.height) + 'px';\n    }\n\n    if ( this._$canvas ) {\n      this._$canvas.width = this._dimension.width || MIN_WIDTH;\n      this._$canvas.height = this._dimension.height || MIN_HEIGHT;\n    }\n  }\n\n  /**\n   * Gets the position of the Widget\n   *\n   * @return {Object}\n   */\n  _getNormalizedPosition() {\n    var left = this._position.left;\n    if ( validNumber(this._position.right) ) {\n      left = this._windowWidth - this._position.right - this._dimension.width;\n    }\n\n    var top = this._position.top;\n    if ( validNumber(this._position.bottom) ) {\n      top = this._windowHeight - this._position.bottom - this._dimension.height;\n    }\n\n    return {left: left, top: top};\n  }\n\n  /**\n   * Gets the dimensions\n   *\n   * @return {Object}\n   */\n  _getDimension() {\n    return {\n      width: this._dimension.width,\n      height: this._dimension.height\n    };\n  }\n\n  /**\n   * Gets the position\n   *\n   * @return {Object}\n   */\n  _getPosition() {\n    return {\n      left: this._position.left,\n      top: this._position.top,\n      right: this._position.right,\n      bottom: this._position.bottom\n    };\n  }\n\n  /**\n   * Sets a setting\n   */\n  _setSetting(k, v, save) {\n    this._options.settings.tree[k] = v;\n    if ( save ) {\n      this._saveOptions();\n    }\n  }\n\n  /**\n   * Gets a setting\n   */\n  _getSetting(k, def) {\n    if ( typeof this._options.settings === 'undefined' || typeof this._options.settings.tree === 'undefined' ) {\n      return def;\n    }\n\n    var value = this._options.settings.tree[k];\n    return typeof value === 'undefined' ? def : value;\n  }\n\n  /**\n   * Check if widget has passed the middle of screen in\n   * given direction\n   *\n   * @return {Boolean}\n   */\n  _isPastHalf(dir, obj) {\n    obj = obj || this._position;\n\n    var hleft = this._windowWidth / 2;\n    var aleft = obj.left + (this._dimension.width / 2);\n    if ( dir === 'horizontal' ) {\n      return aleft >= hleft;\n    }\n\n    var htop = this._windowHeight / 2;\n    var atop = obj.top + (this._dimension.height / 2);\n    return atop >= htop;\n  }\n\n  /**\n   * When Widget is being moved\n   */\n  onMove() {\n    // Implement in your widget\n  }\n\n  /**\n   * When Widget is being resized\n   */\n  onResize() {\n    // Implement in your widget\n  }\n\n  /**\n   * When Widget is being rendered\n   */\n  onRender() {\n    // Implement in your widget\n  }\n\n  /**\n   * When Widget has been initialized\n   */\n  onInited() {\n    // Implement in your widget\n  }\n\n  /**\n   * When Widget opens contextmenu\n   */\n  onContextMenu(ev) {\n    // Implement in your widget.\n    // You can return true to prevent default context action.\n    // Or an array of elements to append to the default menu.\n  }\n\n  /**\n   * When Widget Settings dialog shows\n   */\n  onOpenSettings(root, scheme, ev) {\n    // Implement in your widget.\n    return {\n      id: null,\n      save: function() {\n        return {};\n      },\n      render: function() {\n      }\n    };\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Translations from './locales';\nimport WindowSwitcher from './windowswitcher';\nimport DesktopIconView from './iconview';\nimport Panel from './panel';\n\nimport WidgetDigitalClock from './widgets/digitalclock';\nimport WidgetAnalogClock from './widgets/analogclock';\nimport PanelItemAppMenu from './panelitems/appmenu';\nimport PanelItemButtons from './panelitems/buttons';\nimport PanelItemClock from './panelitems/clock';\nimport PanelItemNotificationArea from './panelitems/notificationarea';\nimport PanelItemSearch from './panelitems/search';\nimport PanelItemWeather from './panelitems/weather';\nimport PanelItemWindowList from './panelitems/windowlist';\n\nconst Menu = OSjs.require('gui/menu');\nconst Locales = OSjs.require('core/locales');\nconst GUIScheme = OSjs.require('gui/scheme');\nconst Config = OSjs.require('core/config');\nconst Authenticator = OSjs.require('core/authenticator');\nconst Application = OSjs.require('core/application');\nconst PackageManager = OSjs.require('core/package-manager');\nconst WindowManager = OSjs.require('core/window-manager');\nconst SettingsFragment = OSjs.require('helpers/settings-fragment');\nconst SettingsManager = OSjs.require('core/settings-manager');\nconst Events = OSjs.require('utils/events');\nconst Compability = OSjs.require('utils/compability');\nconst FileMetadata = OSjs.require('vfs/file');\nconst Notification = OSjs.require('gui/notification');\nconst Theme = OSjs.require('core/theme');\nconst DOM = OSjs.require('utils/dom');\nconst Utils = OSjs.require('utils/misc');\nconst Init = OSjs.require('core/init');\nconst GUI = OSjs.require('utils/gui');\nconst VFS = OSjs.require('vfs/fs');\nconst FS = OSjs.require('utils/fs');\nconst ServiceNotificationIcon = OSjs.require('helpers/service-notification-icon');\n\n/*eslint valid-jsdoc: \"off\"*/\n\nconst PADDING_PANEL_AUTOHIDE = 10; // FIXME: Replace with a constant ?!\n\nfunction defaultSettings(defaults) {\n  const compability = Compability.getCompability();\n\n  let cfg = {\n    animations: compability.css.animation,\n    useTouchMenu: compability.touch\n  };\n\n  if ( defaults ) {\n    cfg = Utils.mergeObject(cfg, defaults);\n  }\n\n  return cfg;\n}\n\nconst translate = Locales.createLocalizer(Translations);\n\n/////////////////////////////////////////////////////////////////////////////\n// APPLICATION\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * Application\n */\nclass CoreWM extends WindowManager {\n\n  constructor(args, metadata) {\n    const importSettings = args.defaults || {};\n\n    super('CoreWM', args, metadata, defaultSettings(importSettings));\n\n    this.panels           = [];\n    this.widgets          = [];\n    this.switcher         = null;\n    this.iconView         = null;\n    this.importedSettings = Utils.mergeObject(Config.getConfig('SettingsManager.CoreWM'), importSettings);\n    this._scheme          = GUIScheme.fromString(require('osjs-scheme-loader!scheme.html'));\n\n    this.generatedHotkeyMap = {};\n\n    function _winGenericHotkey(ev, win, wm, hotkey) {\n      if ( win ) {\n        win._onKeyEvent(ev, 'keydown', hotkey);\n      }\n    }\n    this.hotkeyMap = {\n      SEARCH: function(ev, win, wm) {\n        if ( wm ) {\n          const panel = wm.getPanel();\n          if ( panel ) {\n            const pitem = panel.getItemByType(OSjs.Applications.CoreWM.PanelItems.Search);\n            if ( pitem ) {\n              ev.preventDefault();\n              pitem.show();\n            }\n          }\n        }\n      },\n      SWITCHER: function(ev, win, wm) {\n        if ( wm.getSetting('enableSwitcher') && wm.switcher ) {\n          wm.switcher.show(ev, win, wm);\n        }\n      },\n      WINDOW_MINIMIZE: function(ev, win) {\n        if ( win ) {\n          win._minimize();\n        }\n      },\n      WINDOW_MAXIMIZE: function(ev, win) {\n        if ( win ) {\n          win._maximize();\n        }\n      },\n      WINDOW_RESTORE: function(ev, win) {\n        if ( win ) {\n          win._restore();\n        }\n      },\n      WINDOW_MOVE_LEFT: function(ev, win) {\n        if ( win ) {\n          win._moveTo('left');\n        }\n      },\n      WINDOW_MOVE_RIGHT: function(ev, win) {\n        if ( win ) {\n          win._moveTo('right');\n        }\n      },\n      WINDOW_MOVE_UP: function(ev, win) {\n        if ( win ) {\n          win._moveTo('top');\n        }\n      },\n      WINDOW_MOVE_DOWN: function(ev, win) {\n        if ( win ) {\n          win._moveTo('bottom');\n        }\n      },\n      SAVE: _winGenericHotkey,\n      SAVEAS: _winGenericHotkey,\n      OPEN: _winGenericHotkey\n    };\n\n    Theme.update(this.importedSettings);\n  }\n\n  setup() {\n\n    const initNotifications = () => {\n      ServiceNotificationIcon.init();\n\n      const user = Authenticator.instance.getUser();\n\n      const displayMenu = (ev) => {\n        Menu.create([{\n          title: Locales._('TITLE_SIGN_OUT'),\n          onClick: function() {\n            Init.logout();\n          }\n        }], ev);\n\n        return false;\n      };\n\n      const toggleFullscreen = () => {\n        const docElm = document.documentElement;\n        const notif = Notification.getIcon('_FullscreenNotification');\n        if ( notif ) {\n          this.toggleFullscreen(notif.opts._isFullscreen ? document : docElm, !notif.opts._isFullscreen);\n        }\n      };\n\n      const displayDevMenu = (ev) => {\n        const don = DOM.$hasClass(document.body, 'debug');\n        const apps = Application.getProcesses().filter(function(iter) {\n          return iter !== null && iter instanceof Application;\n        }).map(function(iter) {\n          return {\n            title: iter.__label + ' (pid:' + iter.__pid + ')',\n            onClick: function() {\n              Application.reload(iter.__pid);\n            }\n          };\n        });\n\n        const mnu = [{\n          title: don ? 'Turn off debug overlay' : 'Turn on debug overlay',\n          onClick: function() {\n            if ( don ) {\n              DOM.$removeClass(document.body, 'debug');\n            } else {\n              DOM.$addClass(document.body, 'debug');\n            }\n          }\n        }, {\n          title: 'Reload manifest',\n          onClick: function() {\n            PackageManager.init();\n          }\n        }, {\n          title: 'Reload running application',\n          menu: apps\n        }];\n\n        Menu.create(mnu, ev);\n      };\n\n      if ( Config.getConfig('Debug') ) {\n        Notification.createIcon('_DeveloperNotification', {\n          icon: Theme.getIcon('categories/applications-development.png', '16x16'),\n          title: 'Developer Tools',\n          onContextMenu: displayDevMenu,\n          onClick: displayDevMenu\n        });\n      }\n\n      if ( this.getSetting('fullscreen') ) {\n        Notification.createIcon('_FullscreenNotification', {\n          icon: Theme.getIcon('actions/view-fullscreen.png', '16x16'),\n          title: 'Enter fullscreen',\n          onClick: toggleFullscreen,\n          _isFullscreen: false\n        });\n      }\n\n      Notification.createIcon('_HandlerUserNotification', {\n        icon: Theme.getIcon('status/avatar-default.png', '16x16'),\n        title: Locales._('TITLE_SIGNED_IN_AS_FMT', user.username),\n        onContextMenu: displayMenu,\n        onClick: displayMenu\n      });\n    };\n\n    this.applySettings(this._settings.get());\n\n    try {\n      VFS.watch(new FileMetadata(this.getSetting('desktopPath'), 'dir'), (msg, obj) => {\n        if ( !obj || msg.match(/^vfs:(un)?mount/) ) {\n          return;\n        }\n\n        if ( this.iconView ) {\n          this.iconView._refresh();\n        }\n      });\n    } catch ( e ) {\n      console.warn('Failed to apply CoreWM VFS watch', e, e.stack);\n    }\n\n    this.initSwitcher();\n    this.initDesktop();\n    this.initPanels();\n    this.initWidgets();\n    this.initIconView();\n\n    initNotifications();\n\n    return Promise.resolve();\n  }\n\n  destroy(force) {\n    if ( !force && !window.confirm(translate('Killing this process will stop things from working!')) ) {\n      return false;\n    }\n\n    ServiceNotificationIcon.destroy();\n\n    try {\n      Events.$unbind(document.body, 'dragenter, dragleave, dragover, drop');\n\n      Notification.destroyIcon('_HandlerUserNotification');\n\n      if ( this.iconView ) {\n        this.iconView.destroy();\n      }\n      if ( this.switcher ) {\n        this.switcher.destroy();\n      }\n\n      // Reset\n      this.destroyPanels();\n      this.destroyWidgets();\n\n      const settings = this.importedSettings;\n      try {\n        settings.background = 'color';\n      } catch ( e ) {}\n\n      //this.applySettings(defaultSettings(settings), true);\n    } catch ( e ) {\n      console.warn(e);\n      return false;\n    }\n\n    // Clear DOM\n    this.switcher = null;\n    this.iconView = null;\n\n    return super.destroy(...arguments);\n  }\n\n  destroyPanels() {\n    this.panels.forEach(function(p) {\n      p.destroy();\n    });\n    this.panels = [];\n  }\n\n  destroyWidgets() {\n    this.widgets.forEach(function(w) {\n      w.destroy();\n    });\n    this.widgets = [];\n  }\n\n  //\n  // Initialization\n  //\n\n  initSwitcher() {\n    this.switcher = new WindowSwitcher();\n  }\n\n  initDesktop() {\n\n    // Enable dropping of new wallpaper if no iconview is enabled\n    GUI.createDroppable(document.body, {\n      onOver: (ev, el, args) => this.onDropOver(ev, el, args),\n      onLeave: () => this.onDropLeave(),\n      onDrop: () => this.onDrop(),\n      onItemDropped: (ev, el, item, args) => this.onDropItem(ev, el, item, args),\n      onFilesDropped: (ev, el, files, args) => this.onDropFile(ev, el, files, args)\n    });\n  }\n\n  initPanels(applySettings) {\n    const ps = this.getSetting('panels');\n    let added = false;\n\n    if ( ps === false ) {\n      added = true;\n    } else {\n      this.destroyPanels();\n\n      (ps || []).forEach((storedItem) => {\n        if ( !storedItem.options ) {\n          storedItem.options = {};\n        }\n\n        const panelSettings = new SettingsFragment(storedItem.options, 'CoreWM', SettingsManager);\n        const p = new Panel('Default', panelSettings, this);\n        p.init(document.body);\n\n        (storedItem.items || []).forEach((iter) => {\n          try {\n            if ( typeof iter.settings === 'undefined' || iter.settings === null ) {\n              iter.settings = {};\n            }\n\n            let itemSettings = {};\n            try {\n              itemSettings = new SettingsFragment(iter.settings, 'CoreWM', SettingsManager);\n            } catch ( ex ) {\n              console.warn('An error occured while loading PanelItem settings', ex);\n              console.warn('stack', ex.stack);\n            }\n\n            p.addItem(new OSjs.Applications.CoreWM.PanelItems[iter.name](itemSettings));\n            added = true;\n          } catch ( e ) {\n            console.warn('An error occured while creating PanelItem', e);\n            console.warn('stack', e.stack);\n\n            Notification.create({\n              icon: Theme.getIcon('status/dialog-warning.png', '32x32'),\n              title: 'CoreWM',\n              message: translate('An error occured while creating PanelItem: {0}', e)\n            });\n          }\n        });\n\n        this.panels.push(p);\n      });\n    }\n\n    if ( !added ) {\n      Notification.create({\n        timeout: 0,\n        icon: Theme.getIcon('status/dialog-warning.png', '32x32'),\n        title: 'CoreWM',\n        message: translate('Your panel has no items. Go to settings to reset default or modify manually\\n(This error may occur after upgrades of OS.js)')\n      });\n    }\n\n    if ( applySettings ) {\n      // Workaround for windows appearing behind panel\n      const p = this.panels[0];\n      if ( p && p.getOntop() && p.getPosition('top') ) {\n        setTimeout(() => {\n          const space = this.getWindowSpace();\n          this._windows.forEach(function(iter) {\n            if ( iter && iter._position.y < space.top ) {\n              console.warn('CoreWM::initPanels()', 'I moved this window because it overlapped with a panel!', iter);\n              iter._move(iter._position.x, space.top);\n            }\n          });\n        }, 800);\n      }\n\n      if ( this.iconView ) {\n        this.iconView.resize(this);\n      }\n    }\n\n    setTimeout(() => {\n      this.setStyles(this._settings.get());\n    }, 250);\n  }\n\n  initWidgets(applySettings) {\n    this.destroyWidgets();\n\n    const widgets = this.getSetting('widgets');\n\n    (widgets || []).forEach((item) => {\n      if ( !item.settings ) {\n        item.settings = {};\n      }\n\n      const settings = new SettingsFragment(item.settings, 'CoreWM', SettingsManager);\n\n      try {\n        const w = new OSjs.Applications.CoreWM.Widgets[item.name](settings);\n        w.init(document.body);\n        this.widgets.push(w);\n\n        w._inited();\n      } catch ( e ) {\n        console.warn('CoreWM::initWidgets()', e, e.stack);\n      }\n    });\n  }\n\n  initIconView() {\n    const en = this.getSetting('enableIconView');\n    if ( !en && this.iconView ) {\n      this.iconView.destroy();\n      this.iconView = null;\n      return;\n    }\n\n    if ( en && !this.iconView ) {\n      this.iconView = new DesktopIconView(this);\n      document.body.appendChild(this.iconView.getRoot());\n    }\n\n    setTimeout(() => {\n      if ( this.iconView ) {\n        this.iconView.resize(this);\n      }\n    }, 280);\n  }\n\n  //\n  // Events\n  //\n\n  resize(ev, rect, wasInited) {\n    super.resize(...arguments);\n\n    const space = this.getWindowSpace();\n    const margin = this.getSetting('desktopMargin');\n    const windows = this._windows;\n\n    function moveIntoView() {\n      let i = 0, l = windows.length, iter, wrect;\n      let mx, my, moved;\n\n      for ( i; i < l; i++ ) {\n        iter = windows[i];\n        if ( !iter ) {\n          continue;\n        }\n        wrect = iter._getViewRect();\n        if ( wrect === null || iter._state.mimimized ) {\n          continue;\n        }\n\n        // Move the window into view if outside of view\n        mx = iter._position.x;\n        my = iter._position.y;\n        moved = false;\n\n        if ( (wrect.left + margin) > rect.width ) {\n          mx = space.width - iter._dimension.w;\n          moved = true;\n        }\n        if ( (wrect.top + margin) > rect.height ) {\n          my = space.height - iter._dimension.h;\n          moved = true;\n        }\n\n        if ( moved ) {\n          if ( mx < space.left ) {\n            mx = space.left;\n          }\n          if ( my < space.top  ) {\n            my = space.top;\n          }\n          iter._move(mx, my);\n        }\n\n        // Restore maximized windows (FIXME: Better solution?)\n        if ( iter._state.maximized && (wasInited ? iter._restored : true) ) {\n          iter._restore(true, false);\n        }\n      }\n    }\n\n    if ( !this._isResponsive ) {\n      if ( this.getSetting('moveOnResize') ) {\n        moveIntoView();\n      }\n    }\n  }\n\n  onDropLeave() {\n    document.body.setAttribute('data-attention', 'false');\n  }\n\n  onDropOver() {\n    document.body.setAttribute('data-attention', 'true');\n  }\n\n  onDrop() {\n    document.body.setAttribute('data-attention', 'false');\n  }\n\n  onDropItem(ev, el, item, args) {\n    document.body.setAttribute('data-attention', 'false');\n\n    const _applyWallpaper = (data) => {\n      this.applySettings({wallpaper: data.path}, false, true);\n    };\n\n    const _createShortcut = (data) => {\n      if ( this.iconView ) {\n        this.iconView.addShortcut(data, this, true);\n      }\n    };\n\n    const _openMenu = (data) =>  {\n      Menu.create([{\n        title: translate('LBL_COPY'),\n        onClick: () => {\n          const dst = FS.pathJoin(this.getSetting('desktopPath'), data.filename);\n          VFS.copy(data, dst);\n        }\n      /*}, {\n        title: translate('Create shortcut'),\n        onClick: () => {\n          _createShortcut.call(this, data);\n        }\n        */\n      }, {\n        title: translate('Set as wallpaper'),\n        onClick: () => {\n          _applyWallpaper(data);\n        }\n      }], ev);\n    };\n\n    if ( item ) {\n      const data = item.data;\n      if ( item.type === 'file' ) {\n        if ( data && data.mime ) {\n          if ( data.mime.match(/^image/) ) {\n            if ( this.iconView ) {\n              _openMenu(data);\n            } else {\n              _applyWallpaper(data);\n            }\n          } else {\n            _createShortcut(data);\n          }\n        }\n      } else if ( item.type === 'application' ) {\n        _createShortcut(data);\n      }\n    }\n  }\n\n  onDropFile(ev, el, files, args) {\n    VFS.upload({\n      destination: 'desktop:///',\n      files: files\n    });\n  }\n\n  onContextMenu(ev) {\n    if ( ev.target === document.body ) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.openDesktopMenu(ev);\n      return false;\n    }\n    return true;\n  }\n\n  onKeyUp(ev, win) {\n    if ( !ev ) {\n      return;\n    }\n\n    if ( !ev.altKey ) {\n      if ( this.switcher ) {\n        this.switcher.hide(ev, win, this);\n      }\n    }\n  }\n\n  onKeyDown(ev, win) {\n    let combination = false;\n\n    if ( ev ) {\n      const map = this.generatedHotkeyMap;\n      Object.keys(map).some((i) => {\n        if ( Events.keyCombination(ev, i) ) {\n          map[i](ev, win, this);\n          combination = i;\n          return true;\n        }\n        return false;\n      });\n    }\n    return combination;\n  }\n\n  showSettings(category) {\n    Application.create('ApplicationSettings', {category: category});\n  }\n\n  eventWindow(ev, win) {\n    // Make sure panel items are updated correctly\n    // FIXME: This is not compatible with other PanelItems\n\n    this.panels.forEach(function(panel) {\n      if ( panel ) {\n        const panelItem = panel.getItem(OSjs.Applications.CoreWM.PanelItems.WindowList);\n        if ( panelItem ) {\n          panelItem.update(ev, win);\n        }\n      }\n    });\n\n    // Unfocus IconView if we focus a window\n    if ( ev === 'focus' ) {\n      if ( this.iconView ) {\n        this.iconView.blur();\n        this.widgets.forEach(function(w) {\n          w.blur();\n        });\n      }\n    }\n  }\n\n  getNotificationArea() {\n    const panelId = 0; // FIXME\n    const panel = this.panels[panelId];\n    if ( panel ) {\n      return panel.getItem(OSjs.Applications.CoreWM.PanelItems.NotificationArea);\n    }\n    return null;\n  }\n\n  _getContextMenu(arg) {\n    let menu = [];\n\n    if ( this.iconView ) {\n      menu = this.iconView._getContextMenu(arg);\n    }\n\n    menu.push({\n      title: translate('Open settings'),\n      onClick: () => this.showSettings()\n    });\n\n    if ( this.getSetting('enableIconView') === true ) {\n      menu.push({\n        title: translate('Hide Icons'),\n        onClick: (ev) => {\n          this.applySettings({enableIconView: false}, false, true);\n        }\n      });\n    } else {\n      menu.push({\n        title: translate('Show Icons'),\n        onClick: (ev) => {\n          this.applySettings({enableIconView: true}, false, true);\n        }\n      });\n    }\n\n    return menu;\n  }\n\n  openDesktopMenu(ev) {\n    if ( this._emit('wm:contextmenu', [ev, this]) === false ) {\n      return;\n    }\n\n    const menu = this._getContextMenu();\n    Menu.create(menu, ev);\n  }\n\n  applySettings(settings, force, save, triggerWatch) {\n    console.group('CoreWM::applySettings()');\n\n    settings = force ? settings : Utils.mergeObject(this._settings.get(), settings);\n\n    console.log(settings);\n\n    Theme.update(settings, true);\n\n    this.setIconView(settings);\n    this.setStyles(settings);\n\n    if ( save ) {\n      this.initPanels(true);\n      this.initWidgets(true);\n\n      if ( settings && save === true ) {\n        if ( settings.language ) {\n          SettingsManager.set('Core', 'Locale', settings.language, triggerWatch);\n          Locales.setLocale(settings.language);\n        }\n        this._settings.set(null, settings, save, triggerWatch);\n      }\n    }\n\n    this.generatedHotkeyMap = {};\n\n    const keys = this._settings.get('hotkeys');\n    const self = this;\n    Object.keys(keys).forEach((k) => {\n      this.generatedHotkeyMap[keys[k]] = function() {\n        const args = Array.prototype.slice.call(arguments);\n        args.push(k);\n        return self.hotkeyMap[k].apply(this, args);\n      };\n    });\n\n    console.groupEnd();\n\n    return true;\n  }\n\n  setIconView(settings) {\n    if ( settings.enableIconView ) {\n      this.initIconView();\n    } else {\n      if ( this.iconView ) {\n        this.iconView.destroy();\n        this.iconView = null;\n      }\n    }\n  }\n\n  setStyles(settings) {\n    /*eslint dot-notation: \"off\"*/\n\n    let styles = {};\n    let raw = '';\n\n    if ( settings.panels ) {\n      settings.panels.forEach(function(p, i) {\n        styles['corewm-panel'] = {};\n        styles['corewm-notification'] = {};\n        styles['corewm-notification:before'] = {\n          'opacity': p.options.opacity / 100\n        };\n        styles['corewm-panel:before'] = {\n          'opacity': p.options.opacity / 100\n        };\n\n        styles['.custom-notification'] = {};\n        styles['.custom-notification:before'] = {\n          'opacity': p.options.opacity / 100\n        };\n\n        if ( p.options.background ) {\n          styles['corewm-panel:before']['background-color'] = p.options.background;\n          styles['corewm-notification:before']['background-color'] = p.options.background;\n          styles['.custom-notification:before']['background-color'] = p.options.background;\n        }\n        if ( p.options.foreground ) {\n          styles['corewm-panel']['color'] = p.options.foreground;\n          styles['corewm-notification']['color'] = p.options.foreground;\n          styles['.custom-notification']['color'] = p.options.foreground;\n        }\n      });\n    }\n\n    let mw = this.getDefaultSetting('fullscreenTrigger') || 800;\n    raw += '@media all and (max-width: ' + String(mw) + 'px) {\\n';\n    raw += 'application-window {\\n';\n\n    let borderSize = 0;\n    const space = this.getWindowSpace(true);\n    const theme = Theme.getStyleTheme(true);\n    if ( theme && theme.style && theme.style.window ) {\n      borderSize = theme.style.window.border;\n    }\n\n    raw += 'top: calc(' + String(space.top) + 'px + ' + borderSize + ') !important;\\n';\n    raw += 'left: calc(' + String(space.left) + 'px + ' + borderSize + ') !important;\\n';\n    raw += 'right: calc(' + String(borderSize) + ') !important;\\n';\n    raw += 'bottom: calc(' + (space.bottom ? String(space.bottom) + 'px + ' : '') + borderSize + ') !important;\\n';\n    raw += '\\n}';\n    raw += '\\n}';\n\n    styles['#CoreWMDesktopIconView'] = {};\n    if ( settings.invertIconViewColor && settings.backgroundColor ) {\n      styles['#CoreWMDesktopIconView']['color'] = Utils.invertHEX(settings.backgroundColor);\n    }\n\n    if ( Object.keys(styles).length ) {\n      this.createStylesheet(styles, raw);\n    }\n  }\n\n  //\n  // Getters / Setters\n  //\n\n  getWindowSpace(noMargin) {\n    const s = super.getWindowSpace(...arguments);\n    const d = this.getSetting('desktopMargin');\n\n    s.bottom = 0;\n\n    this.panels.forEach(function(p) {\n      if ( p && p.getOntop() ) {\n        const ph = p.getHeight();\n        if ( p.getAutohide() && p.isAutoHidden() ) {\n          s.top    += PADDING_PANEL_AUTOHIDE;\n          s.height -= PADDING_PANEL_AUTOHIDE;\n        } else if ( p.getPosition('top') ) {\n          s.top    += ph;\n          s.height -= ph;\n        } else {\n          s.height -= ph;\n        }\n\n        if ( p._options.get('position') === 'bottom' ) {\n          s.bottom += ph;\n        }\n      }\n    });\n\n    if ( !noMargin ) {\n      if ( d > 0 ) {\n        s.top    += d;\n        s.left   += d;\n        s.width  -= (d * 2);\n        s.height -= (d * 2);\n      }\n    }\n\n    return s;\n  }\n\n  getWindowPosition(borders) {\n    borders = (typeof borders === 'undefined') || (borders === true);\n    let pos = super.getWindowPosition(...arguments);\n\n    const m = borders ? this.getSetting('desktopMargin') : 0;\n    pos.x += m || 0;\n    pos.y += m || 0;\n\n    this.panels.forEach(function(p) {\n      if ( p && p.getOntop() && p.getPosition('top') ) {\n        if ( p.getAutohide() ) {\n          pos.y += PADDING_PANEL_AUTOHIDE;\n        } else {\n          pos.y += p.getHeight();\n        }\n      }\n    });\n\n    return pos;\n  }\n\n  getSetting(k) {\n    const val = super.getSetting(...arguments);\n    if ( typeof val === 'undefined' || val === null ) {\n      return defaultSettings(this.importedSettings)[k];\n    }\n    return val;\n  }\n\n  getDefaultSetting(k) {\n    const settings = defaultSettings(this.importedSettings);\n    if ( typeof k !== 'undefined' ) {\n      return settings[k];\n    }\n    return settings;\n  }\n\n  getPanels() {\n    return this.panels;\n  }\n\n  getPanel(idx) {\n    return this.panels[(idx || 0)];\n  }\n\n  static get Widgets() {\n    return {\n      DigitalClock: WidgetDigitalClock,\n      AnalogClock: WidgetAnalogClock\n    };\n  }\n\n  static get PanelItems() {\n    return {\n      AppMenu: PanelItemAppMenu,\n      Buttons: PanelItemButtons,\n      Clock: PanelItemClock,\n      NotificationArea: PanelItemNotificationArea,\n      Search: PanelItemSearch,\n      Weather: PanelItemWeather,\n      WindowList: PanelItemWindowList\n    };\n  }\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// EXPORTS\n/////////////////////////////////////////////////////////////////////////////\n\nOSjs.Applications.CoreWM = CoreWM;\n\n\n\n\n// WEBPACK FOOTER //\n// ./main.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nconst DOM = OSjs.require('utils/dom');\n\nexport default class WindowSwitcher {\n  constructor() {\n    this.$switcher      = null;\n    this.showing        = false;\n    this.index          = -1;\n    this.winRef         = null;\n  }\n\n  destroy() {\n    this._remove();\n  }\n\n  _remove() {\n    if ( this.$switcher ) {\n      if ( this.$switcher.parentNode ) {\n        this.$switcher.parentNode.removeChild(this.$switcher);\n      }\n      this.$switcher = null;\n    }\n  }\n\n  show(ev, win, wm) {\n    win = win || wm.getLastWindow();\n\n    ev.preventDefault();\n\n    var height = 0;\n    var items  = [];\n    var index  = 0;\n\n    // Render\n    if ( !this.$switcher ) {\n      this.$switcher = document.createElement('corewm-window-switcher');\n    } else {\n      DOM.$empty(this.$switcher);\n    }\n\n    var container, image, label, iter;\n    for ( var i = 0; i < wm._windows.length; i++ ) {\n      iter = wm._windows[i];\n      if ( iter ) {\n        container       = document.createElement('div');\n\n        image           = document.createElement('img');\n        image.src       = iter._icon;\n\n        label           = document.createElement('span');\n        label.innerHTML = iter._title;\n\n        container.appendChild(image);\n        container.appendChild(label);\n        this.$switcher.appendChild(container);\n\n        height += 32; // FIXME: We can automatically calculate this\n\n        if ( win && win._wid === iter._wid ) {\n          index = i;\n        }\n\n        items.push({\n          element: container,\n          win: iter\n        });\n      }\n    }\n\n    if ( !this.$switcher.parentNode ) {\n      document.body.appendChild(this.$switcher);\n    }\n\n    this.$switcher.style.height    = height + 'px';\n    this.$switcher.style.marginTop = (height ? -((height / 2) << 0) : 0) + 'px';\n\n    // Select\n    if ( this.showing ) {\n      this.index++;\n      if ( this.index > (items.length - 1) ) {\n        this.index = -1;\n      }\n    } else {\n      this.index = index;\n      this.showing = true;\n    }\n\n    console.debug('WindowSwitcher::show()', this.index);\n\n    if ( items[this.index] ) {\n      items[this.index].element.className = 'Active';\n      this.winRef = items[this.index].win;\n    } else {\n      this.winRef = null;\n    }\n  }\n\n  hide(ev, win, wm) {\n    if ( !this.showing ) {\n      return;\n    }\n\n    ev.preventDefault();\n\n    this._remove();\n\n    win = this.winRef || win;\n    if ( win ) {\n      win._focus();\n    }\n\n    this.winRef  = null;\n    this.index   = -1;\n    this.showing = false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./windowswitcher.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport Translations from './locales';\n\nconst _ = OSjs.require('core/locales').createLocalizer(Translations);\nconst FS = OSjs.require('utils/fs');\nconst Menu = OSjs.require('gui/menu');\nconst DOM = OSjs.require('utils/dom');\nconst GUI = OSjs.require('utils/gui');\nconst VFS = OSjs.require('vfs/fs');\nconst Process = OSjs.require('core/process');\nconst Theme = OSjs.require('core/theme');\nconst Dialog = OSjs.require('core/dialog');\nconst FileMetadata = OSjs.require('vfs/file');\nconst MountManager = OSjs.require('core/mount-manager');\nconst GUIElement = OSjs.require('gui/element');\nconst WindowManager = OSjs.require('core/window-manager');\n\nfunction createCreateDialog(title, dir, cb) {\n  Dialog.create('Input', {\n    value: title,\n    message: _('Create in {0}', dir)\n  }, function(ev, button, result) {\n    if ( result ) {\n      cb(new FileMetadata(FS.pathJoin(dir, result)));\n    }\n  });\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// SHORTCUT DIALOG\n/////////////////////////////////////////////////////////////////////////////\n\nclass IconViewShortcutDialog extends Dialog {\n  constructor(item, scheme, closeCallback) {\n    super('IconViewShortcutDialog', {\n      title: 'Edit Launcher',\n      icon: 'status/appointment-soon.png',\n      width: 400,\n      height: 220,\n      allow_maximize: false,\n      allow_resize: false,\n      allow_minimize: false\n    }, () => {});\n\n    this.scheme = scheme;\n    this.values = {\n      path: item.path,\n      filename: item.filename,\n      args: item.args || {}\n    };\n\n    this.cb = closeCallback || function() {};\n  }\n\n  init(wm, app) {\n    const root = super.init(...arguments);\n\n    this._render(this._name, this.scheme);\n\n    this._find('InputShortcutLaunch').set('value', this.values.path);\n    this._find('InputShortcutLabel').set('value', this.values.filename);\n    this._find('InputTooltipFormatString').set('value', JSON.stringify(this.values.args || {}));\n\n    this._find('ButtonApply').on('click', () => {\n      this.applySettings();\n      this._close('ok');\n    });\n\n    this._find('ButtonCancel').on('click', () => {\n      this._close();\n    });\n\n    return root;\n  }\n\n  applySettings() {\n    this.values.path = this._find('InputShortcutLaunch').get('value');\n    this.values.filename = this._find('InputShortcutLabel').get('value');\n    this.values.args = JSON.parse(this._find('InputTooltipFormatString').get('value') || {});\n  }\n\n  _close(button) {\n    this.cb(button, this.values);\n    return super._close(...arguments);\n  }\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// ICON VIEW\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * FIXME: This can now be remade into extending the GUI IconView base class\n * FIXME: Implement the grid desktopview I made in Jan\n */\nexport default class DesktopIconView {\n\n  constructor(wm) {\n    this.dialog = null;\n    this.$iconview = null;\n    this.$element = document.createElement('gui-icon-view');\n    this.$element.setAttribute('data-multiple', 'false');\n    //this.$element.setAttribute('no-selection', 'true');\n    this.$element.id = 'CoreWMDesktopIconView';\n    this.shortcutCache = [];\n    this.refreshTimeout = null;\n\n    GUI.createDroppable(this.$element, {\n      onOver: function(ev, el, args) {\n        wm.onDropOver(ev, el, args);\n      },\n\n      onLeave: function() {\n        wm.onDropLeave();\n      },\n\n      onDrop: function() {\n        wm.onDrop();\n      },\n\n      onItemDropped: function(ev, el, item, args) {\n        wm.onDropItem(ev, el, item, args);\n      },\n\n      onFilesDropped: function(ev, el, files, args) {\n        wm.onDropFile(ev, el, files, args);\n      }\n    });\n\n    this.$iconview = GUIElement.createFromNode(this.$element);\n    this.$iconview.build();\n\n    this.$iconview.on('select', () => {\n      if ( wm ) {\n        const win = wm.getCurrentWindow();\n        if ( win ) {\n          win._blur();\n        }\n      }\n    }).on('activate', (ev) => {\n      if ( ev && ev.detail ) {\n        ev.detail.entries.forEach((entry) => {\n          const item = entry.data;\n          const file = new FileMetadata(item);\n          Process.createFromFile(file, item.args);\n        });\n      }\n    }).on('contextmenu', (ev) => {\n      if ( ev && ev.detail && ev.detail.entries ) {\n        this.createContextMenu(ev.detail.entries[0], ev);\n      }\n    });\n\n    this._refresh();\n  }\n\n  destroy() {\n    DOM.$remove(this.$element);\n    this.refreshTimeout = clearTimeout(this.refreshTimeout);\n    this.$element = null;\n    this.$iconview = null;\n\n    if ( this.dialog ) {\n      this.dialog.destroy();\n    }\n    this.dialog = null;\n\n    this.shortcutCache = [];\n  }\n\n  blur() {\n    const cel = GUIElement.createFromNode(this.$element);\n    cel.set('value', null);\n  }\n\n  getRoot() {\n    return this.$element;\n  }\n\n  resize(wm) {\n    const el = this.getRoot();\n    const s  = wm.getWindowSpace();\n\n    if ( el ) {\n      el.style.top    = (s.top) + 'px';\n      el.style.left   = (s.left) + 'px';\n      el.style.width  = (s.width) + 'px';\n      el.style.height = (s.height) + 'px';\n    }\n  }\n\n  _refresh(wm) {\n    const desktopPath = WindowManager.instance.getSetting('desktopPath');\n    const shortcutPath = FS.pathJoin(desktopPath, '.shortcuts.json');\n\n    this.shortcutCache = [];\n\n    this.refreshTimeout = clearTimeout(this.refreshTimeout);\n    this.refreshTimeout = setTimeout(() => {\n      VFS.scandir(desktopPath, {backlink: false}).then((result) => {\n        if ( this.$iconview ) {\n          const entries = result.map((iter) => {\n            if ( iter.type === 'application' || iter.shortcut === true ) {\n              const niter = new FileMetadata(iter);\n              niter.shortcut = true;\n\n              const idx = this.shortcutCache.push(niter) - 1;\n\n              const file = new FileMetadata(iter);\n              file.__index = idx;\n\n              return {\n                _type: iter.type,\n                icon: Theme.getFileIcon(iter, '32x32'),\n                label: iter.filename,\n                value: file,\n                args: iter.args || {}\n              };\n            }\n\n            return {\n              _type: 'vfs',\n              icon: Theme.getFileIcon(iter, '32x32'),\n              label: iter.filename,\n              value: iter\n            };\n\n          }).filter(function(iter) {\n            return iter.value.path !== shortcutPath;\n          });\n\n          this.$iconview.clear().add(entries);\n        }\n      });\n    }, 150);\n  }\n\n  _save(refresh) {\n    const desktopPath = WindowManager.instance.getSetting('desktopPath');\n    const path = FS.pathJoin(desktopPath, '.shortcuts.json');\n    const cache = this.shortcutCache;\n\n    VFS.mkdir(FS.dirname(path)).finally(() => {\n      VFS.write(path, JSON.stringify(cache, null, 4)).then(() => {\n        if ( refresh ) { // Normally caught by VFS message in main.js\n          this._refresh();\n        }\n      });\n    });\n  }\n\n  updateShortcut(data, values) {\n    const o = this.shortcutCache[data.__index];\n    if ( o.path === data.path ) {\n      Object.keys(values).forEach(function(k) {\n        o[k] = values[k];\n      });\n\n      this._save(true);\n    }\n  }\n\n  getShortcutByPath(path) {\n    let found = null;\n    let index = -1;\n\n    this.shortcutCache.forEach(function(i, idx) {\n      if ( !found ) {\n        if ( i.type !== 'application' && i.path === path ) {\n          found = i;\n          index = idx;\n        }\n      }\n    });\n\n    return {item: found, index: index};\n  }\n\n  addShortcut(data, wm, save) {\n    (['icon']).forEach(function(k) {\n      if ( data[k] ) {\n        delete data[k];\n      }\n    });\n\n    if ( data.type === 'application' ) {\n      data.args = data.args || {};\n    }\n\n    data.shortcut = true;\n    this.shortcutCache.push(data);\n    this._save(true);\n  }\n\n  removeShortcut(data) {\n    const o = this.shortcutCache[data.__index];\n    if ( o && o.path === data.path ) {\n      this.shortcutCache.splice(data.__index, 1);\n      this._save(true);\n    }\n  }\n\n  _getContextMenu(item) {\n    const desktopPath = WindowManager.instance.getSetting('desktopPath');\n    const menu = [\n      {\n        title: _('LBL_UPLOAD'),\n        onClick: () => {\n          Dialog.create('FileUpload', {\n            dest: desktopPath\n          }, () => {\n            this._refresh();\n          });\n        }\n      },\n      {\n        title: _('LBL_CREATE'),\n        menu: [{\n          title: _('LBL_FILE'),\n          onClick: () => {\n            createCreateDialog('New file', desktopPath, (f) => {\n              VFS.write(f, '').catch((err) => {\n                OSjs.error('CoreWM', _('ERR_VFSMODULE_MKFILE'), err);\n              });\n            });\n          }\n        }, {\n          title: _('LBL_DIRECTORY'),\n          onClick: () => {\n            createCreateDialog('New directory', desktopPath, (f) => {\n              VFS.mkdir(f).catch((err) => {\n                OSjs.error('CoreWM', _('ERR_VFSMODULE_MKDIR'), err);\n              });\n            });\n          }\n        }]\n      }\n    ];\n\n    if ( item && item.data ) {\n      const file = item.data;\n\n      if ( file.type === 'application' ) {\n        menu.push({\n          title: _('Edit shortcut'),\n          onClick: () => this.openShortcutEdit(file)\n        });\n      }\n\n      const m = MountManager.getModuleFromPath(file.path);\n      if ( !m || m.option('root') !== desktopPath  ) {\n        menu.push({\n          title: _('Remove shortcut'),\n          onClick: () => this.removeShortcut(file)\n        });\n      } else {\n        menu.push({\n          title: _('LBL_DELETE'),\n          onClick: () =>VFS.unlink(file) // Caught by VFS message in main.js\n        });\n      }\n    }\n\n    return menu;\n  }\n\n  createContextMenu(item, ev) {\n    const wm = WindowManager.instance;\n    const menu = wm._getContextMenu(item);\n    Menu.create(menu, ev);\n  }\n\n  openShortcutEdit(item) {\n    if ( this.dialog ) {\n      this.dialog._close();\n    }\n\n    const wm = WindowManager.instance;\n\n    this.dialog = new IconViewShortcutDialog(item, wm._scheme, (button, values) => {\n      if ( button === 'ok' ) {\n        this.updateShortcut(item, values);\n      }\n      this.dialog = null;\n    });\n\n    wm.addWindow(this.dialog, true);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./iconview.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport Translations from './locales';\nimport PanelItem from './panelitem';\n\nconst _ = OSjs.require('core/locales').createLocalizer(Translations);\nconst DOM = OSjs.require('utils/dom');\nconst Events = OSjs.require('utils/events');\nconst Menu = OSjs.require('gui/menu');\nconst WindowManager = OSjs.require('core/window-manager');\n\n/*eslint valid-jsdoc: \"off\"*/\n\nconst PANEL_SHOW_TIMEOUT = 150;\nconst PANEL_HIDE_TIMEOUT = 600;\n\nexport default class Panel {\n\n  constructor(name, options, wm) {\n    options = options || {};\n\n    this._name = name;\n    this._$element = null;\n    this._$container = null;\n    this._items = [];\n    this._outtimeout = null;\n    this._intimeout = null;\n    this._options = options.mergeDefaults({\n      position: 'top'\n    });\n\n    console.debug('Panel::construct()', this._name, this._options.get());\n  }\n\n  init(root) {\n    var wm = WindowManager.instance;\n\n    function createMenu(ev) {\n      var menu = [\n        {title: _('Open Panel Settings'), onClick: function(ev) {\n          wm.showSettings('panel');\n        }}\n      ];\n\n      if ( wm.getSetting('useTouchMenu') === true ) {\n        menu.push({\n          title: _('Turn off TouchMenu'),\n          onClick: function(ev) {\n            wm.applySettings({useTouchMenu: false}, false, true);\n          }\n        });\n      } else {\n        menu.push({\n          title: _('Turn on TouchMenu'),\n          onClick: function(ev) {\n            wm.applySettings({useTouchMenu: true}, false, true);\n          }\n        });\n      }\n\n      Menu.create(menu, ev);\n    }\n\n    this._$container = document.createElement('corewm-panel-container');\n    this._$element = document.createElement('corewm-panel');\n    this._$element.setAttribute('data-orientation', 'horizontal');\n    this._$element.setAttribute('role', 'toolbar');\n\n    /*Utils.$bind(this._$element, 'mousedown', function(ev) {\n      ev.preventDefault();\n    }); // This makes DnD not work in panel items*/\n    Events.$bind(this._$element, 'mouseover', (ev) => {\n      this.onMouseOver(ev);\n    });\n    Events.$bind(this._$element, 'mouseout', (ev) => {\n      this.onMouseOut(ev);\n    });\n    Events.$bind(this._$element, 'click', function(ev) {\n      Menu.blur();\n    });\n    Events.$bind(this._$element, 'contextmenu', function(ev) {\n      createMenu(ev);\n    });\n\n    Events.$bind(document, 'mouseout:panelmouseleave', (ev) => {\n      this.onMouseLeave(ev);\n    }, false);\n\n    this._$element.appendChild(this._$container);\n    root.appendChild(this._$element);\n\n    setTimeout(() => this.update(), 0);\n  }\n\n  destroy() {\n    this._clearTimeouts();\n\n    Events.$unbind(document, 'mouseout:panelmouseleave');\n    Events.$unbind(this._$element);\n\n    this._items.forEach(function(item) {\n      item.destroy();\n    });\n    this._items = [];\n    this._$element = DOM.$remove(this._$element);\n    this._$container = null;\n  }\n\n  update(options) {\n    options = options || this._options.get();\n\n    // CSS IS SET IN THE WINDOW MANAGER!\n    var attrs = {\n      ontop: !!options.ontop,\n      position: options.position || 'bottom'\n    };\n\n    if ( options.autohide ) {\n      this.onMouseOut();\n    }\n    if ( this._$element ) {\n      Object.keys(attrs).forEach((k) => {\n        this._$element.setAttribute('data-' + k, typeof attrs[k] === 'boolean' ? (attrs[k] ? 'true' : 'false') : attrs[k]);\n      });\n    }\n    this._options.set(null, options);\n  }\n\n  autohide(hide) {\n    if ( !this._options.get('autohide') || !this._$element ) {\n      return;\n    }\n\n    if ( hide ) {\n      this._$element.setAttribute('data-autohide', 'true');\n    } else {\n      this._$element.setAttribute('data-autohide', 'false');\n    }\n  }\n\n  _clearTimeouts() {\n    if ( this._outtimeout ) {\n      clearTimeout(this._outtimeout);\n      this._outtimeout = null;\n    }\n    if ( this._intimeout ) {\n      clearTimeout(this._intimeout);\n      this._intimeout = null;\n    }\n  }\n\n  onMouseLeave(ev) {\n    var from = ev.relatedTarget || ev.toElement;\n    if ( !from || from.nodeName === 'HTML' ) {\n      this.onMouseOut(ev);\n    }\n  }\n\n  onMouseOver() {\n    this._clearTimeouts();\n    this._intimeout = setTimeout(() => {\n      this.autohide(false);\n    }, PANEL_SHOW_TIMEOUT);\n  }\n\n  onMouseOut() {\n    this._clearTimeouts();\n    this._outtimeout = setTimeout(() => {\n      this.autohide(true);\n    }, PANEL_HIDE_TIMEOUT);\n  }\n\n  addItem(item) {\n    if ( !(item instanceof PanelItem) ) {\n      throw 'Expected a PanelItem in Panel::addItem()';\n    }\n\n    this._items.push(item);\n    this._$container.appendChild(item.init());\n  }\n\n  isAutoHidden() {\n    if ( this._$element ) {\n      return this._$element.getAttribute('data-autohide') === 'true';\n    }\n\n    return false;\n  }\n\n  getItemByType(type) {\n    return this.getItem(type);\n  }\n\n  getItemsByType(type) {\n    return this.getItem(type, true);\n  }\n\n  getItem(type, multiple) {\n    var result = multiple ? [] : null;\n\n    this._items.forEach(function(item, idx) {\n      if ( item instanceof type ) {\n        if ( multiple ) {\n          result.push(item);\n        } else {\n          result = item;\n          return false;\n        }\n      }\n      return true;\n    });\n\n    return result;\n  }\n\n  getOntop() {\n    return this._options.get('ontop');\n  }\n\n  getPosition(pos) {\n    return pos ? (this._options.get('position') === pos) : this._options.get('position');\n  }\n\n  getAutohide() {\n    return this._options.get('autohide');\n  }\n\n  getRoot() {\n    return this._$element;\n  }\n\n  getHeight() {\n    return this._$element ? this._$element.offsetHeight : 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panel.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport Widget from '../widget';\nconst Locales = OSjs.require('core/locales');\nconst Dialog = OSjs.require('core/dialog');\n\n/////////////////////////////////////////////////////////////////////////////\n// ITEM\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * Widget: DigitalClock\n */\nexport default class WidgetDigitalClock extends Widget {\n\n  constructor(settings) {\n    super('DigitalClock', {\n      width: 300,\n      height: 100,\n      aspect: true,\n      top: 100,\n      right: 20,\n      canvas: true,\n      frequency: 1,\n      resizable: true,\n      viewBox: true,\n      settings: {\n        enabled: false,\n        tree: {\n          color: '#ffffff'\n        }\n      }\n    }, settings);\n  }\n\n  onRender() {\n    if ( !this._$canvas ) {\n      return;\n    }\n\n    const ctx = this._$context;\n    const now = new Date();\n    const txt = [now.getHours(), now.getMinutes(), now.getSeconds()].map(function(i) {\n      return i < 10 ? '0' + String(i) : String(i);\n    }).join(':');\n\n    const ratio = 0.55;\n    const xOffset = -10;\n    const fontSize = Math.round(this._dimension.height * ratio);\n\n    ctx.font = String(fontSize) + 'px Digital-7Mono';\n    //ctx.textAlign = 'center'; // Does not work properly for @font-facve\n    ctx.textBaseline = 'middle';\n    ctx.fillStyle = this._getSetting('color');\n\n    const x = Math.round(this._dimension.width / 2);\n    const y = Math.round(this._dimension.height / 2);\n    const m = ctx.measureText(txt).width;\n\n    ctx.clearRect(0, 0, this._dimension.width, this._dimension.height);\n    //ctx.fillText(txt, x, y);\n    ctx.fillText(txt, x - (m / 2) + xOffset, y);\n  }\n\n  onContextMenu(ev) {\n    const color = this._getSetting('color') || '#ffffff';\n\n    return [{\n      title: Locales._('LBL_COLOR'),\n      onClick: () => {\n        Dialog.create('Color', {\n          color: color\n        }, (ev, btn, result) => {\n          if ( btn === 'ok' ) {\n            this._setSetting('color', result.hex, true);\n          }\n        });\n      }\n    }];\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./widgets/digitalclock.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport Widget from '../widget';\n\n/**\n * Widget: AnalogClock\n */\nexport default class WidgetAnalogClock extends Widget {\n  constructor(settings) {\n    super('AnalogClock', {\n      width: 300,\n      height: 300,\n      aspect: true,\n      top: 100,\n      right: 20,\n      canvas: true,\n      frequency: 1,\n      resizable: true,\n      viewBox: true\n    }, settings);\n\n    this.radius = 300 / 2;\n  }\n\n  onRender() {\n    if ( !this._$canvas ) {\n      return;\n    }\n\n    const ctx = this._$context;\n    const radius = Math.round(this.radius * 0.95);\n\n    function drawHand(ctx, pos, length, width) {\n      ctx.beginPath();\n      ctx.lineWidth = width;\n      ctx.lineCap = 'round';\n      ctx.moveTo(0, 0);\n      ctx.rotate(pos);\n      ctx.lineTo(0, -length);\n      ctx.stroke();\n      ctx.rotate(-pos);\n    }\n\n    // Clear\n    ctx.clearRect(0, 0, this.radius * 2, this.radius * 2);\n\n    // Draw face\n    ctx.beginPath();\n    ctx.arc(0, 0, radius, 0, 2 * Math.PI);\n    ctx.fillStyle = 'white';\n    ctx.fill();\n\n    ctx.lineWidth = radius * 0.04;\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);\n    ctx.fillStyle = '#000';\n    ctx.fill();\n\n    // Draw numbers\n    ctx.font = radius * 0.15 + 'px arial';\n    ctx.textBaseline = 'middle';\n    ctx.textAlign = 'center';\n\n    let ang;\n    for ( let num = 1; num < 13; num++ ) {\n      ang = num * Math.PI / 6;\n      ctx.rotate(ang);\n      ctx.translate(0, -radius * 0.85);\n      ctx.rotate(-ang);\n      ctx.fillText(num.toString(), 0, 0);\n      ctx.rotate(ang);\n      ctx.translate(0, radius * 0.85);\n      ctx.rotate(-ang);\n    }\n\n    // Draw time\n    const now = new Date();\n    let hour = now.getHours();\n    let minute = now.getMinutes();\n    let second = now.getSeconds();\n\n    hour = hour % 12;\n    hour = (hour * Math.PI / 6) + (minute * Math.PI / (6 * 60)) + (second * Math.PI / (360 * 60));\n    minute = (minute * Math.PI / 30) + (second * Math.PI / (30 * 60));\n    second = (second * Math.PI / 30);\n\n    drawHand(ctx, hour, radius * 0.5, radius * 0.07);\n    drawHand(ctx, minute, radius * 0.8, radius * 0.07);\n    drawHand(ctx, second, radius * 0.9, radius * 0.02);\n  }\n\n  onResize(dimension) {\n    if ( !this._$canvas || !this._$context ) {\n      return;\n    }\n\n    this.radius = dimension.height / 2;\n    this._$context.translate(this.radius, this.radius);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widgets/analogclock.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport PanelItem from '../panelitem';\nimport {showMenu} from '../menu';\n\nconst Theme = OSjs.require('core/theme');\nconst Events = OSjs.require('utils/events');\nconst Locales = OSjs.require('core/locales');\nconst WindowManager = OSjs.require('core/window-manager');\n\n/*eslint valid-jsdoc: \"off\"*/\nexport default class PanelItemAppMenu extends PanelItem {\n\n  constructor(settings) {\n    super('PanelItemAppMenu', 'AppMenu', settings, {});\n  }\n\n  init() {\n    const root = super.init(...arguments);\n    const wm = WindowManager.instance;\n\n    const img = document.createElement('img');\n    img.alt = '';\n    img.src = Theme.getIcon(wm.getSetting('icon') || 'osjs-white.png');\n\n    const sel = document.createElement('li');\n    sel.title = Locales._('LBL_APPLICATIONS');\n    sel.className = 'corewm-panel-button-centered';\n    sel.setAttribute('role', 'button');\n    sel.setAttribute('data-label', 'OS.js Application Menu');\n    sel.appendChild(img);\n\n    Events.$bind(sel, 'mousedown', function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    });\n    Events.$bind(sel, 'click', function(ev) {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      const wm = WindowManager.instance;\n      if ( wm ) {\n        showMenu(ev);\n      }\n    });\n\n    this._$container.appendChild(sel);\n\n    return root;\n  }\n\n  destroy() {\n    if ( this._$container ) {\n      Events.$unbind(this._$container.querySelector('li'), 'click');\n    }\n    return super.destroy(...arguments);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/appmenu.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport Translations from './locales';\n\nconst _ = OSjs.require('core/locales').createLocalizer(Translations);\nconst Menu = OSjs.require('gui/menu');\nconst GUI = OSjs.require('utils/gui');\nconst DOM = OSjs.require('utils/dom');\nconst Events = OSjs.require('utils/events');\nconst Process = OSjs.require('core/process');\nconst Theme = OSjs.require('core/theme');\nconst WindowManager = OSjs.require('core/window-manager');\nconst PackageManager = OSjs.require('core/package-manager');\n\nclass CategorizedApplicationMenu {\n\n  constructor() {\n    var apps = PackageManager.getPackages();\n    var wm = WindowManager.instance;\n    var cfgCategories = wm.getDefaultSetting('menu');\n\n    function createEvent(iter) {\n      return function(el) {\n        GUI.createDraggable(el, {\n          type: 'application',\n          data: {\n            launch: iter.name\n          }\n        });\n      };\n    }\n\n    function clickEvent(iter) {\n      return function() {\n        Process.create(iter.name);\n      };\n    }\n\n    var cats = {};\n\n    Object.keys(cfgCategories).forEach(function(c) {\n      cats[c] = [];\n    });\n\n    Object.keys(apps).forEach(function(a) {\n      var iter = apps[a];\n      if ( iter.type === 'application' && iter.visible !== false ) {\n        var cat = iter.category && cats[iter.category] ? iter.category : 'unknown';\n        cats[cat].push({name: a, data: iter});\n      }\n    });\n\n    var list = [];\n    Object.keys(cats).forEach(function(c) {\n      var submenu = [];\n      for ( var a = 0; a < cats[c].length; a++ ) {\n        var iter = cats[c][a];\n        submenu.push({\n          title: iter.data.name,\n          icon: Theme.getIcon(iter.data.icon, '16x16'),\n          tooltip: iter.data.description,\n          onCreated: createEvent(iter),\n          onClick: clickEvent(iter)\n        });\n      }\n\n      if ( submenu.length ) {\n        list.push({\n          title: _(cfgCategories[c].title),\n          icon: Theme.getIcon(cfgCategories[c].icon, '16x16'),\n          menu: submenu\n        });\n      }\n    });\n\n    this.list = list;\n  }\n\n  show(ev) {\n    var m = Menu.create(this.list, ev);\n    if ( m && m.$element ) {\n      DOM.$addClass(m.$element, 'CoreWMDefaultApplicationMenu');\n    }\n  }\n\n}\n\nclass ApplicationMenu {\n\n  constructor() {\n    var root = this.$element = document.createElement('gui-menu');\n    this.$element.id = 'CoreWMApplicationMenu';\n\n    var apps = PackageManager.getPackages();\n\n    function createEntry(a, iter) {\n      var entry = document.createElement('gui-menu-entry');\n\n      var img = document.createElement('img');\n      img.src = Theme.getIcon(iter.icon, '32x32');\n\n      var txt = document.createElement('div');\n      txt.appendChild(document.createTextNode(iter.name)); //.replace(/([^\\s-]{8})([^\\s-]{8})/, '$1-$2')));\n\n      Events.$bind(entry, 'click', function(ev) {\n        ev.stopPropagation();\n        Process.create(a);\n        Menu.blur();\n      });\n\n      entry.appendChild(img);\n      entry.appendChild(txt);\n      root.appendChild(entry);\n    }\n\n    Object.keys(apps).forEach(function(a) {\n      var iter = apps[a];\n      if ( iter.type === 'application' && iter.visible !== false ) {\n        createEntry(a, iter);\n      }\n    });\n  }\n\n  destroy() {\n    if ( this.$element ) {\n      this.$element.querySelectorAll('gui-menu-entry').forEach(function(el) {\n        Events.$unbind(el, 'click');\n      });\n      DOM.$remove(this.$element);\n    }\n    this.$element = null;\n  }\n\n  show(pos) {\n    if ( !this.$element ) {\n      return;\n    }\n\n    if ( !this.$element.parentNode ) {\n      document.body.appendChild(this.$element);\n    }\n\n    // FIXME: This is a very hackish way of doing it and does not work when button is moved!\n    DOM.$removeClass(this.$element, 'AtBottom');\n    DOM.$removeClass(this.$element, 'AtTop');\n    if ( pos.y > (window.innerHeight / 2) ) {\n      DOM.$addClass(this.$element, 'AtBottom');\n\n      this.$element.style.top = 'auto';\n      this.$element.style.bottom = '30px';\n    } else {\n      DOM.$addClass(this.$element, 'AtTop');\n\n      this.$element.style.bottom = 'auto';\n      this.$element.style.top = '30px';\n    }\n\n    this.$element.style.left = pos.x + 'px';\n  }\n\n  getRoot() {\n    return this.$element;\n  }\n}\n\nexport function showMenu(ev) {\n  const wm = WindowManager.instance;\n\n  let inst;\n  if ( (wm && wm.getSetting('useTouchMenu') === true) ) {\n    inst = new ApplicationMenu();\n\n    var pos = {x: ev.clientX, y: ev.clientY};\n    if ( ev.target ) {\n      var rect = DOM.$position(ev.target, document.body);\n      if ( rect.left && rect.top && rect.width && rect.height ) {\n        pos.x = rect.left - (rect.width / 2);\n\n        if ( pos.x <= 16 ) {\n          pos.x = 0; // Snap to left\n        }\n\n        var panel = DOM.$parent(ev.target, function(node) {\n          return node.tagName.toLowerCase() === 'corewm-panel';\n        });\n\n        if ( panel ) {\n          var prect = DOM.$position(panel);\n          pos.y = prect.top + prect.height;\n        } else {\n          pos.y = rect.top + rect.height;\n        }\n      }\n    }\n    Menu.create(null, pos, inst);\n  } else {\n    inst = new CategorizedApplicationMenu();\n    inst.show(ev);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./menu.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport PanelItem from '../panelitem';\n\nconst GUI = OSjs.require('utils/gui');\nconst Menu = OSjs.require('gui/menu');\nconst DOM = OSjs.require('utils/dom');\nconst Init = OSjs.require('core/init');\nconst Theme = OSjs.require('core/theme');\nconst Events = OSjs.require('utils/events');\nconst Locales = OSjs.require('core/locales');\nconst Process = OSjs.require('core/process');\nconst PackageManager = OSjs.require('core/package-manager');\nconst WindowManager = OSjs.require('core/window-manager');\n\n/////////////////////////////////////////////////////////////////////////////\n// ITEM\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * PanelItem: Buttons\n */\nexport default class PanelItemButtons extends PanelItem {\n  constructor(settings) {\n    super('PanelItemButtons', 'Buttons', settings, {\n      buttons: [\n        {\n          title: Locales._('LBL_SETTINGS'),\n          icon: 'categories/applications-system.png',\n          launch: 'ApplicationSettings'\n        }\n      ]\n    });\n  }\n\n  init() {\n    const root = super.init(...arguments);\n\n    this.renderButtons();\n\n    let ghost, lastTarget;\n\n    function clearGhost(inner) {\n      ghost = DOM.$remove(ghost);\n      if ( !inner ) {\n        lastTarget = null;\n      }\n    }\n\n    function createGhost(target) {\n      const isUl = target.tagName === 'UL';\n      if ( !target || lastTarget === target || isUl ) {\n        return;\n      }\n\n      const ul = target.parentNode;\n      lastTarget = target;\n\n      clearGhost(true);\n\n      ghost = document.createElement('li');\n      ghost.className = 'Ghost';\n\n      ul.insertBefore(ghost, target);\n    }\n\n    let counter = 0;\n    GUI.createDroppable(this._$container, {\n      onOver: (ev, el, args) => {\n        if ( ev.target ) {\n          createGhost(ev.target);\n        }\n      },\n\n      onEnter: (ev) => {\n        ev.preventDefault();\n        counter++;\n      },\n\n      onLeave: (ev) => {\n        if ( counter <= 0 ) {\n          clearGhost();\n        }\n      },\n\n      onDrop: () => {\n        counter = 0;\n        clearGhost();\n      },\n\n      onItemDropped: (ev, el, item, args) => {\n        if ( item && item.data ) {\n          let newPosition = 0;\n          if ( DOM.$hasClass(ev.target, 'Ghost') ) {\n            newPosition = DOM.$index(ev.target);\n          }\n\n          if ( typeof item.data.position !== 'undefined' ) {\n            this.moveButton(item.data.position, newPosition - 1);\n          } else if ( item.data.mime === 'osjs/application' ) {\n            const appName = item.data.path.split('applications:///')[1];\n            this.createButton(appName, newPosition);\n          }\n        }\n      }\n    });\n\n    return root;\n  }\n\n  clearButtons() {\n    DOM.$empty(this._$container);\n  }\n\n  renderButtons() {\n    const wm = WindowManager.instance;\n\n    const systemButtons = {\n      applications: (ev) => {\n        wm.showMenu(ev);\n      },\n      settings: (ev) => {\n        if ( wm ) {\n          wm.showSettings();\n        }\n      },\n      exit: (ev) => {\n        Init.logout();\n      }\n    };\n\n    this.clearButtons();\n\n    (this._settings.get('buttons') || []).forEach((btn, idx) => {\n      let menu = [{\n        title: 'Remove button',\n        onClick: () => {\n          this.removeButton(idx);\n        }\n      }];\n      let callback = () => {\n        Process.create(btn.launch);\n      };\n\n      if ( btn.system ) {\n        menu = null; //systemMenu;\n        callback = function(ev) {\n          ev.stopPropagation();\n          systemButtons[btn.system](ev);\n        };\n      }\n\n      this.addButton(btn.title, btn.icon, menu, callback, idx);\n    });\n  }\n\n  removeButton(index) {\n    const buttons = this._settings.get('buttons');\n    buttons.splice(index, 1);\n    this.renderButtons();\n\n    this._settings.save();\n  }\n\n  moveButton(from, to) {\n    const buttons = this._settings.get('buttons');\n\n    if ( from === to || buttons.length <= 1 ) {\n      return;\n    }\n\n    if ( to >= buttons.length ) {\n      let k = to - buttons.length;\n      while ( (k--) + 1 ) {\n        buttons.push(window.undefined);\n      }\n    }\n\n    buttons.splice(to, 0, buttons.splice(from, 1)[0]);\n\n    this._settings.save(() => {\n      this.renderButtons();\n    });\n  }\n\n  createButton(appName, position) {\n    const pkg = PackageManager.getPackage(appName);\n    const buttons = this._settings.get('buttons');\n\n    const iter = {\n      title: appName,\n      icon: pkg.icon,\n      launch: appName\n    };\n\n    if ( !buttons.length ) {\n      buttons.push(iter);\n    } else {\n      buttons.splice(position, 0, iter);\n    }\n\n    this.renderButtons();\n\n    this._settings.save();\n  }\n\n  addButton(title, icon, menu, callback, idx) {\n    const img = document.createElement('img');\n    img.alt = '';\n    img.src = Theme.getIcon(icon);\n\n    const sel = document.createElement('li');\n    sel.title = title;\n    sel.setAttribute('role', 'button');\n    sel.setAttribute('aria-label', title);\n    sel.appendChild(img);\n\n    Events.$bind(sel, 'mousedown', function(ev) {\n      ev.stopPropagation();\n    });\n    Events.$bind(sel, 'click', callback, true);\n    Events.$bind(sel, 'contextmenu', function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      if ( menu ) {\n        Menu.create(menu, ev);\n      }\n    });\n\n    GUI.createDraggable(sel, {\n      data: {\n        position: idx\n      },\n      onStart: function(ev, el) {\n        setTimeout(function() {\n          DOM.$addClass(el, 'Ghosting');\n        }, 1);\n      },\n      onEnd: function(ev, el) {\n        DOM.$removeClass(el, 'Ghosting');\n      }\n    });\n\n    this._$container.appendChild(sel);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/buttons.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport PanelItem from '../panelitem';\nimport PanelDialog from '../panelitemdialog';\n\nconst DOM = OSjs.require('utils/dom');\nconst ExtendedDate = OSjs.require('helpers/date');\n\n/////////////////////////////////////////////////////////////////////////////\n// Clock Settings Dialog\n/////////////////////////////////////////////////////////////////////////////\n\nclass ClockSettingsDialog extends PanelDialog {\n\n  constructor(panelItem, scheme, closeCallback) {\n    super('ClockSettingsDialog', {\n      title: 'Clock Settings',\n      icon: 'status/appointment-soon.png',\n      width: 400,\n      height: 280\n    }, panelItem._settings, scheme, closeCallback);\n  }\n\n  init(wm, app) {\n    const root = super.init(...arguments);\n    this._find('InputUseUTC').set('value', this._settings.get('utc'));\n    this._find('InputInterval').set('value', String(this._settings.get('interval')));\n    this._find('InputTimeFormatString').set('value', this._settings.get('format'));\n    this._find('InputTooltipFormatString').set('value', this._settings.get('tooltip'));\n    return root;\n  }\n\n  applySettings() {\n    this._settings.set('utc', this._find('InputUseUTC').get('value'));\n    this._settings.set('interval', parseInt(this._find('InputInterval').get('value'), 10));\n    this._settings.set('format', this._find('InputTimeFormatString').get('value'));\n    this._settings.set('tooltip', this._find('InputTooltipFormatString').get('value'), true);\n  }\n\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// ITEM\n/////////////////////////////////////////////////////////////////////////////\n\n/**\n * PanelItem: Clock\n */\nexport default class PanelItemClock extends PanelItem {\n  constructor(settings) {\n    super('PanelItemClock corewm-panel-right', 'Clock', settings, {\n      utc: false,\n      interval: 1000,\n      format: 'H:i:s',\n      tooltip: 'l, j F Y'\n    });\n    this.clockInterval  = null;\n    this.$clock = null;\n  }\n\n  createInterval() {\n    const timeFmt = this._settings.get('format');\n    const tooltipFmt = this._settings.get('tooltip');\n\n    const update = () => {\n      let clock = this.$clock;\n      if ( clock ) {\n        const now = new Date();\n        const t = ExtendedDate.format(now, timeFmt);\n        const d = ExtendedDate.format(now, tooltipFmt);\n        DOM.$empty(clock);\n        clock.appendChild(document.createTextNode(t));\n        clock.setAttribute('aria-label', String(t));\n        clock.title = d;\n      }\n      clock = null;\n    };\n\n    const create = (interval) => {\n      clearInterval(this.clockInterval);\n      this.clockInterval = clearInterval(this.clockInterval);\n      this.clockInterval = setInterval(() => update(), interval);\n    };\n\n    create(this._settings.get('interval'));\n    update();\n  }\n\n  init() {\n    const root = super.init(...arguments);\n\n    this.$clock = document.createElement('span');\n    this.$clock.innerHTML = '00:00:00';\n    this.$clock.setAttribute('role', 'button');\n\n    const li = document.createElement('li');\n    li.appendChild(this.$clock);\n    this._$container.appendChild(li);\n\n    this.createInterval();\n\n    return root;\n  }\n\n  applySettings() {\n    this.createInterval();\n  }\n\n  openSettings() {\n    return super.openSettings(ClockSettingsDialog, {});\n  }\n\n  destroy() {\n    this.clockInterval = clearInterval(this.clockInterval);\n    this.$clock = DOM.$remove(this.$clock);\n    return super.destroy(...arguments);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/clock.js","const Window = OSjs.require('core/window');\n\nexport default class PanelItemDialog extends Window {\n\n  constructor(name, args, settings, scheme, closeCallback) {\n    super(name, args, null);\n\n    this._closeCallback = closeCallback || function() {};\n    this._settings = settings;\n    this._scheme = scheme;\n  }\n\n  init(wm, app) {\n    var root = Window.prototype.init.apply(this, arguments);\n\n    this._render(this._name, this._scheme);\n\n    this._find('ButtonApply').on('click', () => {\n      this.applySettings();\n      this._close('ok');\n    });\n\n    this._find('ButtonCancel').on('click', () => {\n      this._close();\n    });\n\n    return root;\n  }\n\n  applySettings() {\n  }\n\n  _close(button) {\n    this._closeCallback(button);\n    return super._close(...arguments);\n  }\n\n  _destroy() {\n    this._settings = null;\n    return super._destroy(...arguments);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitemdialog.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport PanelItem from '../panelitem';\n\nconst Menu = OSjs.require('gui/menu');\nconst DOM = OSjs.require('utils/dom');\nconst Events = OSjs.require('utils/events');\n\n/*eslint valid-jsdoc: \"off\"*/\n\n// NOTE: This is a workaround for resetting items on panel change\nlet _restartFix = {};\n\nclass NotificationAreaItem {\n\n  constructor(name, opts) {\n    opts = opts || {};\n\n    this.name           = name;\n    this.opts           = opts;\n    this.$container     = document.createElement('li');\n    this.$image         = (opts.image || opts.icon) ? document.createElement('img') : null;\n    this.onCreated      = opts.onCreated     || function() {};\n    this.onInited       = opts.onInited      || function() {};\n    this.onDestroy      = opts.onDestroy     || function() {};\n    this.onClick        = opts.onClick       || function() {};\n    this.onContextMenu  = opts.onContextMenu || function() {};\n\n    this._build(name);\n\n    this.onCreated();\n  }\n\n  _build(name) {\n    /* eslint no-invalid-this: \"off\" */\n    const classNames = ['NotificationArea', 'NotificationArea_' + name];\n    if ( this.opts.className ) {\n      classNames.push(this.opts.className);\n    }\n\n    this.$container.className = classNames.join(' ');\n    this.$container.setAttribute('role', 'button');\n    this.$container.setAttribute('aria-label', this.opts.title);\n\n    if ( this.opts.tooltip ) {\n      this.$container.title = this.opts.tooltip;\n    }\n\n    Events.$bind(this.$container, 'mousedown', function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    });\n\n    const self = this;\n\n    Events.$bind(this.$container, 'click', function(ev) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      Menu.blur();\n      self.onClick.apply(this, arguments);\n      return false;\n    });\n\n    Events.$bind(this.$container, 'contextmenu', function(ev) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      Menu.blur();\n      self.onContextMenu.apply(this, arguments);\n      return false;\n    });\n\n    if ( this.$image ) {\n      this.$image.title = this.opts.title || '';\n      this.$image.src   = (this.opts.image || this.opts.icon || 'about:blank');\n      this.$container.appendChild(this.$image);\n    }\n\n    const inner = document.createElement('div');\n    inner.appendChild(document.createElement('div'));\n    this.$container.appendChild(inner);\n  }\n\n  init(root) {\n    root.appendChild(this.$container);\n\n    try {\n      this.onInited(this.$container, this.$image);\n    } catch ( e ) {\n      console.warn('NotificationAreaItem', 'onInited error');\n      console.warn(e, e.stack);\n    }\n  }\n\n  setIcon(src) {\n    return this.setImage(src);\n  }\n\n  setImage(src) {\n    if ( this.$image ) {\n      this.$image.src = src;\n    }\n    this.opts.image = src;\n  }\n\n  setTitle(title) {\n    if ( this.$image ) {\n      this.$image.title = title;\n    }\n    this.opts.title = title;\n  }\n\n  destroy() {\n    if ( this.$container ) {\n      Events.$unbind(this.$container, 'click');\n      Events.$unbind(this.$container, 'mousedown');\n      Events.$unbind(this.$container, 'contextmenu');\n    }\n    this.onDestroy();\n\n    this.$image     = DOM.$remove(this.$image);\n    this.$container = DOM.$remove(this.$container);\n  }\n}\n\nexport default class PanelItemNotificationArea extends PanelItem {\n  constructor() {\n    super('PanelItemNotificationArea corewm-panel-right');\n    this.notifications = {};\n  }\n\n  init() {\n    const root = super.init(...arguments);\n    root.setAttribute('role', 'toolbar');\n\n    const fix = Object.keys(_restartFix);\n    if ( fix.length ) {\n      fix.forEach((k) => {\n        this.createNotification(k, _restartFix[k]);\n      });\n    }\n\n    return root;\n  }\n\n  createNotification(name, opts) {\n    if ( this._$root ) {\n      if ( !this.notifications[name] ) {\n        const item = new NotificationAreaItem(name, opts);\n        item.init(this._$container);\n        this.notifications[name] = item;\n        _restartFix[name] = opts;\n\n        return item;\n      }\n    }\n    return null;\n  }\n\n  removeNotification(name) {\n    if ( this._$root ) {\n      if ( this.notifications[name] ) {\n        this.notifications[name].destroy();\n        delete this.notifications[name];\n        if ( _restartFix[name] ) {\n          delete _restartFix[name];\n        }\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getNotification(name) {\n    if ( this._$root ) {\n      if ( this.notifications[name] ) {\n        return this.notifications[name];\n      }\n    }\n    return false;\n  }\n\n  destroy() {\n    for ( let i in this.notifications ) {\n      if ( this.notifications.hasOwnProperty(i) ) {\n        if ( this.notifications[i] ) {\n          this.notifications[i].destroy();\n        }\n        delete this.notifications[i];\n      }\n    }\n\n    return super.destroy(...arguments);\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/notificationarea.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n/*eslint valid-jsdoc: \"off\"*/\nimport PanelItem from '../panelitem';\n\nconst DOM = OSjs.require('utils/dom');\nconst Hooks = OSjs.require('helpers/hooks');\nconst Theme = OSjs.require('core/theme');\nconst Events = OSjs.require('utils/events');\nconst Locales = OSjs.require('core/locales');\nconst Keycodes = OSjs.require('utils/keycodes');\nconst Process = OSjs.require('core/process');\nconst FileMetadata = OSjs.require('vfs/file');\nconst SearchEngine = OSjs.require('core/search-engine');\nconst WindowManager = OSjs.require('core/window-manager');\n\nexport default class PanelItemSearch extends PanelItem {\n  constructor(settings) {\n    super('PanelItemSearch corewm-panel-right', 'Search', settings, {\n    });\n\n    this.$ul = null;\n    this.$box = null;\n    this.$input = null;\n\n    this.$message = null;\n    this.visible = false;\n    this.hookId = -1;\n    this.currentIndex = -1;\n    this.currentCount = 0;\n  }\n\n  init() {\n    const root = super.init(...arguments);\n\n    const img = document.createElement('img');\n    img.src = Theme.getIcon('actions/system-search.png');\n\n    const input = document.createElement('input');\n    input.setAttribute('type', 'text');\n\n    const guinput = document.createElement('gui-text');\n    guinput.appendChild(input);\n\n    const ul = document.createElement('ul');\n\n    this.$message = document.createElement('div');\n    this.$message.appendChild(document.createTextNode(Locales._('SEARCH_LOADING')));\n\n    this.$box = document.createElement('corewm-search');\n    this.$box.className = 'custom-notification';\n    this.$box.appendChild(guinput);\n    this.$box.appendChild(this.$message);\n    this.$box.appendChild(ul);\n\n    const self = this;\n    const keyEvents = {};\n    keyEvents[Keycodes.DOWN] = () => this.navigateDown();\n    keyEvents[Keycodes.UP] = () => this.navigateUp();\n    keyEvents[Keycodes.ESC] = () => this.hide();\n    keyEvents[Keycodes.ENTER] = function(ev) {\n      if ( this.value.length ) {\n        self.search(this.value);\n        this.value = '';\n      } else {\n        self.navigateOpen();\n      }\n    };\n\n    Hooks.addHook('menuBlur', () => this.hide());\n\n    Events.$bind(root, 'click', function(ev) {\n      ev.stopPropagation();\n\n      if ( self.visible ) {\n        self.hide();\n      } else {\n        self.show();\n      }\n    });\n\n    Events.$bind(input, 'mousedown', (ev) => ev.stopPropagation());\n\n    Events.$bind(input, 'keydown', function(ev) {\n      /* eslint no-invalid-this: \"off\" */\n      if ( keyEvents[ev.keyCode] ) {\n        ev.preventDefault();\n        ev.stopPropagation();\n\n        keyEvents[ev.keyCode].call(this, ev);\n      }\n    });\n\n    Events.$bind(ul, 'mousedown', (ev) => ev.stopPropagation());\n\n    Events.$bind(ul, 'click', (ev) => {\n      const target = ev.target;\n      if ( target.tagName === 'LI' ) {\n        self.launch(target);\n      }\n    });\n\n    Events.$bind(this.$box, 'mousedown', () => {\n      if ( input ) {\n        input.focus();\n      }\n    });\n\n    const li = document.createElement('li');\n    li.appendChild(img);\n\n    this.$ul = ul;\n    this.$input = input;\n    this._$container.appendChild(li);\n\n    document.body.appendChild(this.$box);\n\n    return root;\n  }\n\n  applySettings() {\n  }\n\n  openSettings() {\n    Process.create('ApplicationSettings', {category: 'search'});\n  }\n\n  destroy() {\n    if ( this.hookId >= 0 ) {\n      Hooks.removeHook(this.hookId);\n    }\n\n    Events.$unbind(this._$root, 'click');\n    Events.$unbind(this.$input, 'mousedown');\n    Events.$unbind(this.$input, 'keydown');\n    Events.$unbind(this.$ul, 'mousedown');\n    Events.$unbind(this.$ul, 'click');\n    Events.$unbind(this.$box, 'mousedown');\n\n    this.$message = DOM.$remove(this.$message);\n    this.$input = DOM.$remove(this.$input);\n    this.$box = DOM.$remove(this.$box);\n    this.$ul = DOM.$remove(this.$ul);\n\n    return super.destroy(...arguments);\n  }\n\n  launch(target) {\n    const launch = target.getAttribute('data-launch');\n    const args = JSON.parse(target.getAttribute('data-args'));\n    const file = target.getAttribute('data-file');\n    const mime = target.getAttribute('data-mime');\n    const type = target.getAttribute('data-type');\n\n    if ( file ) {\n      if ( type === 'dir' ) {\n        Process.create('ApplicationFileManager', {path: file});\n      } else {\n        Process.createFromFile(new FileMetadata(file, mime));\n      }\n    } else {\n      Process.create(launch, args);\n    }\n\n    this.hide();\n  }\n\n  show() {\n    if ( !this.$box || this.visible ) {\n      return;\n    }\n\n    const wm = WindowManager.instance;\n    const space = wm.getWindowSpace(true);\n    const input = this.$box.querySelector('input');\n\n    DOM.$empty(this.$box.querySelector('ul'));\n    this.$box.style.marginTop = String(space.top) + 'px';\n    this.$box.setAttribute('data-visible', String(true));\n\n    if ( input ) {\n      input.value = '';\n      input.focus();\n    }\n    this.visible = true;\n\n    this.$message.style.display = 'none';\n  }\n\n  hide() {\n    if ( !this.$box || !this.visible ) {\n      return;\n    }\n\n    this.$box.setAttribute('data-visible', String(false));\n    this.visible = false;\n  }\n\n  search(q) {\n    if ( !this.$box ) {\n      return;\n    }\n\n    this.currentIndex = -1;\n    this.currentCount = 0;\n\n    DOM.$empty(this.$message);\n    this.$message.appendChild(document.createTextNode(Locales._('SEARCH_LOADING')));\n    this.$message.style.display = 'block';\n\n    SearchEngine.search(q, {limit: 10, recursive: true}).then((result) => {\n      this.renderResult(result);\n    }).catch((errors) => {\n      console.error('PanelItemSearch::search()', 'errors', errors);\n    });\n  }\n\n  renderResult(list) {\n    if ( !this.$box ) {\n      return;\n    }\n\n    const root = this.$box.querySelector('ul');\n    DOM.$empty(root);\n\n    this.currentCount = list.length;\n\n    if ( this.currentCount ) {\n      this.$message.style.display = 'none';\n    } else {\n      DOM.$empty(this.$message);\n      this.$message.appendChild(document.createTextNode(Locales._('SEARCH_NO_RESULTS')));\n      this.$message.style.display = 'block';\n    }\n\n    list.forEach(function(l) {\n      const img = document.createElement('img');\n      img.src = l.icon;\n\n      const title = document.createElement('div');\n      title.className = 'Title';\n      title.appendChild(document.createTextNode(l.title));\n\n      const description = document.createElement('div');\n      description.className = 'Message';\n      description.appendChild(document.createTextNode(l.description));\n\n      const node = document.createElement('li');\n      node.setAttribute('data-launch', l.launch.application);\n      node.setAttribute('data-args', JSON.stringify(l.launch.args));\n      if ( l.launch.file ) {\n        node.setAttribute('data-file', l.launch.file.path);\n        node.setAttribute('data-mime', l.launch.file.mime);\n        node.setAttribute('data-type', l.launch.file.type);\n      }\n\n      node.appendChild(img);\n      node.appendChild(title);\n      node.appendChild(description);\n      root.appendChild(node);\n    });\n  }\n\n  updateSelection() {\n    const root = this.$box.querySelector('ul');\n    const child = root.children[this.currentIndex];\n\n    root.querySelectorAll('li').forEach(function(el) {\n      DOM.$removeClass(el, 'active');\n    });\n\n    DOM.$addClass(child, 'active');\n  }\n\n  navigateUp() {\n    if ( !this.currentCount ) {\n      return;\n    }\n\n    if ( this.currentIndex > 0 ) {\n      this.currentIndex--;\n    } else {\n      this.currentIndex = this.currentCount - 1;\n    }\n\n    this.updateSelection();\n  }\n\n  navigateDown() {\n    if ( !this.currentCount ) {\n      return;\n    }\n\n    if ( this.currentIndex < 0 || this.currentIndex >= (this.currentCount - 1) ) {\n      this.currentIndex = 0;\n    } else {\n      this.currentIndex++;\n    }\n\n    this.updateSelection();\n  }\n\n  navigateOpen() {\n    if ( this.currentIndex === -1 || !this.currentCount ) {\n      return;\n    }\n\n    const root = this.$box.querySelector('ul');\n    const child = root.children[this.currentIndex];\n    if ( child ) {\n      this.launch(child);\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/search.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport PanelItem from '../panelitem';\n\nconst DOM = OSjs.require('utils/dom');\nconst Utils = OSjs.require('utils/misc');\nconst Theme = OSjs.require('core/theme');\nconst Events = OSjs.require('utils/events');\nconst Connection = OSjs.require('core/connection');\n\nexport default class PanelItemWeather extends PanelItem {\n  constructor() {\n    super('PanelItemWeather corewm-panel-right corewm-panel-dummy');\n\n    this.clockInterval  = null;\n    this.position = null;\n    this.interval = null;\n    this.$element = null;\n    this.$image = null;\n\n    if ( navigator.geolocation ) {\n      navigator.geolocation.getCurrentPosition((pos) => {\n        this.position = pos;\n        setTimeout(() => this.updateWeather(), 100);\n      });\n    }\n  }\n\n  init() {\n    const root = super.init(...arguments);\n    this.$element = document.createElement('li');\n    this.$image = document.createElement('img');\n    this.$element.appendChild(this.$image);\n    this._$container.appendChild(this.$element);\n    this.updateWeather();\n    return root;\n  }\n\n  destroy() {\n    Events.$unbind(this._$root, 'click');\n    this.interval = clearInterval(this.interval);\n    this.$image = DOM.$remove(this.$image);\n    this.$element = DOM.$remove(this.$element);\n\n    return super.destroy(...arguments);\n  }\n\n  updateWeather() {\n    if ( !this.$image ) {\n      return;\n    }\n\n    this.$image.title = 'Not allowed or unavailable';\n\n    var busy = false;\n\n    const setImage = (src) => {\n      if ( this.$image ) {\n        this.$image.src = src;\n      }\n    };\n\n    const setWeather = (name, weather, main) => {\n      if ( !this.$image ) {\n        return;\n      }\n\n      name = name || '<unknown location>';\n      weather = weather || {};\n      main = main || {};\n\n      var desc = weather.description || '<unknown weather>';\n      var temp = main.temp || '<unknown temp>';\n      if ( main.temp ) {\n        temp += 'C';\n      }\n      var icon = 'sunny.png';\n\n      switch ( desc  ) {\n        case 'clear sky':\n          if ( weather.icon === '01n' ) {\n            icon = 'weather-clear-night.png';\n          } else {\n            icon = 'weather-clear.png';\n          }\n          break;\n        case 'few clouds':\n          if ( weather.icon === '02n' ) {\n            icon = 'weather-few-clouds-night.png';\n          } else {\n            icon = 'weather-few-clouds.png';\n          }\n          break;\n        case 'scattered clouds':\n        case 'broken clouds':\n          icon = 'weather-overcast.png';\n          break;\n        case 'shower rain':\n          icon = 'weather-showers.png';\n          break;\n        case 'rain':\n          icon = 'weather-showers-scattered.png';\n          break;\n        case 'thunderstorm':\n          icon = 'stock_weather-storm.png';\n          break;\n        case 'snow':\n          icon = 'stock_weather-snow.png';\n          break;\n        case 'mist':\n          icon = 'stock_weather-fog.png';\n          break;\n        default:\n          if ( desc.match(/rain$/) ) {\n            icon = 'weather-showers-scattered.png';\n          }\n          break;\n      }\n\n      var src = Theme.getIcon('status/' + icon);\n      this.$image.title = Utils.format('{0} - {1} - {2}', name, desc, temp);\n      setImage(src);\n    };\n\n    const updateWeather = () => {\n      if ( busy || !this.position ) {\n        return;\n      }\n      busy = true;\n\n      var lat = this.position.coords.latitude;\n      var lon = this.position.coords.longitude;\n      var unt = 'metric';\n      var key = '4ea33327bcfa4ea0293b2d02b6fda385';\n      var url = Utils.format('http://api.openweathermap.org/data/2.5/weather?lat={0}&lon={1}&units={2}&APPID={3}', lat, lon, unt, key);\n\n      Connection.request('curl', {\n        url: url\n      }).then((response) => {\n        if ( response ) {\n          var result = null;\n          try {\n            result = JSON.parse(response.body);\n          } catch ( e ) {}\n\n          if ( result ) {\n            setWeather(result.name, result.weather ? result.weather[0] : null, result.main);\n          }\n        }\n\n        busy = false;\n      }).catch(() => {\n        busy = false;\n      });\n    };\n\n    setImage(Theme.getIcon('status/weather-severe-alert.png'));\n\n    this.interval = setInterval(function() {\n      updateWeather();\n    }, (60 * 60 * 1000));\n\n    Events.$bind(this._$root, 'click', () => updateWeather());\n    setTimeout(() => updateWeather(), 1000);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/weather.js","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*eslint valid-jsdoc: \"off\"*/\nimport PanelItem from '../panelitem';\n\nconst GUI = OSjs.require('utils/gui');\nconst DOM = OSjs.require('utils/dom');\nconst Events = OSjs.require('utils/events');\nconst WindowManager = OSjs.require('core/window-manager');\n\nclass WindowListEntry {\n\n  constructor(win, className) {\n\n    const el = document.createElement('li');\n    el.className = className;\n    el.title = win._title;\n    el.setAttribute('role', 'button');\n    el.setAttribute('aria-label', win._title);\n\n    const img = document.createElement('img');\n    img.alt = win._title;\n    img.src = win._icon;\n\n    const span = document.createElement('span');\n    span.appendChild(document.createTextNode(win._title));\n\n    el.appendChild(img);\n    el.appendChild(span);\n\n    Events.$bind(el, 'click', function() {\n      win._restore(false, true);\n    });\n\n    Events.$bind(el, 'contextmenu', function(ev) {\n      /* eslint no-invalid-this: \"off\" */\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      if ( win ) {\n        win._onWindowIconClick(ev, this);\n      }\n\n      return false;\n    });\n\n    let peeking = false;\n    GUI.createDroppable(el, {\n      onDrop: function(ev, el) {\n        if ( win ) {\n          win._focus();\n        }\n      },\n      onLeave: function() {\n        if ( peeking ) {\n          peeking = false;\n        }\n      },\n      onEnter: function(ev, inst, args) {\n        if ( !peeking ) {\n          if ( win ) {\n            win._focus();\n          }\n          peeking = true;\n        }\n      },\n      onItemDropped: function(ev, el, item, args) {\n        if ( win ) {\n          return win._onDndEvent(ev, 'itemDrop', item, args);\n        }\n        return false;\n      },\n      onFilesDropped: function(ev, el, files, args) {\n        if ( win ) {\n          return win._onDndEvent(ev, 'filesDrop', files, args);\n        }\n        return false;\n      }\n    });\n\n    if ( win._state.focused ) {\n      el.className += ' Focused';\n    }\n\n    this.$element = el;\n    this.id = win._wid;\n  }\n\n  destroy() {\n    if ( this.$element ) {\n      Events.$unbind(this.$element, 'click');\n      Events.$unbind(this.$element, 'contextmenu');\n      this.$element = DOM.$remove(this.$element);\n    }\n  }\n\n  event(ev, win, parentEl) {\n    const cn = 'WindowList_Window_' + win._wid;\n\n    function _change(cn, callback) {\n      const els = parentEl.getElementsByClassName(cn);\n      if ( els.length ) {\n        for ( let i = 0, l = els.length; i < l; i++ ) {\n          if ( els[i] && els[i].parentNode ) {\n            callback(els[i]);\n          }\n        }\n      }\n    }\n\n    if ( ev === 'focus' ) {\n      _change(cn, function(el) {\n        el.className += ' Focused';\n      });\n    } else if ( ev === 'blur' ) {\n      _change(cn, function(el) {\n        el.className = el.className.replace(/\\s?Focused/, '');\n      });\n    } else if ( ev === 'title' ) {\n      _change(cn, function(el) {\n        el.setAttribute('aria-label', win._title);\n\n        const span = el.getElementsByTagName('span')[0];\n        if ( span ) {\n          DOM.$empty(span);\n          span.appendChild(document.createTextNode(win._title));\n        }\n        const img = el.getElementsByTagName('img')[0];\n        if ( img ) {\n          img.alt = win._title;\n        }\n      });\n    } else if ( ev === 'icon' ) {\n      _change(cn, function(el) {\n        el.getElementsByTagName('img')[0].src = win._icon;\n      });\n    } else if ( ev === 'attention_on' ) {\n      _change(cn, function(el) {\n        if ( !el.className.match(/Attention/) ) {\n          el.className += ' Attention';\n        }\n      });\n    } else if ( ev === 'attention_off' ) {\n      _change(cn, function(el) {\n        if ( !el.className.match(/Attention/) ) {\n          el.className = el.className.replace(/\\s?Attention/, '');\n        }\n      });\n    } else if ( ev === 'close' ) {\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport default class PanelItemWindowList extends PanelItem {\n\n  constructor() {\n    super('PanelItemWindowList corewm-panel-expand');\n    this.entries = [];\n  }\n\n  init() {\n    const root = super.init(...arguments);\n\n    const wm = WindowManager.instance;\n    if ( wm ) {\n      const wins = wm.getWindows();\n      for ( let i = 0; i < wins.length; i++ ) {\n        if ( wins[i] ) {\n          this.update('create', wins[i]);\n        }\n      }\n    }\n\n    return root;\n  }\n\n  destroy() {\n    this.entries.forEach(function(e) {\n      try {\n        e.destroy();\n      } catch ( e ) {}\n      e = null;\n    });\n\n    this.entries = [];\n\n    return super.destroy(...arguments);\n  }\n\n  update(ev, win) {\n    if ( !this._$container || (win && win._properties.allow_windowlist === false) ) {\n      return;\n    }\n\n    let entry = null;\n    if ( ev === 'create' ) {\n      const className = 'corewm-panel-ellipsis WindowList_Window_' + win._wid;\n      if ( this._$container.getElementsByClassName(className).length ) {\n        return;\n      }\n\n      entry = new WindowListEntry(win, className);\n      this.entries.push(entry);\n      this._$container.appendChild(entry.$element);\n    } else {\n      let found = -1;\n      this.entries.forEach(function(e, idx) {\n        if ( e.id === win._wid ) {\n          found = idx;\n        }\n        return found !== -1;\n      });\n\n      entry = this.entries[found];\n      if ( entry ) {\n        if ( entry.event(ev, win, this._$container) === false ) {\n          entry.destroy();\n\n          this.entries.splice(found, 1);\n        }\n      }\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./panelitems/windowlist.js","module.exports = \"<application-window data-id=\\\"ClockSettingsDialog\\\"> <gui-vbox> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>Time Format String:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputTimeFormatString\\\">H:i:s</gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>Tooltip Format String:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputTooltipFormatString\\\">l, j F Y</gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>Interval:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-select data-id=\\\"InputInterval\\\"> <gui-select-option data-value=\\\"1000\\\">1 second</gui-select-option> <gui-select-option data-value=\\\"60000\\\">1 minute</gui-select-option> <gui-select-option data-value=\\\"3600000\\\">1 hour</gui-select-option> </gui-select> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-label>UTC Time:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"1\\\" data-shrink=\\\"0\\\"> <gui-checkbox data-id=\\\"InputUseUTC\\\"></gui-checkbox> </gui-vbox-container> <gui-vbox-container data-shrink=\\\"1\\\" data-align=\\\"end\\\"> <gui-hbox> <gui-hbox-container data-grow=\\\"0\\\" data-shrink=\\\"1\\\"> <gui-button data-id=\\\"ButtonApply\\\">Apply</gui-button> <gui-button data-id=\\\"ButtonCancel\\\">Cancel</gui-button> </gui-hbox-container> </gui-hbox> </gui-vbox-container> </gui-vbox></application-window><application-window data-id=\\\"IconViewShortcutDialog\\\"> <gui-vbox> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\"> <gui-label>Launch:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputShortcutLaunch\\\">ApplicationClassName</gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\"> <gui-label>Label:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputShortcutLabel\\\"></gui-text> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\"> <gui-label>Launch arguments:</gui-label> </gui-vbox-container> <gui-vbox-container data-grow=\\\"0\\\" data-shrink=\\\"0\\\" data-expand=\\\"true\\\"> <gui-text data-id=\\\"InputTooltipFormatString\\\"></gui-text> </gui-vbox-container> <gui-vbox-container data-shrink=\\\"1\\\" data-align=\\\"end\\\"> <gui-hbox> <gui-hbox-container data-grow=\\\"0\\\" data-shrink=\\\"1\\\"> <gui-button data-id=\\\"ButtonApply\\\">Apply</gui-button> <gui-button data-id=\\\"ButtonCancel\\\">Cancel</gui-button> </gui-hbox-container> </gui-hbox> </gui-vbox-container> </gui-vbox></application-window>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Volumes/data/WorkSpace/osjs/OS.js/node_modules/osjs-scheme-loader!./scheme.html\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}